(function(f){var b=f.Jx,k={},l={},g={NO_DEBUG:0,SHOW_ALL:1},i={debug:1},c=function(e,q,r){e=String(e);if(i.debug)if(this.console)this.console.out?this.console.out(e,q,r):alert(e+" - \u6d88\u606f\u7c7b\u578b["+r+"]");return e};try{if(typeof b==="undefined"||b.mark&&b.mark==="JxMark"){if(b){k=b.VERSIONS;l=b.PACKAGES}b=function(e,q){var r=this;if(q)if(r&&r.hasOwnProperty&&r instanceof b)r._init();else r=new b(e);else if(e){e=String(e);try{if(b.VERSIONS[e])r=b.VERSIONS[e];else{r=b.VERSIONS[b.DEFAULT_VERSION];
throw Error("\u6ca1\u6709\u627e\u5230 JET version "+e+", \u6240\u4ee5\u8fd4\u56de\u9ed8\u8ba4\u7248\u672c JET version "+b.DEFAULT_VERSION+"!");}}catch(o){r.out("A.\u9519\u8bef\uff1a["+o.name+"] "+o.message+", "+o.fileName+", \u884c\u53f7:"+o.lineNumber+"; stack:"+typeof o.stack,2)}}else r=b.VERSIONS[b.DEFAULT_VERSION];return r};b.prototype={version:"1.0.%Version%",DEBUG:g,option:i,_init:function(){this.constructor=b},$namespace:function(e){if(!e)return f;e=String(e);var q,r=e.split("."),o=f;for(e=
0;e<r.length;e+=1){q=r[e];o[q]=o[q]||{};o=o[r[e]]}return o},$package:function(){var e=arguments[0],q=arguments[arguments.length-1],r=f,o;if(typeof q==="function"){if(typeof e==="string"){r=this.$namespace(e);b.PACKAGES[e]||(b.PACKAGES[e]={isLoaded:true,returnValue:o});r.packageName=e}else if(typeof e==="object")r=e;o=q.call(r,this);typeof e==="string"&&(b.PACKAGES[e].returnValue=o)}else throw Error("Function required");},checkPackage:function(e){return b.PACKAGES[e]},out:c,debug:function(){},profile:function(){},
warn:function(){},error:function(){},startTime:+new Date,about:function(){return this.out("JET (Javascript Extend Tools)\nversion: "+this.version+"\n\nCopyright (c) 2009, All rights reserved.")},toString:function(){return"JET version "+this.version+" !"}};b.VERSIONS=k;b.PACKAGES=l;b.VERSIONS["1.0.%Version%"]=new b("1.0.%Version%",true);b.DEFAULT_VERSION="1.0.%Version%";b.mark="JxMark";f.Jet=f.Jx=b}else throw Error('"Jx" name is defined in other javascript code !!!');}catch(h){c("JET \u5fae\u5185\u6838\u521d\u59cb\u5316\u5931\u8d25! B.\u9519\u8bef\uff1a["+
h.name+"] "+h.message+", "+h.fileName+", \u884c\u53f7:"+h.lineNumber+"; stack:"+typeof h.stack,1)}})(this);
Jx().$package(function(f){var b,k,l,g,i,c,h,e,q,r,o;b=function(a){return typeof a==="undefined"};k=function(a){return a===null};l=function(a){return(a===0||a)&&a.constructor===Number};i=function(a){return(a===false||a)&&a.constructor===Boolean};g=function(a){return(a===""||a)&&a.constructor===String};c=function(a){return a&&(a.constructor===Object||Object.prototype.toString.call(a)==="[object Object]")};h=function(a){return a&&(a.constructor===Array||Object.prototype.toString.call(a)==="[object Array]")};
e=function(a){return a&&a.callee&&l(a.length)?true:false};q=function(a){return a&&a.constructor===Function};r=function(a){var d=arguments,m,n;if(d.length===1){a=this;d=0}else{a=d[0]||{};d=1}for(;d<arguments.length;d++){n=arguments[d];for(m in n){var s=a[m],u=n[m];if(s!==u)if(u&&c(u)&&!h(u)&&!u.nodeType&&!q(u)){s=a[m]||{};a[m]=r(s,u||(u.length!=null?[]:{}))}else if(u!==undefined)a[m]=u}}return a};o=function(){var a=arguments.length,d=arguments[a-1];d.init=d.init||function(){};if(a===2){a=arguments[0].extend;
var m=function(){};m.prototype=a.prototype;var n=function(){this.init.apply(this,arguments)};n.superClass=a.prototype;n.callSuper=function(s,u){var x=Array.prototype.slice,v=x.call(arguments,2);(u=n.superClass[u])&&u.apply(s,v.concat(x.call(arguments)))};n.prototype=new m;n.prototype.constructor=n;f.extend(n.prototype,d);n.prototype.init=function(){d.init.apply(this,arguments)};return n}else if(a===1){a=function(){return this.init.apply(this,arguments)};a.prototype=d;return a}};var j=new o({init:function(a,
d,m,n,s){var u=a.concat();if(n)u=a;this.timeout=window.setTimeout(function(){var x=+new Date;do d.call(m,u.shift());while(u.length>0&&+new Date-x<50);if(u.length>0)this.timeout=window.setTimeout(arguments.callee,25);else s&&s(a)},25)},stop:function(){clearTimeout(this.timeout)}});f.isUndefined=b;f.isNull=k;f.isNumber=l;f.isString=g;f.isBoolean=i;f.isObject=c;f.isArray=h;f.isArguments=e;f.isFunction=q;f.$typeof=function(a){return b(a)?"undefined":k(a)?"null":l(a)?"number":i(a)?"boolean":g(a)?"string":
c(a)?"object":h(a)?"array":e(a)?"arguments":q(a)?"function":"other"};f.$return=function(a){return f.isFunction(a)?a:function(){return a}};f.$try=function(){var a,d=arguments.length,m;for(a=0;a<d;a++)try{m=arguments[a]();break}catch(n){f.out("C.\u9519\u8bef\uff1a["+n.name+"] "+n.message+", "+n.fileName+", \u884c\u53f7:"+n.lineNumber+"; stack:"+typeof n.stack,2)}return m};f.emptyFunc=function(){};f.clone=function(a){var d=function(){};d.prototype=a;return new d};f.getLength=function(a){var d,m=0;for(d in a)a.hasOwnProperty(d)&&
m++;return m};f.checkJSON=function(){return true};f.random=function(a,d){return Math.floor(Math.random()*(d-a+1)+a)};f.extend=r;f.now=function(){return+new Date};f.timedChunk=function(a,d,m,n,s){var u=a.concat();if(n)u=a;window.setTimeout(function(){var x=+new Date;do d.call(m,u.shift());while(u.length>0&&+new Date-x<50);if(u.length>0)window.setTimeout(arguments.callee,25);else s&&s(a)},25)};f.rebuild=function(a,d){d=d||{};a.$$rebuildedFunc=a.$$rebuildedFunc||function(){var m,n;m=d.contextObj||this;
n=Array.prototype.slice.call(arguments,0);if(n!==undefined)n=n.concat(d.arguments);if(d.event===false)n=n.slice(1);return a.apply(m,n)};return a.$$rebuildedFunc};f.pass=function(a){var d=Array.prototype.slice,m=d.call(arguments,1);return function(){return a.apply(this,m.concat(d.call(arguments)))}};f.bind=function(a,d){var m=Array.prototype.slice,n=m.call(arguments,2);return function(){return a.apply(d,n.concat(m.call(arguments)))}};f.bindNoEvent=void 0;f.Class=o;f.Chunk=j});
Jx().$package(function(f){f.array=f.array||{};var b=f.array,k,l,g,i,c,h,e,q,r,o,j,a;k=Array.prototype.indexOf?function(){var d=Array.prototype.slice.call(arguments,1);return Array.prototype.indexOf.apply(arguments[0],d)}:function(d,m,n){if(n==null)n=0;else if(n<0)n=Math.max(0,d.length+n);for(n=n;n<d.length;n++)if(d[n]===m)return n;return-1};l=Array.prototype.lastIndexOf?function(){var d=Array.prototype.slice.call(arguments,1);return Array.prototype.lastIndexOf.apply(arguments[0],d)}:function(d,m,
n){if(n==null)n=d.length-1;else if(n<0)n=Math.max(0,d.length+n);for(n=n;n>=0;n--)if(d[n]===m)return n;return-1};g=Array.prototype.forEach?function(){var d=Array.prototype.slice.call(arguments,1);return Array.prototype.forEach.apply(arguments[0],d)}:function(d,m,n){var s=d.length;if(typeof m!="function")throw new TypeError;for(var u=0;u<s;u++)u in d&&m.call(n,d[u],u,d)};i=Array.prototype.filter?function(){var d=Array.prototype.slice.call(arguments,1);return Array.prototype.filter.apply(arguments[0],
d)}:function(d,m,n){var s=d.length;if(typeof m!="function")throw new TypeError;for(var u=[],x=0;x<s;x++)if(x in d){var v=d[x];m.call(n,v,x,d)&&u.push(v)}return u};c=Array.prototype.some?function(){var d=Array.prototype.slice.call(arguments,1);return Array.prototype.some.apply(arguments[0],d)}:function(d,m,n){var s=d.length;if(typeof m!="function")throw new TypeError;for(var u=0;u<s;u++)if(u in d&&m.call(n,d[u],u,d))return true;return false};h=Array.prototype.map?function(){var d=Array.prototype.slice.call(arguments,
1);return Array.prototype.map.apply(arguments[0],d)}:function(d,m,n){var s=d.length;if(typeof m!="function")throw new TypeError;for(var u=Array(s),x=0;x<s;x++)if(x in d)u[x]=m.call(n,d[x],x,d);return u};e=Array.prototype.every?function(){var d=Array.prototype.slice.call(arguments,1);return Array.prototype.every.apply(arguments[0],d)}:function(d,m,n){var s=d.length;if(typeof m!="function")throw new TypeError;for(var u=0;u<s;u++)if(u in d&&!m.call(n,d[u],u,d))return false;return true};q=Array.prototype.reduce?
function(){var d=Array.prototype.slice.call(arguments,1);return Array.prototype.reduce.apply(arguments[0],d)}:function(d,m){var n=d.length>>>0;if(typeof m!="function")throw new TypeError;if(n==0&&arguments.length==2)throw new TypeError;var s=0;if(arguments.length>=3)var u=arguments[2];else{do{if(s in d){u=d[s++];break}if(++s>=n)throw new TypeError;}while(1)}for(;s<n;s++)if(s in d)u=m.call(null,u,d[s],s,d);return u};r=Array.prototype.reduceRight?function(){var d=Array.prototype.slice.call(arguments,
1);return Array.prototype.reduceRight.apply(arguments[0],d)}:function(d,m){var n=d.length>>>0;if(typeof m!="function")throw new TypeError;if(n==0&&arguments.length==2)throw new TypeError;n=n-1;if(arguments.length>=3)var s=arguments[2];else{do{if(n in d){s=d[n--];break}if(--n<0)throw new TypeError;}while(1)}for(;n>=0;n--)if(n in d)s=m.call(null,s,d[n],n,d);return s};o=function(d){var m=f.$typeof(d);return m?m!="array"&&m!="arguments"?[d]:d:[]};j=function(d,m){return k(d,m)>-1};a=function(d){for(var m=
[],n=0,s=d.length;n<s;n++)j(m,d[n])||m.push(d[n]);return m};b.indexOf=k;b.lastIndexOf=l;b.forEach=g;b.filter=i;b.some=c;b.map=h;b.every=e;b.reduce=q;b.reduceRight=r;b.toArray=o;b.remove=function(d,m){m=o(m);var n,s,u=false;for(n=0;n<m.length;n++)for(s=0;s<d.length;s++)if(d[s]===m[n]){d.splice(s,1);u=true}return u};b.replace=function(d,m,n){var s;for(s=0;s<d.length;s++)if(d[s]===m){d[s]=n;return true}return false};b.bubbleSort=function(d,m){m=m||function(E,D){return E-D};for(var n=d.length,s,u,x=0;x<
n-1;x++){u=false;for(var v=n-1;v>x;v--)if(m(d[v],d[v-1])<0){u=true;s=d[v-1];d[v-1]=d[v];d[v]=s}if(!u)break}return d};b.binarySearch=function(d,m,n){for(var s=0,u=d.length,x=Math.floor(d.length/2);u!=x;){if(n(m,d[x])>0)s=x+1;else u=x;x=Math.floor((s+u)/2)}return x};b.contains=j;b.uniquelize=a;b.intersect=function(d,m){for(var n=[],s=0,u=d.length;s<u;s++)j(m,d[s])&&n.push(d[s]);return n};b.minus=function(d,m){for(var n=[],s=0,u=d.length;s<u;s++)j(m,d[s])||n.push(d[s]);return n};b.union=function(d,m){return a(d.concat(m))}});
Jx().$package(function(f){f.browserOptions={adjustBehaviors:true,htmlClass:true};f.host=window.location.host;var b=navigator.platform.toLowerCase(),k=navigator.userAgent.toLowerCase(),l=navigator.plugins,g,i,c,h,e;h=function(o,j){o=(""+o).replace(/_/g,".");j=j||1;o=String(o).split(".");o=o[0]+"."+(o[1]||"0");return o=Number(o).toFixed(j)};g={getPlatform:function(){return b},name:window.orientation!=undefined?"iPod":(b.match(/mac|win|linux/i)||["unknown"])[0],version:0,iPod:0,iPad:0,iPhone:0,android:0,
win:0,linux:0,mac:0,set:function(o,j){this.name=o;this.version=j;this[o]=j}};g[g.name]=true;(e=k.match(/windows ([\d.]+)/))?g.set("win",h(e[1])):(e=k.match(/windows nt ([\d.]+)/))?g.set("win",h(e[1])):(e=k.match(/linux ([\d.]+)/))?g.set("linux",h(e[1])):(e=k.match(/mac ([\d.]+)/))?g.set("mac",h(e[1])):(e=k.match(/ipod ([\d.]+)/))?g.set("iPod",h(e[1])):(e=k.match(/ipad[\D]*os ([\d_]+)/))?g.set("iPad",h(e[1])):(e=k.match(/iphone ([\d.]+)/))?g.set("iPhone",h(e[1])):(e=k.match(/android ([\d.]+)/))&&g.set("android",
h(e[1]));i={features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector},getPlugins:function(){return l},plugins:{flash:function(){var o=0;if(l&&l.length){var j=l["Shockwave Flash"];if(j&&j.description)o=h(j.description.match(/\b(\d+)\.\d+\b/)[1],1)||o}else for(j=13;j--;)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+j);o=h(j);break}catch(a){}return o}()},getUserAgent:function(){return k},name:"unknown",version:0,ie:0,firefox:0,chrome:0,opera:0,safari:0,mobileSafari:0,
adobeAir:0,set:function(o,j){this.name=o;this.version=j;this[o]=j}};(e=k.match(/msie ([\d.]+)/))?i.set("ie",h(e[1])):(e=k.match(/firefox\/([\d.]+)/))?i.set("firefox",h(e[1])):(e=k.match(/chrome\/([\d.]+)/))?i.set("chrome",h(e[1])):(e=k.match(/opera.([\d.]+)/))?i.set("opera",h(e[1])):(e=k.match(/adobeair\/([\d.]+)/))?i.set("adobeAir",h(e[1])):(e=k.match(/version\/([\d.]+).*safari/))&&i.set("safari",h(e[1]));(e=k.match(/version\/([\d.]+).*mobile.*safari/))&&i.set("mobileSafari",h(e[1]));g.iPad&&i.set("mobileSafari",
"0.0");if(i.ie)if(document.documentMode)document.documentMode!==Math.floor(i.ie)&&i.set("ie",h(document.documentMode));else document.documentMode=Math.floor(i.ie);c={name:"unknown",version:0,trident:0,gecko:0,webkit:0,presto:0,set:function(o,j){this.name=o;this.version=j;this[o]=j}};(e=k.match(/trident\/([\d.]+)/))?c.set("trident",h(e[1])):(e=k.match(/gecko\/([\d.]+)/))?c.set("gecko",h(e[1])):(e=k.match(/applewebkit\/([\d.]+)/))?c.set("webkit",h(e[1])):(e=k.match(/presto\/([\d.]+)/))&&c.set("presto",
h(e[1]));if(i.ie)if(i.ie==6)c.set("trident",h("4"));else if(i.ie==7||i.ie==8)c.set("trident",h("5"));if(f.browserOptions.adjustBehaviors)if(i.ie&&i.ie<7)try{document.execCommand("BackgroundImageCache",false,true)}catch(q){}var r=function(o){return String(o).replace(/\./gi,"_")};e=function(){var o=document.documentElement,j=[o.className];j.push("javascriptEnabled");j.push(g.name);j.push(g.name+r(g.version));j.push(i.name);j.push(i.name+r(i.version));document.documentMode&&j.push("documentMode_"+document.documentMode);
j.push(c.name);j.push(c.name+r(c.version));if(i.plugins.flash){j.push("flash");j.push("flash"+r(i.plugins.flash))}typeof window.webTop!="undefined"&&window.webTop&&j.push("webTop");o.className=j.join(" ")};f.browserOptions.htmlClass&&e();f.platform=g;f.browser=i;f.browser.engine=c});
Jx().$package(function(f){var b,k,l,g,i,c,h,e,q,r,o,j,a,d,m,n,s=null,u,x,v,E;f.dom=f.dom||{};b=f.dom;k=f.browser;l=b.win?b.win.contentWindow:b.win||window;b.win=l;b.doc=l.document;var D=document&&Object.prototype.hasOwnProperty.call(document.documentElement,"classList");x=function(){if(v)return v;return v=document.compatMode==="CSS1Compat"?document.documentElement:document.body};n=function(p){if(p){p=p||window.document;s=p.nodeType===9?p:p.ownerDocument||b.doc}else if(!s){p=p||window.document;s=p.nodeType===
9?p:p.ownerDocument||b.doc}return s};u=function(p){var t=n(p);return p.document?p:t.defaultView||t.parentWindow||b.win};l=function(p,t){t=t||n();return t.getElementsByTagName(p)};o=function(p){return(p?p.scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft))||0};j=function(p){return(p?p.scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop))||0};g=function(){return D?function(p,t){if(!p||!t)return false;return p.classList.contains(t)}:function(p,
t){if(!p||!t)return false;return-1<(" "+p.className+" ").indexOf(" "+t+" ")}}();i=function(){return D?function(p,t){!p||!t||g(p,t)||p.classList.add(t)}:function(p,t){!p||!t||g(p,t)||(p.className+=" "+t)}}();c=function(){return D?function(p,t){!p||!t||!g(p,t)||p.classList.remove(t)}:function(p,t){if(!(!p||!t||!g(p,t)))p.className=p.className.replace(RegExp("(?:^|\\s)"+t+"(?:\\s|$)")," ")}}();h=function(){return D?function(p,t){p&&t&&p.classList.toggle(t)}:function(p,t){if(p&&t)g(p,t)?c(p,t):i(p,t)}}();
e=function(p,t,w){if(p){var B=f.browser.name;if(t==="float"||t==="cssFloat")t=B==="ie"?"styleFloat":"cssFloat";if(t==="opacity"&&B==="ie"&&f.browser.ie<9){p.style.filter='alpha(opacity="'+w*100+'")';if(!p.style.zoom)p.style.zoom=1}else p.style[t]=w}};q=function(p,t){if(p){var w=u(p),B=f.browser.name;if(t==="float"||t==="cssFloat")t=B==="ie"?"styleFloat":"cssFloat";if(t==="opacity"&&B==="ie"&&f.browser.ie<9){w=1;if((B=p.style.filter.match(/opacity=(\d+)/))&&B[1])w=B[1]/100;return w}if(p.style[t])return p.style[t];
else if(p.currentStyle)return p.currentStyle[t];else if(w.getComputedStyle)return w.getComputedStyle(p,null)[t];else if(document.defaultView&&document.defaultView.getComputedStyle){t=t.replace(/([/A-Z])/g,"-$1");t=t.toLowerCase();return(w=document.defaultView.getComputedStyle(p,""))&&w.getPropertyValue(t)}}};r=function(p,t){p.style.cssText=t};(function(){for(var p=document.createElement("a").style,t=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],w=t.length;w--;)if(t[w]in
p)return t[w]})();a=function(p){var t=0,w=0;if(p)if(document.documentElement.getBoundingClientRect&&p.getBoundingClientRect){w={left:0,top:0,right:0,bottom:0};try{w=p.getBoundingClientRect()}catch(B){return[0,0]}p=p.ownerDocument;var G=f.browser.ie?2:0;t=w.top-G+j(p);w=w.left-G+o(p)}else for(;p.offsetParent;){t+=p.offsetTop;w+=p.offsetLeft;p=p.offsetParent}return[w,t]};d=function(p){p=a(p);p[0]+=o();p[1]+=j();return p};m=function(p,t,w){var B=parseInt(q(p,"marginLeft"))||0,G=parseInt(q(p,"marginTop"))||
0;e(p,"left",parseInt(t)-B+"px");e(p,"top",parseInt(w)-G+"px")};for(var K=function(p){return!p||p=="auto"?0:parseInt(p.substr(0,p.length-2))},J=l("script"),z=0;z<J.length;z++)if(J[z].getAttribute("hasJx")=="true")f.src=J[z].src;if(!f.src)f.src=J[J.length-1].src;f.filename=f.src.replace(/(.*\/){0,}([^\\]+).*/ig,"$2");f.path=f.src.split(f.filename)[0];b.getDoc=n;b.id=function(p,t){return n(t).getElementById(p)};b.name=function(p,t){return n(t).getElementsByName(p)};b.tagName=l;b.getText=function(p){var t=
p?p[TEXT_CONTENT]:"";if(t===UNDEFINED&&INNER_TEXT in p)t=p[INNER_TEXT];return t||""};b.getAttributeByParent=function(p,t,w){var B=false;t=t;var G;do{G=t.getAttribute(p);if(f.isUndefined(G)||f.isNull(G))if(t===w)B=true;else t=t.parentNode;else B=true}while(!B);return G};b.node=function(p,t){var w,B=document.createElement(p),G={"class":function(){B.className=t["class"]},style:function(){r(B,t.style)}};for(w in t)G[w]?G[w]():B.setAttribute(w,t[w]);return B};b.setClass=function(p,t){p.className=t};b.getClass=
function(p){return p.className};b.hasClass=g;b.addClass=i;b.removeClass=c;b.toggleClass=h;b.replaceClass=function(p,t,w){c(p,t);i(p,w)};b.createStyleNode=function(p,t){var w=b.node("style",{id:t||"",type:"text/css"});b.getDocHead().appendChild(w);var B=typeof p;if(B=="string")if(w.styleSheet)w.styleSheet.cssText=p;else{B=document.createTextNode(p);w.appendChild(B)}else if(B=="object"){B=0;var G=document.styleSheets[document.styleSheets.length-1];for(selector in p)G.insertRule?G.insertRule(selector+
"{"+p[selector]+"}",B++):G.addRule(selector,p[selector],B++)}return w};b.setStyle=e;b.getStyle=q;b.setCssText=r;b.getCssText=function(p){return p.style.cssText};b.addCssText=function(p,t){p.style.cssText+=";"+t};b.show=function(p,t){var w;w=(w=p.getAttribute("_oldDisplay"))?w:q(p,"display");if(t)e(p,"display",t);else w==="none"?e(p,"display","block"):e(p,"display",w)};b.isShow=function(p){return q(p,"display")==="none"?false:true};b.recover=function(p){var t;t=(t=p.getAttribute("_oldDisplay"))?t:
q(p,"display");t==="none"?e(p,"display",""):e(p,"display",t)};b.hide=function(p){var t=q(p,"display");p.getAttribute("_oldDisplay")||(t==="none"?p.setAttribute("_oldDisplay",""):p.setAttribute("_oldDisplay",t));e(p,"display","none")};b.getScrollLeft=o;b.getScrollTop=j;b.getScrollHeight=function(p){return(p?p.scrollHeight:Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))||0};b.getScrollWidth=function(p){return(p?p.scrollWidth:Math.max(document.documentElement.scrollWidth,
document.body.scrollWidth))||0};b.getClientHeight=function(p){p=p||x();return p.clientHeight};b.getClientWidth=function(p){p=p||x();return p.clientWidth};b.getOffsetHeight=function(p){p=p||x();return p.offsetHeight};b.getOffsetWidth=function(p){p=p||x();return p.offsetWidth};b.getClientXY=a;b.setClientXY=function(p,t,w){t=parseInt(t)+o();w=parseInt(w)+j();m(p,t,w)};b.getXY=d;b.setXY=m;b.getRelativeXY=function(p,t){var w=d(p),B=d(t),G=[];G[0]=w[0]-B[0];G[1]=w[1]-B[1];return G};b.getPosX=function(p){return K(b.getStyle(p,
"left"))};b.getPosY=function(p){return K(b.getStyle(p,"top"))};b.getWidth=function(p){return K(b.getStyle(p,"width"))};b.getHeight=function(p){return K(b.getStyle(p,"height"))};b.getSelection=void 0;b.getSelectionText=function(p){p=p||window;var t=p.document;if(p.getSelection)return p.getSelection().toString();else if(t.getSelection)return t.getSelection();else if(t.selection)return t.selection.createRange().text};b.getTextFieldSelection=function(p){return p.selectionStart!=undefined&&p.selectionEnd!=
undefined?p.value.substring(p.selectionStart,p.selectionEnd):""};b.getDocumentElement=x;b.getDocHead=function(){if(!E){var p=n();E=p.getElementsByTagName("head")?p.getElementsByTagName("head")[0]:p.documentElement}return E};b.contains=function(p,t,w){if(!w&&p===t)return false;if(p.compareDocumentPosition){p=p.compareDocumentPosition(t);if(p==20||p==0)return true}else if(p.contains(t))return true;return false};b.getHref=function(p){return(k.ie&&k.ie<=7?p.getAttribute("href",4):p.href)||null}});
Jx().$package(function(f){var b,k,l,g,i,c,h=[],e,q,r,o,j;f.event=f.event||{};b=f.event;j=function(a,d){if(!a)a=window.event;d=d||a.srcElement;var m=document,n=m.documentElement;m=m.body;n={_event:a,type:a.type,target:a.srcElement,currentTarget:d,relatedTarget:a.fromElement?a.fromElement:a.toElement,eventPhase:a.srcElement==d?2:3,clientX:a.clientX,clientY:a.clientY,screenX:a.screenX,screenY:a.screenY,layerX:a.offsetX,layerY:a.offsetY,pageX:a.clientX+(n&&n.scrollLeft||m&&m.scrollLeft||0)-(n&&n.clientLeft||
m&&m.clientLeft||0),pageY:a.clientY+(n&&n.scrollTop||m&&m.scrollTop||0)-(n&&n.clientTop||m&&m.clientTop||0),wheelDelta:a.wheelDelta,altKey:a.altKey,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,charCode:a.keyCode,keyCode:a.keyCode,stopPropagation:function(){this._event.cancelBubble=true},preventDefault:function(){this._event.returnValue=false}};m=a.type.toLowerCase();if(m=="mouseover")n.relatedTarget=a.fromElement;else if(m=="mouseout")n.relatedTarget=a.toElement;if(!f.isUndefined(a.button)){m=a.button;var s=
{0:-1,1:0,2:2,3:-1,4:1};n.button=f.isUndefined(s[m])?m:s[m]}return n};if(document.addEventListener){k=function(a,d,m,n){c["on"+d]?c["on"+d](a,d,m,n):l(a,d,m)};l=function(a,d,m){var n=false;a||f.out("targetModel undefined:"+d+m);if(!a._eventTypes)a._eventTypes={};a._eventTypes[d]||(a._eventTypes[d]=[]);a.addEventListener(d,m,false);a=a._eventTypes[d];for(d=0;d<a.length;d++)if(a[d]==m){n=true;break}n||a.push(m)};g=function(a,d,m){if(c["off"+d])c["off"+d](a,d,m);else arguments.length==3?i(a,d,m):i(a,
d)};i=function(a,d,m){if(d)if(arguments.length==3){if(m){a.removeEventListener(d,m,false);if(a._eventTypes&&a._eventTypes[d])for(var n=a._eventTypes[d],s=0;s<n.length;s++)if(n[s]===m){n[s]=null;n.splice(s,1);break}}}else{if(a._eventTypes&&a._eventTypes[d]){n=a._eventTypes[d];for(s=0;s<n.length;s++)a.removeEventListener(d,n[s],false);a._eventTypes[d]=[]}}else if(a._eventTypes){var u=a._eventTypes,x;for(x in u){n=a._eventTypes[x];for(s=0;s<n.length;s++)a.removeEventListener(x,n[s],false)}}}}else if(document.attachEvent){k=
function(a,d,m,n){c["on"+d]?c["on"+d](a,d,m,n):l(a,d,m)};l=function(a,d,m){if(b._find(arguments)==-1){var n=function(x){x=j(x,a);if(Function.prototype.call)m.call(a,x);else{a._currentHandler=m;a._currentHandler(x);a._currentHandler=null}};a.attachEvent("on"+d,n);n={element:a,eventType:d,handler:m,wrappedEvent:n};var s=(a.document||a).parentWindow||window,u=b._uid();if(!s._allHandlers)s._allHandlers={};s._allHandlers[u]=n;if(!a._handlers)a._handlers=[];a._handlers.push(u);if(!s._onunloadEventRegistered){s._onunloadEventRegistered=
true;s.attachEvent("onunload",b._removeAllEvents)}}};g=function(a,d,m){if(c["off"+d])c["off"+d](a,d,m);else arguments.length==3?i(a,d,m):i(a,d)};i=function(a){var d=b._find(arguments);if(d!=-1){for(var m=(a.document||a).parentWindow||window,n=0;n<d.length;n++){var s=d[n],u=a._handlers[s],x=m._allHandlers[u];a.detachEvent("on"+x.eventType,x.wrappedEvent);a._handlers[s]=null;a._handlers.splice(s,1);delete m._allHandlers[u]}if(a._handlers&&a._handlers.length==0)a._handlers=null}};b._find=function(a){var d=
a[0],m=a[1],n=a[2],s=d._handlers;if(!s)return-1;d=(d.document||d).parentWindow||window;var u=[];if(a.length===3)for(a=s.length-1;a>=0;a--){var x=s[a];x=d._allHandlers[x];if(x.eventType==m&&x.handler==n){u.push(a);return u}}else if(a.length===2){for(a=s.length-1;a>=0;a--){x=s[a];x=d._allHandlers[x];x.eventType==m&&u.push(a)}if(u.length>0)return u}else if(a.length===1){for(a=s.length-1;a>=0;a--)u.push(a);if(u.length>0)return u}return-1};b._removeAllEvents=function(){for(var a in this._allHandlers){var d=
this._allHandlers[a];d.element.detachEvent("on"+d.eventType,d.wrappedEvent);d.element._handlers=null;delete this._allHandlers[a]}};b._counter=0;b._uid=function(){return"h"+b._counter++}}c={ondrag:function(a,d,m){var n,s,u=false,x=function(D){if(!(!f.browser.mobileSafari&&D.button!==0)){if(f.browser.mobileSafari){D.stopPropagation();D=D.touches[0];n=D.pageX;s=D.pageY}else{D.stopPropagation();D.preventDefault();n=D.clientX;s=D.clientY}u=false;if(f.browser.mobileSafari){b.addEventListener(document,"touchmove",
v);b.addEventListener(a,"touchend",E)}else b.addEventListener(document,"mousemove",v)}},v=function(D){if(!(!f.browser.mobileSafari&&D.button!==0)){var K,J;D.stopPropagation();if(f.browser.mobileSafari){J=D.changedTouches[0];K=J.pageX;J=J.pageY}else{K=D.clientX;J=D.clientY}if(Math.abs(n-K)+Math.abs(s-J)>2){if(f.browser.mobileSafari){b.removeEventListener(document,"touchmove",v);b.removeEventListener(a,"touchend",E)}else b.removeEventListener(document,"mousemove",v);if(!u){m.call(a,D);u=true}}}},E=
function(D){if(!(!f.browser.mobileSafari&&D.button!==0))if(f.browser.mobileSafari){b.removeEventListener(document,"touchmove",v);if(u){D.stopPropagation();D.preventDefault()}}else b.removeEventListener(document,"mousemove",v)};if(f.browser.mobileSafari)b.addEventListener(a,"touchstart",x);else{b.addEventListener(a,"mousedown",x);b.addEventListener(a,"mouseup",E)}h.push({element:a,eventType:d,handler:m,actions:[x,E]})},offdrag:function(a,d,m){for(var n in h)if(h[n].handler==m&&h[n].element==a&&h[n].eventType==
d){if(f.browser.mobileSafari){b.removeEventListener(a,"touchstart",h[n].actions[0]);b.removeEventListener(a,"touchend",h[n].actions[1])}else{b.removeEventListener(a,"mousedown",h[n].actions[0]);b.removeEventListener(a,"mouseup",h[n].actions[1])}h.splice(n,1);break}},oncustomclick:function(a,d,m,n){var s,u,x=false,v=false,E;n=n?n:{};var D=n.longtouchable,K=-1;n=function(t){x=false;if(!(!f.browser.mobileSafari&&t.button!==0)){var w;if(f.browser.mobileSafari){w=t.changedTouches[0];s=w.pageX;u=w.pageY}else{s=
t.clientX;u=t.clientY}v=false;if(D)E=setTimeout(function(){if(!(x||v)){if(f.browser.mobileSafari){b.removeEventListener(a,"touchmove",z);b.removeOriginalEventListener(a,"touchend",p)}else{b.removeEventListener(a,"mousemove",z);b.removeOriginalEventListener(a,"click",p)}m.call(a,t,2E3)}},1E3);if(f.browser.mobileSafari){b.addEventListener(a,"touchmove",z);b.addOriginalEventListener(a,"touchend",p)}else{b.addEventListener(a,"mousemove",z);b.addOriginalEventListener(a,"click",p)}}};var J=function(t){K=
t.button;if(!(!f.browser.mobileSafari&&t.button!==0))if(f.browser.mobileSafari)touch=t.changedTouches[0]},z=function(t){if(f.browser.mobileSafari){touch=t.changedTouches[0];var w=touch.pageX;t=touch.pageY}else{w=t.clientX;t=t.clientY}if(x=Math.abs(s-w)+Math.abs(u-t)>1){clearTimeout(E);E=null;if(f.browser.mobileSafari){b.removeEventListener(a,"touchmove",z);b.removeOriginalEventListener(a,"touchend",p)}else{b.removeEventListener(a,"mousemove",z);b.removeOriginalEventListener(a,"click",p)}}},p=function(t){clearTimeout(E);
E=null;v=true;if(!(!f.browser.mobileSafari&&K!==0)){var w;if(f.browser.mobileSafari){w=t.changedTouches[0];var B=w.pageX;w=w.pageY}else{B=t.clientX;w=t.clientY}if(Math.abs(s-B)+Math.abs(u-w)<1){x=false;m.call(a,t,0)}}};if(f.browser.mobileSafari)b.addEventListener(a,"touchstart",n);else{b.addEventListener(a,"mousedown",n);b.addEventListener(a,"mouseup",J)}h.push({element:a,eventType:d,handler:m,actions:[n,z,J,p]})},offcustomclick:function(a,d,m){for(var n in h)if(h[n].handler==m&&h[n].element==a&&
h[n].eventType==d){if(f.browser.mobileSafari){b.removeEventListener(a,"touchstart",h[n].actions[0]);b.removeEventListener(a,"touchmove",h[n].actions[1]);b.removeOriginalEventListener(a,"touchend",h[n].actions[3])}else{b.removeEventListener(a,"mousedown",h[n].actions[0]);b.removeEventListener(a,"mousemove",h[n].actions[1]);b.removeEventListener(a,"mouseup",h[n].actions[2]);b.removeOriginalEventListener(a,"click",h[n].actions[3])}h.splice(n,1);break}},oncontextmenu:function(a,d,m){if(f.browser.ie==
9){var n=function(s){s=j(s,a);m.call(a,s)};a.attachEvent("oncontextmenu",n);h.push({element:a,eventType:d,handler:m,actions:[n]})}else b.addOriginalEventListener(a,d,m)},offcontextmenu:function(a,d,m){if(f.browser.ie==9)for(var n in h){if(h[n].handler==m&&h[n].element==a&&h[n].eventType==d){a.detachEvent("oncontextmenu",h[n].actions[0]);h.splice(n,1);break}}else b.removeOriginalEventListener(a,d,m)},onmousewheel:function(a,d,m){if(f.browser.firefox){var n=function(s){s.wheelDelta=-40*s.detail;m.call(a,
s)};b.addOriginalEventListener(a,"DOMMouseScroll",n);h.push({element:a,eventType:d,handler:m,actions:[n]})}else b.addOriginalEventListener(a,"mousewheel",m)},offmousewheel:function(a,d,m){if(f.browser.firefox)for(var n in h){if(h[n].handler==m&&h[n].element==a&&h[n].eventType==d){b.removeOriginalEventListener(a,"DOMMouseScroll",h[n].actions[0]);h.splice(n,1);break}}else b.removeOriginalEventListener(a,"mousewheel",m)},onmouseenter:function(a,d,m){var n=function(s){var u=s.relatedTarget;if(u)if(this.compareDocumentPosition){var x=
this.compareDocumentPosition(u);u==this||x==20||x==0||m.call(this,s)}else u==this||this.contains(u)||m.call(this,s);else m.call(this,s)};b.addEventListener(a,"mouseover",n);h.push({element:a,eventType:d,handler:m,actions:[n]})},offmouseenter:function(a,d,m){for(var n in h)if(h[n].handler==m&&h[n].element==a&&h[n].eventType==d){b.removeEventListener(a,"mouseover",h[n].actions[0]);h.splice(n,1);break}},onmouseleave:function(a,d,m){var n=function(s){var u=s.relatedTarget;if(u)if(this.compareDocumentPosition){u=
this.compareDocumentPosition(u);u==20||u==0||m.call(this,s)}else this.contains(u)||m.call(this,s);else m.call(this,s)};b.addEventListener(a,"mouseout",n);h.push({element:a,eventType:d,handler:m,actions:[n]})},offmouseleave:function(a,d,m){for(var n in h)if(h[n].handler==m&&h[n].element==a&&h[n].eventType==d){b.removeEventListener(a,"mouseout",h[n].actions[0]);h.splice(n,1);break}},oninput:function(a,d,m){if(f.browser.ie){var n=function(s){if(s.propertyName.toLowerCase()=="value"){s=j(s,a);m.call(a,
s)}};a.attachEvent("onpropertychange",n);h.push({element:a,eventType:d,handler:m,actions:[n]});f.browser.ie==9&&b.addOriginalEventListener(a,"change",m)}else b.addOriginalEventListener(a,"input",m)},offinput:function(a,d,m){if(f.browser.ie){for(var n in h)if(h[n].handler==m&&h[n].element==a&&h[n].eventType==d){a.detachEvent("onpropertychange",h[n].actions[0]);h.splice(n,1);break}f.browser.ie==9&&b.removeOriginalEventListener(a,"change",m)}else b.removeOriginalEventListener(a,"input",m)}};e=function(a){if(e.done)return a();
if(e.timer)e.ready.push(a);else{e.ready=[a];b.on(window,"load",q);e.timer=window.setInterval(q,300)}};q=function(){if(e.done)return true;if(document&&document.getElementsByTagName&&document.getElementById&&document.body){e.done=true;window.clearInterval(e.timer);e.timer=null;for(var a=0;a<e.ready.length;a++)e.ready[a]();e.ready=null;return true}};r=function(){this.subscribers=[]};r.prototype.subscribe=function(a){f.array.some(this.subscribers,function(d){return d===a})||this.subscribers.push(a);return a};
r.prototype.deliver=function(a){f.array.forEach(this.subscribers,function(d){d(a)})};r.prototype.unsubscribe=function(a){this.subscribers=f.array.filter(this.subscribers,function(d){return d!==a});return a};o=function(a,d,m){var n,s;if(m){d="on"+d;if(!a._$events)a._$events={};if(a._$events[d]){if(a._$events[d].length==0)a._$events[d]=[]}else a._$events[d]=[];a=a._$events[d];d=a.length;n=-1;for(s=0;s<d;s++)if(a[s]==m){n=s;break}n===-1&&a.push(m)}else f.out(">>> \u6dfb\u52a0\u7684\u89c2\u5bdf\u8005\u65b9\u6cd5\u4e0d\u5b58\u5728\uff1a"+
a+d+m)};b.addEventListener=k;b.removeEventListener=g;b.addOriginalEventListener=l;b.removeOriginalEventListener=i;b.on=b.addEventListener;b.off=b.removeEventListener;b.onDomReady=e;b.Publish=r;b.addObserver=o;b.addObservers=function(a){var d=a.targetModel;a=a.eventMapping;for(var m in a)o(d,m,a[m])};b.notifyObservers=function(a,d,m){var n;d="on"+d;var s=true;if(a._$events&&a._$events[d]){d=a._$events[d];if(d.length>0)for(n=0;n<d.length;n++)if(d[n].apply(a,[m])===false)s=false}return s};b.removeObserver=
function(a,d,m){var n,s=false,u,x=a._$events;if(m){if(x){d="on"+d;if(a=x[d]){u=a.length;for(n=0;n<u;n++)if(a[n]==m){a[n]=null;a.splice(n,1);s=true;break}}}}else if(d){if(x){d="on"+d;if(a=x[d]){u=a.length;for(n=0;n<u;n++)a[n]=null;delete x[d];s=true}}}else if(a)if(x){for(n in x)delete x[n];delete a._$events;s=true}return s}});
Jx().$package(function(f){f.string=f.string||{};var b=f.string,k,l,g,i,c,h,e,q,r,o;k=function(){function j(z){s="var ";u={};u[n]=1;z=z.split(d);for(var p="",t=0,w=z.length;t<w;t++){var B=z[t].split(m);if(B.length==1)p+=a(B[0]);else{p=p;var G=B[0];if(/^=/.test(G))G=x[1]+G.substring(1).replace(/[\s;]*$/,"")+x[2];var M=G;M=M.replace(/\/\*.*?\*\/|'[^']*'|"[^"]*"|\.[\$\w]+/g,"");M=M.split(/[^\$\w\d]+/);for(var O=0,S=M.length;O<S;O++){var R=M[O];if(!(!R||E[R]||/^\d/.test(R)))if(!u[R]){s+=R==="print"?x[4]:
R+'=$data.hasOwnProperty("'+R+'")?$data.'+R+":window."+R+",";u[R]=1}}p=p+(G+"\n");p+=B[1]?a(B[1]):""}}return new Function("$data",s+x[0]+p+"return "+x[3])}function a(z){z=z.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");z=x[1]+'"'+z+'"'+x[2];return z+"\n"}for(var d="<%",m="%>",n="$return",s="var ",u,x="".trim?[n+' = "";',n+" +=",";",n+";","print=function(){"+n+'+=[].join.call(arguments,"")},']:[n+" = [];",n+".push(",")",n+'.join("");',"print=function(){"+n+".push.apply(arguments)},"],
v="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield".split(","),E={},D=0,K=v.length;D<K;D++)E[v[D]]=1;var J={};return function(z,p){var t=!/\W/.test(z)?
J[z]||(J[z]=j(document.getElementById(z).innerHTML)):j(z);return p?t(p):t}}();l=function(j){return l.RE.test(j)};l.RE=/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i;g=function(j){var a=null;if(null!==(a=g.RE.exec(j))){j={};for(var d=0,m=g.SPEC.length;d<m;d++)j[g.SPEC[d]]=a[d+1];a=j}return a};g.SPEC=["scheme","user","pass","host","port","path","query","fragment"];g.RE=/^([^:]+):\/\/(?:([^:@]+):?([^@]*)@)?(?:([^/?#:]+):?(\d*))([^?#]*)(?:\?([^#]+))?(?:#(.+))?$/;i=function(j){return String(j).replace(/^\s+|\s+$/g,
"")};c=function(j,a){return encodeURIComponent(String(j))+"="+encodeURIComponent(String(a))};h=function(j,a){a=a||2;return j.replace(/[^\x00-\xff]/g,{2:"aa",3:"aaa"}[a]).length};e=function(j,a){return j.substring(0,j.length-a)};q=function(j){return j.replace(/[&'"<>\/\\\-\x00-\x09\x0b-\x0c\x1f\x80-\xff]/g,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/ /g,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")};r=function(j){return escape(j).replace(/\+/g,"%2B")};
o=function(j,a){var d=document.createElement("div");d.style.visibility="hidden";d.style.width="auto";if(a)d.style.fontSize=a+"px";d.style.position="absolute";d.innerHTML=f.string.encodeHtmlSimple(j);document.body.appendChild(d);var m=d.offsetWidth;document.body.removeChild(d);return m};b.cutByWidth=function(j,a,d){for(var m=j.length;m>=0;--m){j=j.substring(0,m);if(o(j,a)<d)return j}return""};b.toString=function(j){return j+""};b.template=k;b.isURL=l;b.parseURL=g;b.buildURL=function(j){for(var a="",
d={},m={},n=0,s=g.SPEC.length;n<s;n++){var u=g.SPEC[n];if(j[u]){switch(u){case "scheme":m[u]="://";break;case "pass":d[u]=":";case "user":d.host="@";break;case "port":d[u]=":";break;case "query":d[u]="?";break;case "fragment":d[u]="#"}if(u in d)a+=d[u];if(u in j)a+=j[u];if(u in m)a+=m[u]}}return a};b.mapQuery=function(j){var a,d;j=j&&j.split("#")[0]||window.location.search;var m=j.indexOf("?"),n=j.substring(m+1).split("&"),s={};if(m===-1)return s;for(j=0;j<n.length;j++)try{m=n[j].indexOf("=");a=n[j].substring(0,
m);d=n[j].substring(m+1);if(!(s[a]=unescape(d)))throw Error("uri has wrong query string when run mapQuery.");}catch(u){}return s};b.test=function(j,a,d){return(typeof a=="string"?RegExp(a,d):a).test(j)};b.contains=function(j,a,d){return d?(d+j+d).indexOf(d+a+d)>-1:j.indexOf(a)>-1};b.trim=i;b.clean=function(j){return i(j.replace(/\s+/g," "))};b.camelCase=function(j){return j.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})};b.hyphenate=function(j){return j.replace(/[A-Z]/g,function(a){return"-"+
a.charAt(0).toLowerCase()})};b.capitalize=function(j){return j.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})};b.escapeRegExp=function(j){return j.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")};b.toInt=function(j,a){return parseInt(j,a||10)};b.toFloat=function(j){return parseFloat(j)};b.toSingleLine=function(j){return String(j).replace(/\r/gi,"").replace(/\n/gi,"")};b.toHtml=function(j){return String(j).replace(/&/gi,"&amp;").replace(/\\/gi,"&#92;").replace(/\'/gi,"&#39;").replace(/\"/gi,"&quot;").replace(/</gi,
"&lt;").replace(/>/gi,"&gt;").replace(/ /gi,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n\r/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")};b.toTitle=function(j){return String(j).replace(/\\/gi,"\\").replace(/\'/gi,"'").replace(/\"/gi,"'")};b.toQueryPair=c;b.toQueryString=function(j){var a=[],d;for(d in j)a.push(c(d,j[d]));return a.join("&")};b.hexToRgb=function(j,a){var d=j.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return d?d.slice(1).hexToRgb(a):null};b.rgbToHex=function(j,a){var d=
j.match(/\d{1,3}/g);return d?d.rgbToHex(a):null};b.stripScripts=function(j,a){var d="",m=j.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(n,s){d+=s+"\n";return""});if(a===true)$exec(d);else $type(a)=="function"&&a(d,m);return m};b.substitute=function(j,a,d){return j.replace(d||/\\?\{([^{}]+)\}/g,function(m,n){if(m.charAt(0)=="\\")return m.slice(1);return a[n]!=undefined?a[n]:""})};b.replaceAll=function(j,a,d,m){return RegExp.prototype.isPrototypeOf(a)?j.replace(a,d):j.replace(RegExp(a,m?"gi":
"g"),d)};b.byteLength=h;b.cutRight=e;b.isNumber=function(j){return j.search(/^\d+$/)!==-1?true:false};b.isEmail=function(j){return j.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)!==-1?true:false};b.cutByBytes=function(j,a){for(var d=j;h(d)>a;)d=e(d,1);return d};b.encodeHtmlSimple=function(j){j=j.replace(/&/g,"&amp;");j=j.replace(/>/g,"&gt;");j=j.replace(/</g,"&lt;");j=j.replace(/"/g,"&quot;");return j=j.replace(/'/g,"&#39;")};b.decodeHtmlSimple=function(j){j=j.replace(/&amp;/g,
"&");j=j.replace(/&gt;/g,">");j=j.replace(/&lt;/g,"<");j=j.replace(/&quot;/g,'"');return j=j.replace(/&#39;/g,"'")};b.decodeHtmlSimple2=function(j){j=j.replace(/&amp;/g,"&");j=j.replace(/&gt;/g,">");j=j.replace(/&lt;/g,"<");j=j.replace(/\\\\"/g,'"');return j=j.replace(/\\\\'/g,"'")};b.encodeHtmlAttributeSimple=function(j){j=j.replace(/&/g,"&amp;");j=j.replace(/>/g,"&gt;");j=j.replace(/</g,"&lt;");j=j.replace(/"/g,"&quot;");j=j.replace(/'/g,"&#39;");j=j.replace(/=/g,"&#61;");return j=j.replace(/`/g,
"&#96;")};b.encodeHtmlAttribute=function(j){return j.replace(/[&'"<>\/\\\-\x00-\x1f\x80-\xff]/g,function(a){return"&#"+a.charCodeAt(0)+";"})};b.encodeHtml=q;b.encodeScript=function(j){j+="";return j.replace(/[\\"']/g,function(a){return"\\"+a}).replace(/%/g,"\\x25").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\x01/g,"\\x01")};b.encodeHrefScript=function(j){return q(r(escScript(j)))};b.encodeRegExp=function(j){return j.replace(/[\\\^\$\*\+\?\{\}\.\(\)\[\]]/g,function(a){return"\\"+a})};b.encodeUrl=
r;b.encodeUriComponent=function(j){j=encodeURIComponent(j);j=j.replace(/~/g,"%7E");j=j.replace(/!/g,"%21");j=j.replace(/\*/g,"%2A");j=j.replace(/\(/g,"%28");j=j.replace(/\)/g,"%29");j=j.replace(/'/g,"%27");j=j.replace(/\?/g,"%3F");return j=j.replace(/;/g,"%3B")};b.vaildTencentUrl=function(j){return/^(https?:\/\/)?[\w\-.]+\.(qq|paipai|soso|taotao)\.com($|\/|\\)/i.test(j)||/^[\w][\w\/\.\-_%]+$/i.test(j)||/^[\/\\][^\/\\]/i.test(j)?true:false};b.vaildUrl=function(j){j=encodeURI(j).replace(/(^\s*)|(\s*$)/g,
"");var a=/(^[a-zA-Z0-9]+[^.]):/,d=/^[\S.]+\.[\S.]+$/,m=/[\w.]+\/(\S*)/,n=/^[\s*]*javascript[\s*]*:/;if(!a.test(j)&&!d.test(j))j="";else{a.test(j)||(j="http://"+j);m.test(j)||(j+="/");if(n.test(j))j=""}return j};b.getCharWidth=o});
Jx().$package(function(f){var b=f.dom.id,k=f.dom,l=f.event,g=f.string,i=this,c=f.string.mapQuery(window.location.search),h=new f.Class({_defaultType:3,_defaultTag:"information",_defaultTemplate:"<%=msg%>(<%=type%>#<%=tag%>@<%=time%>)",TYPE:["PROFILE","WARNING","ERROR","INFO","DEBUG"],init:function(e){this.msg=e.msg||"";this.tag=e.tag||this._defaultTag;this.type=f.isUndefined(e.type)?this._defaultType:e.type;this.time=(new Date).valueOf();this._template=e.template||this._defaultTemplate},format:function(e,
q,r){r=r||this._template;return q?g.encodeHtml(g.template(r,e)):g.template(r,e)},parseOption:function(){return{msg:this.msg,time:this.time,type:this.TYPE[this.type],tag:this.tag}},toString:function(e,q){return this.format(this.parseOption(),e,q||this._template)}});f.config={debugLevel:1};f.console={};f.Report={receive:f.emptyFunc,addRule:f.emptyFunc};f.extend(f.console,{_isCreated:false,_maxLength:1E3,_html:'<div id="ConsoleBoxHead" class="consoleBoxHead">                        <a href="###" id="ConsoleCloseButton" class="consoleCloseButton" title="\u5173\u95ed">X</a>                        <a href="###" id="ConsoleClearButton" class="consoleCloseButton" title="\u6e05\u9664\u6240\u6709\u65e5\u5fd7">C</a>                        <a href="###" id="ConsoleRefreshButton" class="consoleCloseButton" title="\u8fd8\u539f\u6240\u6709\u65e5\u5fd7">R</a>                        <a href="###" id="ConsoleHelpButton" class="consoleCloseButton" title="\u63a7\u5236\u53f0\u5e2e\u52a9">H</a>                        <h5 class="title" title="\u63a7\u5236\u53f0">Console</h5>                    </div>                    <div id="consoleMain" class="consoleMain">                        <ul id="ConsoleOutput" class="consoleOutput"></ul>                    </div>                    <div class="consoleInputBox">                        &gt;<input id="ConsoleInput" class="consoleInput" title="\u8bf7\u8f93\u5165\u63a7\u5236\u53f0\u6307\u4ee4\u6216\u8005Javascript\u8bed\u53e5..." />                    </div>',
_cssText:'                        html{                            _background:url(about:blank);                        }                                                .consoleBox{                            display:none;                            position:fixed;                            _position: absolute;                            _top:expression(documentElement.scrollTop+documentElement.clientHeight-this.offsetHeight);                            _left:expression(documentElement.scrollLeft+documentElement.clientWidth-this.offsetWidth-200);                            right: 200px;                            bottom: 30px;                            z-index: 10000000;                            border: 2px solid #bbb;                            padding: 5px;                            width: 300px;                            height:310px;                            background: #000;                            box-shadow: 1px 1px 20px rgba(0, 0, 0, 0.75);                            filter: Alpha(opacity:75);                            font-family: "Courier New", Consolas, "LucidaConsole", Monaco, monospace;                            font-size: 12px;                            color: #fff;                        }                                                html.webkit .consoleBox{                            background: rgba(0,0,0,0.75);                        }                                                .consoleBoxHead{                            height:20px;                            background: rgba(255,255,255,0.15);                            overflow:hidden;                            cursor:default;                            padding: 2px;                        }                                                .consoleBoxHead .title{                            margin:0;                            padding: 0 0 0 3px;                            height:20px;                            line-height:20px;                            font-family: Verdana;                        }                                                .consoleBoxHead .consoleCloseButton{                            float:right;                            border:0px solid #000;                            width:20px;                            height:18px;                            line-height:16px;                            background: white;                            margin:1px 1px;                            padding:0px;                            color:#666;                            font-family: Verdana;                            font-weight:bold;                            cursor:pointer;                            border-radius:3px;                            -moz-border-radius:3px;                            -webkit-border-radius:3px;                            text-align:center;                            text-decoration:none;                        }                                                .consoleBoxHead .consoleCloseButton:hover{                            background: orange;                            color:white;                            text-decoration:none;                        }                                                #ConsoleCloseButton:hover{                            background: red;                        }                                                #ConsoleClearButton:hover{                            background: blue;                        }                                                #ConsoleRefreshButton:hover{                            background: green;                        }                                                .consoleMain{                            position:relative;                            top:2px;                            bottom:0px;                            width:100%;                            height:255px;                            overflow:auto;                        }                        html.mobileSafari .consoleMain{                            overflow:hidden;                        }                                                ul.consoleOutput{                            display:block;                            margin:0;                            padding:0;                            width:100%;                            list-style:none;                        }                                                ul.consoleOutput li{                            list-style:none;                            padding:3px;                            border-bottom:1px solid #333333;                            word-break: break-all;                            word-wrap: break-word;                            overflow: hidden;                            zoom: 1;                        }                                                .consoleOutput .log_icon{                            width:13px;                            height:13px;                            background:#fff;                            overflow:hidden;                            float:left;                            margin-top:2px;                            font-weight:bold;                            text-align:center;                            font-size:12px;                            color:#8B8B8B;                            line-height:135%;                            cursor:default;                            border-radius:3px;                            -moz-border-radius:3px;                            -webkit-border-radius:3px;                        }                                                .consoleOutput .log_text{                            margin: 0px 0px 0px 20px;                            line-height:150%;                            zoom: 1;                        }                                                .log_error_type{}                                                .log_error_type .log_icon{                            background:#FF0000;                            color:#660000;                        }                                                .log_error_type .log_text{                            color:#FF0000;                        }                                                .log_warning_type{}                                                .log_warning_type .log_icon{                            background:#FFFF00;                            color:#8C7E00;                        }                                                .log_warning_type .log_text{                            color:#FFFF00;                        }                                                .log_debug_type{}                                                .log_debug_type .log_icon{                            background:#33CC00;                            color:#006600;                        }                                                .log_debug_type .log_text{                            color:#33cc00;                        }                                                .log_info_type{}                                                .log_info_type .log_icon{                            background:#0066FF;                            color:#000066                        }                                                .log_info_type .log_text{                            color:#0066FF;                        }                                                .log_profile_type{}                                                .log_profile_type .log_icon{                        }                                                .log_profile_type .log_text{                            color:white;                        }                                                #JxConsole .consoleInputBox{                            font-family: Verdana;                            font-size:12px;                            margin:5px 0;                            padding:2px 0;                            border-top:1px solid #aaa;                            width:100%;                            color:#CCFF00;                        }                                                #JxConsole  input.consoleInput{                            border:0px solid #666;                            background:transparent;                            color:#CCFF00;                            font-family: "Courier New", Consolas, "LucidaConsole", Monaco, monospace;                            font-size:12px;                            width:285px;                            height:25px;                            margin-left:3px;                            outline:none;                        }                         ',
_opened:false,_log_record:[],_cmd_history:[],_cmd_last_index:0,isCustomConsole:true,_templateArr:["<%=msg%>","<%=msg%>(<%=type%>#<%=tag%>@<%=time%>)"],_templateType:0,_typeInfo:[["log_profile_type","\u2514"],["log_warning_type","!"],["log_error_type","x"],["log_info_type","i"],["log_debug_type","\u221a"]],TYPE:{PROFILE:0,WARNING:1,ERROR:2,INFO:3,DEBUG:4},show:function(){this._isCreated||this._create();this._opened=true;this._main.style.display="block";this.render();window.setTimeout(f.bind(this.focusCommandLine,
this),0)},hide:function(e){e&&e.preventDefault();this.clear();f.console._main.style.display="none";f.console._opened=false},enable:function(){f.option.console=true;this.show()},disable:function(){f.option.console=false;this.hide()},_init:function(){l.on(document,"keydown",f.bind(this.handleDocumentKeydown,this));f.option.console&&this.show();this.setToDebug()},_create:function(){k.createStyleNode(this._cssText);this._main=document.createElement("div");this._main.id="JxConsole";this._main.style.display=
"none";this._main.className="consoleBox";this._main.innerHTML=this._html;window.document.body.appendChild(this._main);var e=k.getClientWidth(),q=k.getClientHeight();e=e-210-300;k.setStyle(this._main,"top",q-50-310+"px");k.setStyle(this._main,"left",e+"px");this._headEl=b("ConsoleBoxHead");this._inputEl=b("ConsoleInput");this._closeButtonEl=b("ConsoleCloseButton");this._clsButtonEl=b("ConsoleClearButton");this._refreshButtonEl=b("ConsoleRefreshButton");this._helpButtonEl=b("ConsoleHelpButton");this._outputEl=
b("ConsoleOutput");this._consoleMainEl=b("consoleMain");f.ui&&f.ui.Drag&&new f.ui.Drag(this._headEl,this._main);l.on(this._inputEl,"keyup",f.bind(this.onInputKeyup,this));l.on(this._clsButtonEl,"click",f.bind(this.clear,this));l.on(this._refreshButtonEl,"click",f.bind(this.refresh,this));l.on(this._helpButtonEl,"click",f.bind(this.help,this));l.on(this._closeButtonEl,"click",f.bind(this.hide,this));q={hScrollbar:true,vScrollbar:true,checkDOMChanges:false,desktopCompatibility:true};if(f.browser.mobileSafari)if(f.ui&&
f.ui.iScroll&&!this.consoleScroller){this.consoleScroller=new f.ui.iScroll(this._outputEl,q);f.debug("!!!!2","console")}this._isCreated=true},handleDocumentKeydown:function(e){switch(e.keyCode){case 192:if(e.ctrlKey&&e.shiftKey){this.toggleShow();e.preventDefault()}}},focusCommandLine:function(){this._inputEl.focus()},toggleShow:function(){this._opened?this.hide():this.show()},outConsoleShow:function(e,q){this.outConsole(e,q);!this._opened&&f.option.console&&this.show()},outConsole:function(e){if(this._opened){var q=
document.createElement("li");this._outputEl.appendChild(q);var r=f.console._typeInfo[e.type]||f.console._typeInfo[0],o=this._templateArr[this._templateType];q.className=r[0];q.innerHTML='<div class="log_icon" title="'+r[0]+'">'+r[1]+'</div><div class="log_text">'+e.toString(true,o)+"</div>";this.consoleScroller&&this.consoleScroller.refresh();this._consoleMainEl.scrollTop=this._consoleMainEl.scrollHeight}},print:function(e){var q=document.createElement("li");this._outputEl.appendChild(q);q.innerHTML=
e;this._consoleMainEl.scrollTop=this._consoleMainEl.scrollHeight},out:function(e,q,r){var o=this._templateArr[this._templateType];e=new h({msg:e,tag:q,type:r});this.logRecord(e);if(c&&c.consolefilter){if(e.tag==c.consolefilter)this.isCustomConsole?this.outConsole(e):i.console.log(e.toString(false,o))}else this.isCustomConsole?this.outConsole(e):i.console.log(e.toString(false,o))},profile:function(e,q){q=q||"system";this.out(e,q,0)},warn:function(e,q){this.out(e,q,1)},error:function(e,q){this.out(e,
q,2)},info:function(e,q){this.out(e,q,3)},debug:function(e,q){this.out(e,q,4)},setToDebug:function(){this.isCustomConsole=c.console&&c.console=="firebug"?false:true},setToNoDebug:function(){this.out=f.emptyFunc},logRecord:function(e){this._log_record.push(e);c.console||this._log_record.length>this._maxLength&&this._log_record.shift()},setTemplate:function(e){if(this._templateArr[e])this._templateType=e},filter:function(e){var q=RegExp(e,"i"),r=[];f.array.forEach(this._log_record,function(o){var j=
o.toString(true);q.test(j)&&r.push(o)});return r},filterByType:function(e,q){var r=[];e=e||[];f.array.forEach(e,function(o){var j=false;f.array.forEach(q,function(a){if(o.type==a)j=true});j&&r.push(o)});return r},filterByTag:function(e,q){var r=[];e=e||[];f.array.forEach(e,function(o){var j=false;f.array.forEach(q,function(a){if(o.tag==a)j=true});j&&r.push(o)});return r},filterByMsg:function(e,q){var r=[];e=e||[];f.array.forEach(e,function(o){var j=false;f.array.forEach(q,function(a){if(o.msg.indexOf(a)>
-1)j=true});j&&r.push(o)});return r},getReport:function(e,q,r){var o=[],j=this._log_record,a=this;if(!e||e=="")e=false;else f.isArray(e)||(e=[e]);if(!q||q=="")q=false;else f.isArray(q)||(q=[q]);if(!r||r=="")r=false;else f.isArray(r)||(r=[r]);if(e)j=this.filterByType(j,e);if(q)j=this.filterByTag(j,q);if(r)j=this.filterByMsg(j,r);f.array.forEach(j,function(d){o.push(d.toString(false,a._templateArr[1]))});return o.join(",")},render:function(e,q){e=e||this._log_record;q||(e=e.slice(-15));var r=this;r.clear();
f.array.forEach(e,function(o){r.outConsole(o)})},clear:function(e){e&&e.preventDefault();f.console._outputEl.innerHTML=""},refresh:function(e){e&&e.preventDefault();this.clear();this.render()},help:function(e){e&&e.preventDefault();this.print("&lt;&lt; Console Help &gt;&gt;<br/>                                help|h  : \u63a7\u5236\u53f0\u5e2e\u52a9<br/>                                clear|cls : \u6e05\u7a7a\u63a7\u5236\u53f0\u8f93\u51fa<br/>                                refresh|r : \u5237\u65b0\u63a7\u5236\u53f0\u8f93\u51fa<br/>                                filter|f : \u8fc7\u6ee4\u63a7\u5236\u53f0\u8f93\u51fa<br/>                                setTemplate|s : \u8bbe\u7f6e\u8f93\u51fa\u6a21\u7248\u7c7b\u578b<br/>                                hide  : \u9690\u85cf\u63a7\u5236\u53f0\uff0c\u6216\u8005\u4f7f\u7528 Ctrl+Shift+`[~] \u5feb\u6377\u952e")},
onInputKeyup:function(e){switch(e.keyCode){case 13:this._cmd_history.push(f.console._inputEl.value);this._cmd_last_index=this._cmd_history.length;this._execCommand(f.console._inputEl.value);break;case 38:if(this._cmd_history.length==0)break;e="";if(this._cmd_last_index>0){this._cmd_last_index--;e=this._cmd_history[this._cmd_last_index]}else this._cmd_last_index=-1;f.console._inputEl.value=e;break;case 40:if(this._cmd_history.length==0)break;e="";if(this._cmd_last_index<this._cmd_history.length-1){this._cmd_last_index++;
e=this._cmd_history[this._cmd_last_index]}else this._cmd_last_index=this._cmd_history.length;f.console._inputEl.value=e}},_execCommand:function(e){if(e=="help"||e=="h")this.help();else if(e=="clear"||e=="cls")f.console.clear();else if(e=="hide")f.console.hide();else if(e=="refresh"||e=="r")this.refresh();else if(e=="showall"||e=="sa"){this.clear();this.render(null,true)}else if(RegExp(/^(?:filter|f)(?:\(|\s+)(.+)(?:\)|\s*)$/i).test(e)){e=eval("this.filter('"+RegExp.$1+"')");if(e.length>0)this.render(e,
true);else{this.clear();this.out("NO RESULT!",1)}}else if(RegExp(/^(?:setTemplate|s)(?:\(|\s+)(\d+)(?:\)|\s*)$/i).test(e)){this.setTemplate(parseInt(RegExp.$1));this.refresh()}else this._execScript(e);f.console._inputEl.value=""},_execScript:function(e){var q='<span style="color:#ccff00">'+e+"</span><br/>";try{q+=(eval(e)||"").toString().replace(/</g,"&lt;").replace(/>/g,"&gt;");f.console.print(q,0)}catch(r){q+=r.description;f.console.print(q,1)}}});f.profile=f.console.profile;f.warn=f.console.warn;
f.error=f.console.error;f.info=f.console.info;f.log=f.console.log=f.console.info;f.debug=f.console.debug;l.onDomReady(function(){f.console._init();if(c.console=="true"){f.console=f.extend(f.console,{profile:f.emptyFunc,warn:f.emptyFunc,error:f.emptyFunc,info:f.emptyFunc,debug:f.emptyFunc});f.console.show()}});f.runtime=function(){function e(){return f.config.debugLevel>0}function q(o,j){var a;if(e())a=o+"\n=STACK=\n"+r();else if(j=="error")a=o;f.Debug.errorLogs.push(a)}function r(o,j){function a(n,
s){if(n.stack)return n.stack;else if(n.message.indexOf("\nBacktrace:\n")>=0){var u=0;return n.message.split("\nBacktrace:\n")[1].replace(/\s*\n\s*/g,function(){u++;return u%2==0?"\n":" @ "})}else{for(var x=s.callee==r?s.callee.caller:s.callee,v=x.arguments,E=[],D=0,K=v.length;D<K;D++)E.push(typeof v[D]=="undefined"?"<u>":v[D]===null?"<n>":v[D]);v=/function\s+([^\s\(]+)\(/;return((v.test(x.toString())?v.exec(x.toString())[1]:"<ANON>")+"("+E.join()+");").replace(/\n/g,"")}}var d;if(o instanceof Error&&
typeof arguments=="object"&&arguments.callee)d=a(o,j);else try{({}).sds()}catch(m){d=a(m,arguments)}return d.replace(/\n/g," <= ")}return{stack:r,warn:function(){q(write.apply(null,arguments),"warn")},error:function(){q(write.apply(null,arguments),"error")},isDebugMode:e}}()});
Jx().$package(function(f){var b=window.location.host;f.cookie={set:function(k,l,g,i,c){if(c){var h=new Date;h.setTime((new Date).getTime()+36E5*c)}window.document.cookie=k+"="+l+"; "+(c?"expires="+h.toGMTString()+"; ":"")+(i?"path="+i+"; ":"path=/; ")+(g?"domain="+g+";":"domain="+b+";");return true},get:function(k){k=window.document.cookie.match(RegExp("(?:^|;+|\\s+)"+k+"=([^;]*)"));return!k?"":k[1]},remove:function(k,l,g){window.document.cookie=k+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(g?"path="+
g+"; ":"path=/; ")+(l?"domain="+l+";":"domain="+b+";")}}});Jx().$package(function(f){f.localStorage={setItem:function(b,k){this.isSupports()&&window.localStorage.setItem(b,k)},getItem:function(b){if(this.isSupports())return window.localStorage.getItem(b);return null},removeItem:function(b){this.isSupports()&&window.localStorage.removeItem(b)},clear:function(){this.isSupports()&&window.localStorage.clear()},isSupports:function(){return"localStorage"in window&&window.localStorage!==null}}});
Jx().$package(function(f){f.format=f.format||{};f.format.date=function(b,k){var l={"M+":b.getMonth()+1,"D+":b.getDate(),"h+":b.getHours(),"m+":b.getMinutes(),"s+":b.getSeconds(),"q+":Math.floor((b.getMonth()+3)/3),S:b.getMilliseconds()};if(/(Y+)/.test(k))k=k.replace(RegExp.$1,(b.getFullYear()+"").substr(4-RegExp.$1.length));for(var g in l)if(RegExp("("+g+")").test(k))k=k.replace(RegExp.$1,RegExp.$1.length==1?l[g]:("00"+l[g]).substr((""+l[g]).length));return k};f.format.number=function(b,k){for(var l=
b?b.toString().split("."):["0"],g=k?k.split("."):[""],i="",c=l[0],h=g[0],e=c.length-1,q=false,r=h.length-1;r>=0;r--)switch(h.substr(r,1)){case "":if(e>=0)i=c.substr(e--,1)+i;break;case "0":i=e>=0?c.substr(e--,1)+i:"0"+i;break;case ",":q=true;i=","+i}if(e>=0)if(q)for(h=c.length;e>=0;e--){i=c.substr(e,1)+i;if(e>0&&(h-e)%3==0)i=","+i}else i=c.substr(0,e+1)+i;i+=".";c=l.length>1?l[1]:"";h=g.length>1?g[1]:"";for(r=e=0;r<h.length;r++)switch(h.substr(r,1)){case "":if(e<c.length)i+=c.substr(e++,1);break;
case "0":i+=e<c.length?c.substr(e++,1):"0"}return i.replace(/^,+/,"").replace(/\.$/,"")}});Jx().$package(function(f){f.date=f.date||{};f.date.format=f.format.date});Jx().$package(function(f){if(window.console)for(var b=["profile","warn","error","info","debug"],k=function(c,h){return function(e){c[h](e)}},l=0,g=b.length,i;l<g;l++){i=b[l];f[i]=console[i]?k(console,i=="profile"?"log":i):k(console,"log")}});
Jx().$package(function(f){var b=f.Class({init:function(){var k=this;this.op=[{".":function(l,g){return g.className==l},"+":function(l,g){return g.getAttribute(l)},"#":function(l,g){return g.id==l},".~":function(l,g){return $D.hasClass(g,l)}},{">":function(l,g){var i,c,h;h=l.split(">");c=h[0];h=h[1];if((h=="*"?true:k.match(h,g))&&(i=k.operate(k.detectAncestor,c,g)()))return k.packEvent(g,i);return false}},{"!":function(l,g){l=l.substr(1);return!k.match(l,g)}},{"&&":function(l,g){var i,c;c=l.split("&&");
i=c[0];c=c.slice(1).join("");if(k.match(i,g))return c.indexOf("&&")==-1?k.match(c,g):arguments.callee(c,g);return false}}];this.op2Level=[[".","#","+",".~"],">","!","&&"]},detectAncestor:function(k,l,g){var i=5,c=l.target;return function(){if(g(k,c))return c;else if(i>0){i--;if(c.parentNode)c=c.parentNode;else i=0;return arguments.callee()}return null}},detect:function(k,l,g){var i=l.target;if(i.nodeType!=1){i=i.parentNode;if(g(k,i))return this.packEvent(l,i)}else return g(k,i);return false},packEvent:function(k,
l){return[true,{target:l,oTarget:k.target,stopPropagation:function(){k.stopPropagation()},preventDefault:function(){k.preventDefault()},pageX:k.pageX,pageY:k.pageY}]},operate:function(k,l,g){for(var i,c=3;c>0;){if(i=this.op[0][l.substr(0,c)]){var h=null;if(h=k(l.substr(c),g,i))return h}c--}return false},match:function(k,l){for(var g=this.op2Level.length;g>0;g--){var i=this.op2Level[g];if(k.indexOf(i)!=-1)return this.op[g][i](k,l,void 0)}return this.operate(this.detect,k,l)},router:function(k,l,g){k=
k.split(",");var i;for(g=k.length-1;g>=0;g--)if(i=this.match(k[g],l))return i;return false},parse:function(k,l,g){k=this.router(k,g);if(k.length==2)l(k[1]);else k&&l(g)}});f.event.eventParser=new b});
Jx().$package(function(f){var b=f.event,k={"#":"id",".":"className","@":"el","!":"!"},l={blur:1,focus:1,change:1};f.event.eventProxy=function(g,i){var c={},h,e;for(h in i){e=i[h];var q=h.split(" "),r=q[0];q=q[1];c[q]=c[q]||[];c[q].push([r,e])}h=e=null;for(h in c){e=c[h];if(l[h]||h.charAt(0)=="@")for(q=e.length-1;q>=0;q--){r=e[q][0].split(",");for(var o=r.length-1;o>=0;o--){var j=k[r[o].charAt(0)];if(j=="id")b.on($D.id(r[o].substr(1)),h,e[q][1]);else j=="el"&&b.on(g,h.substr(1),e[q][1])}}else b.on(g,
h,function(a){for(var d=e.length-1;d>=0;d--)f.event.eventParser.parse(e[d][0],e[d][1],a)})}}});
Jx().$package(function(f){f.fx=f.fx||{};var b=f.dom,k=f.event,l=new f.Class({init:function(a,d){d=f.array.toArray(d);return f.extend(a,{easeIn:function(m){return a(m,d)},easeOut:function(m){return 1-a(1-m,d)},easeInOut:function(m){return m<=0.5?a(2*m,d)/2:(2-a(2*(1-m),d))/2}})}}),g={linear:function(a){return a},extend:function(a){for(var d in a)this[d]=new l(a[d])}};g.extend({pow:function(a,d){return Math.pow(a,d&&d[0]||6)},exponential:function(a){return Math.pow(2,8*(a-1))},circular:function(a){return 1-
Math.sin(Math.acos(a))},sinusoidal:function(a){return 1-Math.sin((1-a)*Math.PI/2)},back:function(a,d){d=d&&d[0]||1.618;return Math.pow(a,2)*((d+1)*a-d)},bounce:function(a){for(var d,m=0,n=1;;m+=n,n/=2)if(a>=(7-4*m)/11){d=n*n-Math.pow((11-6*m-11*a)/4,2);break}return d},elastic:function(a,d){return Math.pow(2,10*--a)*Math.cos(20*a*Math.PI*(d&&d[0]||1)/3)}});f.array.forEach(["quadratic","cubic","quartic","quintic"],function(a,d){g[a]=new l(function(m){return Math.pow(m,[d+2])})});var i=new f.Class({init:function(a){this.setOption(a)},
setOption:function(a){this.option=f.extend({duration:500,loop:1,fps:1E3/(a&&a.duration||500)},a)},start:function(){if(!this.check())return this;var a=this.option;this.time=0;this.loop=a.loop;this.onStart.apply(this,arguments);this.startTimer();return this},pause:function(){this.stopTimer();return this},resume:function(){this.startTimer();return this},end:function(){this.stopTimer()&&this.onEnd.apply(this,arguments);return this},cancel:function(){this.stopTimer()&&this.onCancel.apply(this,arguments);
return this},onStart:function(){k.notifyObservers(this,"start")},onEnd:function(){k.notifyObservers(this,"end")},onCancel:function(){k.notifyObservers(this,"cancel")},onLoop:function(){k.notifyObservers(this,"loop")},onBeater:function(){k.notifyObservers(this,"beater")},check:function(){if(!this.timer)return true;return false},setDuration:function(a){this.option.duration=a||500},update:function(){var a=f.now(),d=this.option;if(a<this.time+this.option.duration)this.onBeater((a-this.time)/d.duration);
else{this.onBeater(1);this.onLoop();if(d.loop<=0||--this.loop)this.time=a;else{this.stopTimer();this.onEnd()}}},stopTimer:function(){if(!this.timer)return false;this.time=f.now()-this.time;this.timer=q(this);return true},startTimer:function(){if(this.timer)return false;this.time=f.now()-this.time;this.timer=e(this);return true}}),c={},h={},e=function(a){var d=a.option.fps,m=c[d]||(c[d]=[]);m.push(a);h[d]||(h[d]=setInterval(function(){for(var n=m.length;n--;)m[n]&&m[n].update()},Math.round(1E3/d)));
return true},q=function(a){var d=a.option.fps,m=c[d]||[];f.array.remove(m,a);if(!m.length&&h[d])h[d]=clearInterval(h[d]);return false},r=new f.Class({extend:i},{init:function(a){r.superClass.init.apply(this,arguments);this.option=this.option||{};a=f.extend(this.option,{element:null,property:"",from:0,to:1,unit:false,transition:g.linear,fps:25,converter:o},a);this.from=a.from;this.to=a.to},getTransition:function(){return this.option.transition||g.sinusoidal.easeInOut},set:function(a){var d=this.option;
this.render(d.element,d.property,a,d.unit);return this},setFromTo:function(a,d){this.from=a;this.to=d},render:function(a,d,m,n){b.setStyle(a,d,this.option.converter(m,n))},compute:function(a,d,m){return(d-a)*m+a},onStart:function(a,d){var m=this.option;this.from=f.isNumber(a)?a:m.from;this.to=f.isNumber(d)?d:m.to;k.notifyObservers(this,"start")},onEnd:function(){this.set(this.compute(this.from,this.to,this.option.transition(1)));k.notifyObservers(this,"end")},onCancel:function(){this.set(this.compute(this.from,
this.to,this.option.transition(0)));k.notifyObservers(this,"cancel")},onBeater:function(a){this.set(this.compute(this.from,this.to,this.option.transition(a)))}}),o=function(a,d){return d?a+d:a},j=new f.Class({init:function(a){this.option=a=f.extend({element:null,property:"",from:0,to:0,unit:false,duration:500,transition:g.linear,fps:25},a);this.from=a.from;this.to=a.to},getTransition:function(){return this.option.transition||g.sinusoidal.easeInOut},update:function(){var a=f.now(),d=this.option;if(a<
this.time+this.option.duration)this.set(this.compute(this.from,this.to,d.transition((a-this.time)/d.duration)));else{this.set(this.compute(this.from,this.to,1));this.end()}},set:function(a){var d=this.option;this.render(d.element,d.property,a,d.unit);return this},setDuration:function(a){this.option.duration=a||500},setFromTo:function(a,d){this.from=a;this.to=d},render:function(a,d,m,n){m=n?m+n:m;b.setStyle(a,d,m)},compute:function(a,d,m){return(d-a)*m+a},check:function(){if(!this.timer)return true;
return false},start:function(a,d){if(!this.check(a,d))return this;var m=this.option;this.from=f.isNumber(a)?a:m.from;this.to=f.isNumber(d)?d:m.to;this.time=0;this.startTimer();this.onStart();return this},end:function(){this.stopTimer()&&this.onEnd();return this},cancel:function(){this.stopTimer()&&this.onCancel();return this},onStart:function(){k.notifyObservers(this,"start")},onEnd:function(){k.notifyObservers(this,"end")},onCancel:function(){k.notifyObservers(this,"cancel")},pause:function(){this.stopTimer();
return this},resume:function(){this.startTimer();return this},stopTimer:function(){if(!this.timer)return false;this.time=f.now()-this.time;this.timer=q(this);return true},startTimer:function(){if(this.timer)return false;this.time=f.now()-this.time;this.timer=e(this);return true}});f.fx.Beater=i;f.fx.Animation=r;f.fx.Animation2=j;f.fx.transitions=g});
Jx().$package(function(f){var b=window.JSON||{};(function(){function k(r){i.lastIndex=0;return i.test(r)?'"'+r.replace(i,function(o){var j=e[o];return typeof j==="string"?j:"\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+r+'"'}function l(r,o){var j,a,d,m,n=c,s,u=o[r];if(u&&typeof u==="object"&&typeof u.toJSON==="function")u=u.toJSON(r);if(typeof q==="function")u=q.call(o,r,u);switch(typeof u){case "string":return k(u);case "number":return isFinite(u)?String(u):"null";case "boolean":case "null":return String(u);
case "object":if(!u)return"null";c+=h;s=[];if(Object.prototype.toString.apply(u)==="[object Array]"){m=u.length;for(j=0;j<m;j+=1)s[j]=l(j,u)||"null";d=s.length===0?"[]":c?"[\n"+c+s.join(",\n"+c)+"\n"+n+"]":"["+s.join(",")+"]";c=n;return d}if(q&&typeof q==="object"){m=q.length;for(j=0;j<m;j+=1){a=q[j];if(typeof a==="string")if(d=l(a,u))s.push(k(a)+(c?": ":":")+d)}}else for(a in u)if(Object.hasOwnProperty.call(u,a))if(d=l(a,u))s.push(k(a)+(c?": ":":")+d);d=s.length===0?"{}":c?"{\n"+c+s.join(",\n"+c)+
"\n"+n+"}":"{"+s.join(",")+"}";c=n;return d}}var g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,h,e={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},q;if(typeof b.stringify!=="function")b.stringify=function(r,o,j){var a;h=c="";if(typeof j==="number")for(a=0;a<j;a+=1)h+=" ";
else if(typeof j==="string")h=j;if((q=o)&&typeof o!=="function"&&(typeof o!=="object"||typeof o.length!=="number"))throw Error("JSON.stringify");return l("",{"":r})};if(typeof b.parse!=="function")b.parse=function(r,o){function j(d,m){var n,s,u=d[m];if(u&&typeof u==="object")for(n in u)if(Object.hasOwnProperty.call(u,n)){s=j(u,n);if(s!==undefined)u[n]=s;else delete u[n]}return o.call(d,m,u)}var a;g.lastIndex=0;if(g.test(r))r=r.replace(g,function(d){return"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)});
if(/^[\],:{}\s]*$/.test(r.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){a=eval("("+r+")");return typeof o==="function"?j({"":a},""):a}throw new SyntaxError("JSON.parse");}})();f.json=b});
Jx().$package(function(f){var b=f.dom.id,k=f.dom,l=f.event,g;if(typeof window.XMLHttpRequest==="undefined")window.XMLHttpRequest=function(){return new window.ActiveXObject(navigator.userAgent.indexOf("MSIE 5")>=0?"Microsoft.XMLHTTP":"Msxml2.XMLHTTP")};f.http=f.http||{};g=function(h,e,q){var r,o,j,a,d=document.getElementsByTagName("head")?document.getElementsByTagName("head")[0]:document.documentElement,m,n=false,s=false;q=q||{};var u=q.isDefer||false;o=q.query||null;arguments=q.arguments||null;var x=
q.onSuccess||function(){},v=q.onError||function(){},E=q.onComplete||function(){},D,K=q.onTimeout||function(){},J=q.timeout,z=q.charset?q.charset:"utf-8",p=q.win||window,t;e=e||"";if(o!==null)e=e+"?"+o;a=g.Id++;D=function(w){(w=b("jet_load_"+w))&&d.removeChild(w)};o=function(w,B,G){return k.node("link",{id:"jet_load_"+a,type:"text/css",charset:G||"utf-8",rel:"stylesheet",href:w},B)};j=function(w,B,G,M){w=k.node("script",{id:"jet_load_"+a,type:"text/javascript",charset:G||"utf-8",src:w},B);M&&w.setAttribute("defer",
"defer");return w};if(h==="script")r=q.node||j(e,p,z,u);else if(h==="css")r=q.node||o(e,p,z);if(f.browser.engine.trident&&parseInt(f.browser.ie)<9)r.onreadystatechange=function(){var w=this.readyState;if(w==="loaded"||w==="complete"){r.onreadystatechange=null;if(!n){s=true;window.clearTimeout(m);m=null;t={};t.id=a;t.uri=e;t.arguments=arguments;x(t);E(t)}}};else if(f.browser.engine.webkit)l.on(r,"load",function(){var w;if(!n){s=true;window.clearTimeout(m);m=null;w={};w.id=a;w.uri=e;w.arguments=arguments;
x(w);E(w);h==="script"&&D(a)}});else{r.onload=function(){var w;if(!n){s=true;window.clearTimeout(m);m=null;w={};w.id=a;w.uri=e;w.arguments=q.arguments;x(w);E(w);h==="script"&&D(a)}};r.onerror=function(w){var B;if(!n){s=true;window.clearTimeout(m);m=null;B={};B.id=a;B.uri=e;B.arguments=arguments;B.error=w;v(B);E(B);D(a)}}}if(q.node)if(h==="script")r.src=e;else{if(h==="css")r.href=e}else d.appendChild(r);if(h==="script")if(J)m=window.setTimeout(function(){var w;if(!s){n=true;w={};w.uri=e;w.arguments=
arguments;K(w);E(w);D(a)}},J);u=function(w){this._node=w;this._head=d};u.prototype={abort:function(){this._node.src="";this._head.removeChild(this._node);delete this._node}};return new u(r)};g.Id=0;var i,c={_iframes:[],_tick:0,_select:function(){this._tick++;return this._iframes[(this._tick-1)%this._len]},init:function(h){if(this._isInit!=true){this._len=h;for(var e=document.body,q=0;q<h;q++){i=k.node("div",{"class":"RPCService_hDiv"});k.hide(i);i.innerHTML='<iframe id="RPCService_hIframe_'+q+'" name="RPCService_hIframe_'+
q+'" src="'+alloy.CONST.MAIN_URL+'domain.html"></iframe>';e.appendChild(i);this._iframes[q]=[i,null,"RPCService_hIframe_"+q]}this._isInit=true}},take:function(h){var e=this._select();e[1]&&e[0].removeChild(e[1]);h.setAttribute("target",e[2]);e[1]=h;e[0].appendChild(h)}};f.http.ajax=function(h,e){var q,r,o,j=false,a=false;e={method:(e.method||"GET").toUpperCase(),data:e.data||null,arguments:e.arguments||null,onSuccess:e.onSuccess||function(){},onError:e.onError||function(){},onComplete:e.onComplete||
function(){},onTimeout:e.onTimeout||function(){},isAsync:e.isAsync||true,timeout:e.timeout||3E4,contentType:e.contentType,type:e.type||"xml"};if(e.data&&typeof e.data==="object")e.data=f.string.toQueryString(e.data);h=h||"";o=e.timeout;q=new window.XMLHttpRequest;r=function(d){try{return!d.status&&location.protocol=="file:"||d.status>=200&&d.status<300||d.status==304||navigator.userAgent.indexOf("Safari")>-1&&typeof d.status=="undefined"}catch(m){}return false};q.onreadystatechange=function(){if(q.readyState==
4){if(!j){var d={};d.responseText=q.responseText;d.responseXML=q.responseXML;d.data=e.data;d.status=q.status;d.uri=h;d.arguments=e.arguments;if(e.type==="json")try{d.responseJSON=f.json.parse(q.responseText)}catch(m){}r(q)?e.onSuccess(d):e.onError(d);e.onComplete(d)}a=true;q=null}};if(e.method==="GET"){if(e.data){h+=(h.indexOf("?")>-1?"&":"?")+e.data;e.data=null}q.open("GET",h,e.isAsync);q.setRequestHeader("Content-Type",e.contentType||"text/plain;charset=UTF-8");q.send()}else if(e.method==="POST"){q.open("POST",
h,e.isAsync);q.setRequestHeader("Content-Type",e.contentType||"application/x-www-form-urlencoded;charset=UTF-8");q.send(e.data)}else{q.open(e.method,h,e.isAsync);q.send()}window.setTimeout(function(){var d;if(!a){j=true;d={};d.uri=h;d.arguments=e.arguments;e.onTimeout(d);e.onComplete(d)}},o);return q};f.http.comet=void 0;f.http.load=g;f.http.loadCss=function(h,e){return g("css",h,e)};f.http.loadScript=function(h,e){return g("script",h,e)};f.http.formSend=function(h,e){c.init(2);var q={method:e.method||
"GET",enctype:e.enctype||"",data:e.data||{},onSuccess:e.onSuccess||function(){},onError:e.onError||function(){},onComplete:e.onComplete||function(){},onTimeout:e.onTimeout||function(){},timeout:e.timeout?e.timeout:1E4},r=k.node("form",{"class":"RPCService_form",method:q.method,action:h+"?t="+(new Date).getTime(),enctype:q.enctype});if(Object.prototype.toString.call(q.data).indexOf("String")>-1){var o=k.node("input");o.type="text";o.name=q.data;r.appendChild(o)}else for(var j in q.data){o=k.node("input");
o.type="text";o.name=j;o.setAttribute("value",q.data[j]);r.appendChild(o)}c.take(r);r.submit()}});
Jx().$package(function(f){var b=function(){function k(o,j){j=j||document;if(!/^[\w\-_#]+$/.test(o)&&j.querySelectorAll)return l(j.querySelectorAll(o));if(o.indexOf(",")>-1){for(var a=o.split(/,/g),d=[],m=0,n=a.length;m<n;++m)d=d.concat(k(a[m],j));return r(d)}a=o.match(i);m=a.pop();d=(m.match(h)||q)[1];n=!d&&(m.match(c)||q)[1];m=!d&&(m.match(e)||q)[1];if(n&&!m&&j.getElementsByClassName)m=l(j.getElementsByClassName(n));else{m=!d&&l(j.getElementsByTagName(m||"*"));if(n){m=m;n=RegExp("(^|\\s)"+n+"(\\s|$)");
for(var s=-1,u,x=-1,v=[];u=m[++s];)if(n.test(u.className))v[++x]=u;m=v}if(d)return(a=j.getElementById(d))?[a]:[]}return a[0]&&m[0]?g(a,m):m}function l(o){try{return Array.prototype.slice.call(o)}catch(j){for(var a=[],d=0,m=o.length;d<m;++d)a[d]=o[d];return a}}function g(o,j,a){var d=o.pop();if(d===">")return g(o,j,true);var m=[],n=-1,s=(d.match(h)||q)[1],u=!s&&(d.match(c)||q)[1];d=!s&&(d.match(e)||q)[1];var x=-1,v,E,D;for(d=d&&d.toLowerCase();v=j[++x];){E=v.parentNode;do{D=(D=(D=!d||d==="*"||d===
E.nodeName.toLowerCase())&&(!s||E.id===s))&&(!u||RegExp("(^|\\s)"+u+"(\\s|$)").test(E.className));if(a||D)break}while(E=E.parentNode);if(D)m[++n]=v}return o[0]&&m[0]?g(o,m):m}var i=/(?:[\w\-\\.#]+)+(?:\[\w+?=([\'"])?(?:\\\1|.)+?\1\])?|\*|>/ig,c=/^(?:[\w\-_]+)?\.([\w\-_]+)/,h=/^(?:[\w\-_]+)?#([\w\-_]+)/,e=/^([\w\*\-_]+)/,q=[null,null],r=function(){var o=+new Date,j=function(){var a=1;return function(d){var m=d[o],n=a++;if(!m){d[o]=n;return true}return false}}();return function(a){for(var d=a.length,
m=[],n=-1,s=0,u;s<d;++s){u=a[s];if(j(u))m[++n]=u}o+=1;return m}}();return k}();f.dom.mini=b});Jx().$package(function(f){f.number=f.number||{};f.number.format=f.format.number});
Jx().$package(function(f){var b=function(){return 0};b=f.Class({init:function(){throw"BaseAudio does not implement a required interface";},play:b,pause:b,stop:b,getVolume:b,setVolume:b,getLoop:b,setLoop:b,setMute:b,getMute:b,getPosition:b,setPosition:b,getBuffered:b,getDuration:b,free:b,on:b,off:b});var k={NONE:0,NATIVE:1,WMP:2,FLASH:3,MOBILE:4},l=function(){var o;return function(j){if(!o){var a=document.createElement("div");a.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;margin:0;padding:0;left:0;top:0;";
(document.body||document.documentElement).appendChild(a);if(j==k.FLASH){a.innerHTML='<object id="JxAudioObject" name="JxAudioObject" '+(f.browser.ie?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+f.path+'style/swf/jxaudioobject.swf"')+'width="1" height="1" align="top"><param name="movie" value="'+f.path+'style/swf/jxaudioobject.swf" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="quality" value="high" /><param name="wmode" value="opaque" /></object>';
o=f.dom.id("JxAudioObject")||window.JxAudioObject||document.JxAudioObject}else o=a}return o}}(),g=function(){var o=0;return function(){return o++}}(),i=function(){if(window.Audio&&(new Audio).canPlayType("audio/mpeg")){if(/\bmobile\b/i.test(navigator.userAgent))return k.MOBILE;return k.NATIVE}else{var o;if(f.browser.plugins.flash>=9)o=k.FLASH;else{if(o=window.ActiveXObject)a:{try{new ActiveXObject("WMPlayer.OCX.7")}catch(j){o=false;break a}o=true}o=o?k.WMP:k.NONE}return o}}();switch(i){case k.NATIVE:case k.MOBILE:var c=
f.Class({extend:b},{init:function(o){o=o||{};(this._el=new Audio).loop=Boolean(o.loop);o.src&&this.play(o.src)},play:function(o){if(o)this._el.src=o;this._el.paused&&this._el.play()},pause:function(){this._el.pause()},stop:function(){this._el.currentTime=Infinity},getVolume:function(){return!this._el.muted&&this._el.volume||0},setVolume:function(o){if(isFinite(o)){this._el.volume=Math.max(0,Math.min(o,1));this._el.muted=false}},getLoop:function(){return this._el.loop},setLoop:function(o){this._el.loop=
o!==false},getMute:function(){return this._el.muted},setMute:function(o){this._el.muted=o!==false},getPosition:function(){return this._el.currentTime},setPosition:function(o){if(!isNaN(o))this._el.currentTime=Math.max(0,o)},getBuffered:function(){return this._el.buffered.length&&this._el.buffered.end(0)||0},getDuration:function(){return this._el.duration},free:function(){this._el.pause();this._el=null},on:function(o,j){this._el.addEventListener(o,j,false)},off:function(o,j){this._el.removeEventListener(o,
j,false)}});if(i=k.NATIVE){f.Audio=c;break}var h=[],e=function(){var o=h.length;h.pop().off("ended",e);o>=2&&h[o-2]._el.play()};f.Audio=f.Class({extend:c},{init:function(o){c.prototype.init.call(this,o)},play:function(o){var j=h.length;if(j&&h[j-1]!==this){j=f.array.indexOf(h,this);-1!==j?h.splice(j,1):this.on("ended",e)}h.push(this);if(o)this._el.src=o;this._el.paused&&this._el.play()},pause:function(){for(var o=0,j=h.length;o<j;o++)h[o].off("ended",e);h=[];this._el.pause()}});break;case k.FLASH:var q=
function(){var o=0,j=[],a=false,d=function(){++o;var m=l();if(m.audioLoad&&typeof m.audioLoad==="function"){a=true;m=0;for(var n=j.length;m<n;m++)j[m]._sync();j=null}else o<3E4&&setTimeout(d,100)};return function(m){if(a)m._sync();else{-1===f.array.indexOf(j,m)&&j.push(m);o===0&&d()}}}(),r;(function(){var o=[];window.Jx.AudioEventDispatcher=function(j,a,d){j=o[j];var m;j&&j._handler&&(m=j._handler[a]);a=0;for(var n=m&&m.length;a<n;a++)m[a].call(j,d)};r=function(j){o[j._seq]=j}})();f.Audio=f.Class({init:function(o){this._seq=
g();this._volume=1;this._muted=false;o=o||{};this._loop=Boolean(o.loop);this._paused=true;l(k.FLASH);o.src&&this.play(o.src)},play:function(o){var j=l();if(o){this._src=o;this._paused=false;j.audioLoad?this._sync():q(this)}else{this._paused=false;j.audioPlay&&j.audioPlay(this._seq)}},pause:function(){var o=l();this._paused=true;o.audioPause&&o.audioPause(this._seq)},stop:function(){this._paused=true;var o=l();o.audioStop&&o.audioStop(this._seq)},getVolume:function(){return!this._muted&&this._volume||
0},setVolume:function(o){if(isFinite(o)){this._volume=Math.max(0,Math.min(o,1));this._muted=false;o=l();o.audioSetVolume&&o.audioSetVolume(this._seq,this._volume)}},getLoop:function(){return this._loop},setLoop:function(o){this._loop=o!==false;o=l();o.audioSetLoop&&o.audioSetLoop(this._loop)},getMute:function(){return this._muted},setMute:function(o){this._muted=o!==false;o=l();o.audioSetVolume&&o.audioSetVolume(this._seq,this.getVolume())},getPosition:function(){var o=l();return o.audioGetPosition&&
o.audioGetPosition(this._seq)/1E3||0},setPosition:function(o){isNaN(o)||l().audioSetPosition(this._seq,Math.max(0,o)*1E3)},getBuffered:function(){var o=l();return o.audioGetBuffered&&o.audioGetBuffered(this._seq)/1E3||0},getDuration:function(){var o=l();return o.audioGetDuration&&o.audioGetDuration(this._seq)/1E3||0},free:function(){this._paused=true;var o=l();o.audioFree&&o.audioFree(this._seq)},on:function(o,j){if(!this._handler){this._handler={};r(this)}if(!this._handler[o]||!this._handler[o].length){this._handler[o]=
[j];var a=l();a.audioOn&&a.audioOn(this._seq,o)}else-1===f.array.indexOf(this._handler[o],j)&&this._handler[o].push(j)},off:function(o,j){var a;if(this._handler&&this._handler[o]&&-1!==(a=f.array.indexOf(this._handler[o],j))){this._handler[o].splice(a,1);if(!this._handler[o].length){a=l();a.audioOff&&a.audioOff(this._seq,o);delete this._handler[o]}}},_sync:function(){if(this._src){var o=l(),j=this._seq;o.audioLoad(j,this._src);var a=this.getVolume();a!=1&&o.audioSetVolume(j,a);this._loop&&o.audioSetLoop(j,
true);for(var d in this._handler)o.audioOn(j,d);this._paused||o.audioPlay(j)}}});break;case k.WMP:f.Audio=f.Class({extend:b},{init:function(o){this._seq=g();o=o||{};var j=document.createElement("div");l(k.WMP).appendChild(j);j.innerHTML='<object id="WMPObject'+this._seq+'" classid="CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6" standby="" type="application/x-oleobject" width="0" height="0">                        <param name="AutoStart" value="true"><param name="ShowControls" value="0"><param name="uiMode" value="none"></object>';
this._el=f.dom.id("WMPObject"+this._seq)||window["WMPObject"+this._seq];o.loop&&this._el.settings.setMode("loop",true);o.src&&this.play(o.src)},play:function(o){if(o){var j=document.createElement("a");j.href=o;f.dom.getHref(j);this._canPlayThroughFired=this._isBuffering=this._isPlaying=false;this._el.URL=f.dom.getHref(j)}this._el.playState!==3&&this._el.controls.play();this._hasPoll()&&this._startPoll()},pause:function(){this._el.controls.pause()},stop:function(){this._el.controls.stop()},getVolume:function(){return!this._el.settings.mute&&
this._el.settings.volume/100||0},setVolume:function(o){if(isFinite(o)){o=Math.max(0,Math.min(o,1))*100;if(this._el.settings.volume!==o||this._el.settings.mute){this._el.settings.volume=o;this._el.settings.mute=false;this._fire("volumechange")}}},getLoop:function(){return this._el.settings.getMode("loop")},setLoop:function(o){this._el.settings.setMode("loop",o!==false)},getMute:function(){return this._el.settings.mute},setMute:function(o){o=o!==false;if(this._el.settings.mute!==o){this._el.settings.mute=
o;this._fire("volumechange")}},getPosition:function(){return this._el.controls.currentPosition},setPosition:function(o){if(!isNaN(o)){this._fire("seeking");this._el.controls.currentPosition=Math.max(0,o)}},getBuffered:function(){return this._el.network.downloadProgress*0.01*this.getDuration()},getDuration:function(){return(this._el.currentMedia||0).duration||0},free:function(){this._el.controls.stop();this._el=null},on:function(o,j){if(!this._handler)this._handler={};var a=this;switch(o){case "timeupdate":this._startPoll();
case "seeked":if(!this._hasPositionChange()){this._onPositionChange=function(){a._fire("timeupdate");a._fire("seeked")};this._el.attachEvent("PositionChange",this._onPositionChange)}break;case "waiting":case "playing":if(!this._hasBuffering()){this._onBuffering=function(d){if((a._el.currentMedia||0).sourceURL)if(d){a._isBuffering=true;a._fire("waiting")}else{a._isBuffering=false;a._fire("playing")}};this._el.attachEvent("Buffering",this._onBuffering)}break;case "error":this._el.attachEvent("Error",
j);break;case "progress":case "ended":case "play":case "pause":if(!this._hasPlayStateChange()){this._onPlayStateChange=function(d){if((a._el.currentMedia||0).sourceURL)if(d===2){a._isPlaying=false;a._fire("pause")}else if(d===3){if(!a._isPlaying){a._isPlaying=true;a._fire("play")}}else if(d===6)a._fire("progress");else if(d===1)if(a._isPlaying){a._isPlaying=false;a._fire("ended");a._stopPoll()}};this._el.attachEvent("PlayStateChange",this._onPlayStateChange)}break;case "loadstart":case "loadeddata":case "canplay":if(!this._hasOpenStateChange()){this._onOpenStateChange=
function(d){if((a._el.currentMedia||0).sourceURL)if(d===21)a._fire("loadstart");else if(d===13){a._fire("loadeddata");a._fire("canplay")}};this._el.attachEvent("OpenStateChange",this._onOpenStateChange)}break;case "canplaythrough":case "durationchange":this._startPoll()}(this._handler[o]||(this._handler[o]=[])).push(j)},off:function(o,j){if(this._handler){var a;if(this._handler&&this._handler[o]&&-1!==(a=f.array.indexOf(this._handler[o],j)))this._handler[o].splice(a,1);switch(o){case "timeupdate":this._hasPoll()||
this._stopPoll();case "seeked":this._hasPositionChange()||this._el.detachEvent("PositionChange",this._onPositionChange);break;case "waiting":case "playing":this._hasBuffering()||this._el.detachEvent("Buffering",this._onBuffering);break;case "error":this._el.detachEvent("Error",j);break;case "progress":case "ended":case "play":case "pause":this._hasPlayStateChange()||this._el.detachEvent("PlayStateChange",this._onPlayStateChange);break;case "loadstart":case "loadeddata":case "canplay":this._hasOpenStateChange()||
this._el.detachEvent("OpenStateChange",this._onOpenStateChange);break;case "canplaythrough":case "durationchange":this._hasPoll()||this._stopPoll()}}},_fire:function(o){var j;if(this._handler&&(j=this._handler[o])){o=0;for(var a=j.length;o<a;o++)j[o].call(this)}},_startPoll:function(){if(this._timer===undefined){this._canPlayThroughFired=this._canPlayThroughFired||this._el.network.downloadProgress===100;this._duration=this.getDuration();var o=this;this._timer=setInterval(function(){if(o._isPlaying&&
!o._isBuffering&&(o._handler.timeupdate||0).length&&(o._el.currentMedia||0).sourceURL)o._fire("timeupdate");var j=o.getDuration();if(o._duration!==j){o._duration=j;o._fire("durationchange")}if(!o._canPlayThroughFired)if(o._el.network.downloadProgress===100){o._canPlayThroughFired=true;o._fire("canplaythrough")}},1E3)}},_stopPoll:function(){clearInterval(this._timer);delete this._timer},_hasPositionChange:function(){return this._handler.timeupdate&&this._handler.timeupdate.length||this._handler.seeked&&
this._handler.seeked.length},_hasBuffering:function(){return this._handler.waiting&&this._handler.waiting.length||this._handler.playing&&this._handler.playing.length},_hasPlayStateChange:function(){return this._handler.progress&&this._handler.progress.length||this._handler.ended&&this._handler.ended.length||this._handler.play&&this._handler.play.length||this._handler.pause&&this._handler.pause.length},_hasOpenStateChange:function(){return this._handler.loadstart&&this._handler.loadstart.length||this._handler.loadeddata&&
this._handler.loadeddata.length||this._handler.canplay&&this._handler.canplay.length},_hasPoll:function(){return this._handler.timeupdate&&this._handler.timeupdate.length||this._handler.canplaythrough&&this._handler.canplaythrough.length||this._handler.durationchange&&this._handler.durationchange.length}});break;case k.NONE:f.Audio=f.Class({extend:b},{init:function(){f.warn("Audio is not supported","Audio")}})}});
Jx().$package(function(f){var b=function(){function k(){if(!W){try{var y=z.getElementsByTagName("body")[0].appendChild(z.createElement("span"));y.parentNode.removeChild(y)}catch(A){return}W=true;y=w.length;for(var C=0;C<y;C++)w[C]()}}function l(y){if(W)y();else w[w.length]=y}function g(y){if(typeof J.addEventListener!=v)J.addEventListener("load",y,false);else if(typeof z.addEventListener!=v)z.addEventListener("load",y,false);else if(typeof J.attachEvent!=v)m(J,"onload",y);else if(typeof J.onload==
"function"){var A=J.onload;J.onload=function(){A();y()}}else J.onload=y}function i(){var y=z.getElementsByTagName("body")[0],A=z.createElement(E);A.style.position="absolute";A.style.left="-9999px";A.style.top="-9999px";A.style.width="1px";A.style.height="1px";A.setAttribute("type",D);var C=y.appendChild(A);if(C){var F=0;(function(){if(typeof C.GetVariable!=v){var H=C.GetVariable("$version");if(H){H=H.split(" ")[1].split(",");I.pv=[parseInt(H[0],10),parseInt(H[1],10),parseInt(H[2],10)]}}else if(F<
10){F++;setTimeout(arguments.callee,10);return}y.removeChild(A);C=null;c()})()}else c()}function c(){var y=B.length;if(y>0)for(var A=0;A<y;A++){var C=B[A].id,F=B[A].callbackFn,H={success:false,id:C};if(I.pv[0]>0){var N=d(C);if(N)if(n(B[A].swfVersion)&&!(I.wk&&I.wk<312)){u(C,true);if(F){H.success=true;H.ref=h(C);F(H)}}else if(B[A].expressInstall&&e()){H={};H.data=B[A].expressInstall;H.width=N.getAttribute("width")||"0";H.height=N.getAttribute("height")||"0";if(N.getAttribute("class"))H.styleclass=
N.getAttribute("class");if(N.getAttribute("align"))H.align=N.getAttribute("align");var L={};N=N.getElementsByTagName("param");for(var P=N.length,Q=0;Q<P;Q++)if(N[Q].getAttribute("name").toLowerCase()!="movie")L[N[Q].getAttribute("name")]=N[Q].getAttribute("value");q(H,L,C,F)}else{r(N);F&&F(H)}}else{u(C,true);if(F){if((C=h(C))&&typeof C.SetVariable!=v){H.success=true;H.ref=C}F(H)}}}}function h(y){var A=null;if((y=d(y))&&y.nodeName=="OBJECT")if(typeof y.SetVariable!=v)A=y;else if(y=y.getElementsByTagName(E)[0])A=
y;return A}function e(){return!Y&&n("6.0.65")&&(I.win||I.mac)&&!(I.wk&&I.wk<312)}function q(y,A,C,F){Y=true;R=F||null;ca={success:false,id:C};var H=d(C);if(H){if(H.nodeName=="OBJECT"){O=o(H);S=null}else{O=H;S=C}y.id=K;if(typeof y.width==v||!/%$/.test(y.width)&&parseInt(y.width,10)<310)y.width="310";if(typeof y.height==v||!/%$/.test(y.height)&&parseInt(y.height,10)<137)y.height="137";z.title=z.title.slice(0,47)+" - Flash Player Installation";F=I.ie&&I.win?"ActiveX":"PlugIn";F="MMredirectURL="+J.location.toString().replace(/&/g,
"%26")+"&MMplayerType="+F+"&MMdoctitle="+z.title;if(typeof A.flashvars!=v)A.flashvars+="&"+F;else A.flashvars=F;if(I.ie&&I.win&&H.readyState!=4){F=z.createElement("div");C+="SWFObjectNew";F.setAttribute("id",C);H.parentNode.insertBefore(F,H);H.style.display="none";(function(){H.readyState==4?H.parentNode.removeChild(H):setTimeout(arguments.callee,10)})()}j(y,A,C)}}function r(y){if(I.ie&&I.win&&y.readyState!=4){var A=z.createElement("div");y.parentNode.insertBefore(A,y);A.parentNode.replaceChild(o(y),
A);y.style.display="none";(function(){y.readyState==4?y.parentNode.removeChild(y):setTimeout(arguments.callee,10)})()}else y.parentNode.replaceChild(o(y),y)}function o(y){var A=z.createElement("div");if(I.win&&I.ie)A.innerHTML=y.innerHTML;else if(y=y.getElementsByTagName(E)[0])if(y=y.childNodes)for(var C=y.length,F=0;F<C;F++)!(y[F].nodeType==1&&y[F].nodeName=="PARAM")&&y[F].nodeType!=8&&A.appendChild(y[F].cloneNode(true));return A}function j(y,A,C){var F,H=d(C);if(I.wk&&I.wk<312)return F;if(H){if(typeof y.id==
v)y.id=C;if(I.ie&&I.win){var N="",L;for(L in y)if(y[L]!=Object.prototype[L])if(L.toLowerCase()=="data")A.movie=y[L];else if(L.toLowerCase()=="styleclass")N+=' class="'+y[L]+'"';else if(L.toLowerCase()!="classid")N+=" "+L+'="'+y[L]+'"';L="";for(var P in A)if(A[P]!=Object.prototype[P])L+='<param name="'+P+'" value="'+A[P]+'" />';H.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+N+">"+L+"</object>";G[G.length]=y.id;F=d(y.id)}else{P=z.createElement(E);P.setAttribute("type",D);
for(var Q in y)if(y[Q]!=Object.prototype[Q])if(Q.toLowerCase()=="styleclass")P.setAttribute("class",y[Q]);else Q.toLowerCase()!="classid"&&P.setAttribute(Q,y[Q]);for(N in A)if(A[N]!=Object.prototype[N]&&N.toLowerCase()!="movie"){y=P;L=N;Q=A[N];C=z.createElement("param");C.setAttribute("name",L);C.setAttribute("value",Q);y.appendChild(C)}H.parentNode.replaceChild(P,H);F=P}}return F}function a(y){var A=d(y);if(A&&A.nodeName=="OBJECT")if(I.ie&&I.win){A.style.display="none";(function(){if(A.readyState==
4){var C=d(y);if(C){for(var F in C)if(typeof C[F]=="function")C[F]=null;C.parentNode.removeChild(C)}}else setTimeout(arguments.callee,10)})()}else A.parentNode.removeChild(A)}function d(y){var A=null;try{A=z.getElementById(y)}catch(C){}return A}function m(y,A,C){y.attachEvent(A,C);M[M.length]=[y,A,C]}function n(y){var A=I.pv;y=y.split(".");y[0]=parseInt(y[0],10);y[1]=parseInt(y[1],10)||0;y[2]=parseInt(y[2],10)||0;return A[0]>y[0]||A[0]==y[0]&&A[1]>y[1]||A[0]==y[0]&&A[1]==y[1]&&A[2]>=y[2]?true:false}
function s(y,A,C,F){if(!(I.ie&&I.mac)){var H=z.getElementsByTagName("head")[0];if(H){C=C&&typeof C=="string"?C:"screen";if(F)ba=T=null;if(!T||ba!=C){F=z.createElement("style");F.setAttribute("type","text/css");F.setAttribute("media",C);T=H.appendChild(F);if(I.ie&&I.win&&typeof z.styleSheets!=v&&z.styleSheets.length>0)T=z.styleSheets[z.styleSheets.length-1];ba=C}if(I.ie&&I.win)T&&typeof T.addRule==E&&T.addRule(y,A);else T&&typeof z.createTextNode!=v&&T.appendChild(z.createTextNode(y+" {"+A+"}"))}}}
function u(y,A){if(da){var C=A?"visible":"hidden";if(W&&d(y))d(y).style.visibility=C;else s("#"+y,"visibility:"+C)}}function x(y){return/[\\\"<>\.;]/.exec(y)!=null&&typeof encodeURIComponent!=v?encodeURIComponent(y):y}var v="undefined",E="object",D="application/x-shockwave-flash",K="SWFObjectExprInst",J=window,z=document,p=navigator,t=false,w=[function(){t?i():c()}],B=[],G=[],M=[],O,S,R,ca,W=false,Y=false,T,ba,da=true,I=function(){var y=typeof z.getElementById!=v&&typeof z.getElementsByTagName!=v&&
typeof z.createElement!=v,A=p.userAgent.toLowerCase(),C=p.platform.toLowerCase(),F=C?/win/.test(C):/win/.test(A);C=C?/mac/.test(C):/mac/.test(A);A=/webkit/.test(A)?parseFloat(A.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false;var H=!+"\u000b1",N=[0,0,0],L=null;if(typeof p.plugins!=v&&typeof p.plugins["Shockwave Flash"]==E){if((L=p.plugins["Shockwave Flash"].description)&&!(typeof p.mimeTypes!=v&&p.mimeTypes[D]&&!p.mimeTypes[D].enabledPlugin)){t=true;H=false;L=L.replace(/^.*\s+(\S+\s+\S+$)/,"$1");
N[0]=parseInt(L.replace(/^(.*)\..*$/,"$1"),10);N[1]=parseInt(L.replace(/^.*\.(.*)\s.*$/,"$1"),10);N[2]=/[a-zA-Z]/.test(L)?parseInt(L.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof J.ActiveXObject!=v)try{var P=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(P)if(L=P.GetVariable("$version")){H=true;L=L.split(" ")[1].split(",");N=[parseInt(L[0],10),parseInt(L[1],10),parseInt(L[2],10)]}}catch(Q){}return{w3:y,pv:N,wk:A,ie:H,win:F,mac:C}}();(function(){if(I.w3){if(typeof z.readyState!=v&&
z.readyState=="complete"||typeof z.readyState==v&&(z.getElementsByTagName("body")[0]||z.body))k();if(!W){typeof z.addEventListener!=v&&z.addEventListener("DOMContentLoaded",k,false);if(I.ie&&I.win){z.attachEvent("onreadystatechange",function(){if(z.readyState=="complete"){z.detachEvent("onreadystatechange",arguments.callee);k()}});J==top&&function(){if(!W){try{z.documentElement.doScroll("left")}catch(y){setTimeout(arguments.callee,0);return}k()}}()}I.wk&&function(){W||(/loaded|complete/.test(z.readyState)?
k():setTimeout(arguments.callee,0))}();g(k)}}})();(function(){I.ie&&I.win&&window.attachEvent("onunload",function(){for(var y=M.length,A=0;A<y;A++)M[A][0].detachEvent(M[A][1],M[A][2]);y=G.length;for(A=0;A<y;A++)a(G[A]);for(var C in I)I[C]=null;I=null;for(var F in b)b[F]=null;b=null})})();return{registerObject:function(y,A,C,F){if(I.w3&&y&&A){var H={};H.id=y;H.swfVersion=A;H.expressInstall=C;H.callbackFn=F;B[B.length]=H;u(y,false)}else F&&F({success:false,id:y})},getObjectById:function(y){if(I.w3)return h(y)},
embedSWF:function(y,A,C,F,H,N,L,P,Q,X){var Z={success:false,id:A};if(I.w3&&!(I.wk&&I.wk<312)&&y&&A&&C&&F&&H){u(A,false);l(function(){C+="";F+="";var V={};if(Q&&typeof Q===E)for(var U in Q)V[U]=Q[U];V.data=y;V.width=C;V.height=F;U={};if(P&&typeof P===E)for(var $ in P)U[$]=P[$];if(L&&typeof L===E)for(var aa in L)if(typeof U.flashvars!=v)U.flashvars+="&"+aa+"="+L[aa];else U.flashvars=aa+"="+L[aa];if(n(H)){$=j(V,U,A);V.id==A&&u(A,true);Z.success=true;Z.ref=$}else if(N&&e()){V.data=N;q(V,U,A,X);return}else u(A,
true);X&&X(Z)})}else X&&X(Z)},switchOffAutoHideShow:function(){da=false},ua:I,getFlashPlayerVersion:function(){return{major:I.pv[0],minor:I.pv[1],release:I.pv[2]}},hasFlashPlayerVersion:n,createSWF:function(y,A,C){if(I.w3)return j(y,A,C)},showExpressInstall:function(y,A,C,F){I.w3&&e()&&q(y,A,C,F)},removeSWF:function(y){I.w3&&a(y)},createCSS:function(y,A,C,F){I.w3&&s(y,A,C,F)},addDomLoadEvent:l,addLoadEvent:g,getQueryParamValue:function(y){var A=z.location.search||z.location.hash;if(A){if(/\?/.test(A))A=
A.split("?")[1];if(y==null)return x(A);A=A.split("&");for(var C=0;C<A.length;C++)if(A[C].substring(0,A[C].indexOf("="))==y)return x(A[C].substring(A[C].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Y){var y=d(K);if(y&&O){y.parentNode.replaceChild(O,y);if(S){u(S,true);if(I.ie&&I.win)O.style.display="block"}R&&R(ca)}Y=false}}}}();f.swfobject=b;(function(){var k=navigator.appVersion.indexOf("MSIE")!=-1?true:false,l=navigator.appVersion.toLowerCase().indexOf("win")!=-1?true:false,g=
navigator.userAgent.indexOf("Opera")!=-1?true:false;f.GetSwfVer=function(){var i=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){i=navigator.plugins["Shockwave Flash"+(navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"")].description.split(" ");var c=i[2].split("."),h=c[0];c=c[1];var e=i[3];if(e=="")e=i[4];if(e[0]=="d")e=e.substring(1);else if(e[0]=="r"){e=e.substring(1);if(e.indexOf("d")>0)e=e.substring(0,
e.indexOf("d"))}i=h+"."+c+"."+e}}else if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1)i=4;else if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1)i=3;else if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1)i=2;else if(k&&l&&!g){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");h=c.GetVariable("$version")}catch(q){}if(!h)try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");h="WIN 6,0,21,0";c.AllowScriptAccess="always";h=c.GetVariable("$version")}catch(r){}if(!h)try{c=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");h=c.GetVariable("$version")}catch(o){}if(!h)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");h="WIN 3,0,18,0"}catch(j){}if(!h)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash");h="WIN 2,0,0,11"}catch(a){h=-1}i=h}return i}})()});
Jx().$package(function(f){var b=f.event,k=[];f.sound=f.Class({init:function(l,g,i){var c=this._audio=new f.Audio;k.push(this);var h=this;if(i){c.on("durationchange",function(){b.notifyObservers(h,"durationchange")},false);c.on("timeupdate",function(){b.notifyObservers(h,"timeupdate")},false);c.on("canplay",function(){b.notifyObservers(h,"canplay")},false);c.on("ended",function(){b.notifyObservers(h,"ended")},false);c.on("play",function(){b.notifyObservers(h,"play")},false);c.on("pause",function(){b.notifyObservers(h,
"pause")},false);c.on("progress",function(){b.notifyObservers(h,"progress")},false);c.on("error",function(){b.notifyObservers(h,"error")},false)}if(g)c.play(l);else this._url=l},load:function(l){if(l)this._url=l;this.play();this.pause()},getVolume:function(){return this._audio.getVolume()},setVolume:function(){this._audio.setVolume();return true},mute:function(){this._audio.setMute(true)},unMute:function(){this._audio.setMute(false)},isMute:function(){return this._audio.getMute()},play:function(){this._audio.play(this._url);
delete this._url},pause:function(){this._audio.pause()},stop:function(){this._audio.stop()},getDuration:function(){return this._audio.getDuration()},getPosition:function(){return this._audio.getPosition()},setPosition:function(l){this._audio.setPosition(l);return true},buffered:function(){return this._audio.getBuffered()},free:function(){this._audio.free();var l=f.array.indexOf(k,this);-1!==l&&k.splice(l,1)}});f.sound.init=function(){};f.sound.isReady=true;f.sound.Global={_mute:false,getVolume:function(){return 1},
setVolume:function(l){for(var g in k)k[g]&&k[g].setVolume(l);return true},mute:function(){this._mute=true;for(var l in k)k[l]&&k[l].mute()},unMute:function(){this._mute=false;for(var l in k)k[l]&&k[l].unMute()},isMute:function(){return this._mute},removeAll:function(){for(var l;l=k.pop();)l.free()}}});
Jx().$package(function(f){var b=f.dom,k=f.event;f.ui=f.ui||{};var l=0;f.ui.MaskLayer=new f.Class({_getMaskId:function(){return l++},init:function(g){g=g||{};var i=this._getMaskId(),c=this;this._initZIndex=g.zIndex=!f.isUndefined(g.zIndex)?g.zIndex:9E6;this._initOpacity=g.opacity=!f.isUndefined(g.opacity)?g.opacity:0.5;g.appendTo=g.appendTo||document.body;g.className=g.className||"";this.option=g;this.container=b.node("div",{id:"ui_maskLayer_"+i,"class":"ui_maskLayer "+g.className});var h='<div id="ui_maskLayerBody_'+
i+'" class="ui_maskLayerBody"></div>';if(f.browser.ie)h+='<iframe class="ui_maskBgIframe"></iframe>';this.container.innerHTML=h;this.reset();g.appendTo.appendChild(this.container);k.on(this.container,"click",{onMaskLayerClick:function(){k.notifyObservers(c,"click",c)}}.onMaskLayerClick);this.body=b.id("ui_maskLayerBody_"+i)},getElement:function(){return this.container},append:function(g){this.body.appendChild(g)},show:function(){b.show(this.container);k.notifyObservers(this,"show");this._isShow=true},
hide:function(){b.hide(this.container);k.notifyObservers(this,"hide");this._isShow=false},isShow:function(){return this._isShow},toggleShow:function(){this.isShow()?this.hide():this.show()},getZIndex:function(){return this._zIndex},setZIndex:function(g){b.setStyle(this.container,"zIndex",g);this._zIndex=g},setOpacity:function(g){b.setStyle(this.container,"opacity",g)},reset:function(){this.setOpacity(this._initOpacity);this.setZIndex(this._initZIndex);return this},fadeIn:function(){this.show()},fadeOut:function(){this.hide()},
remove:function(){this.option.appendTo&&this.option.appendTo.removeChild(this.container)}})});
Jx().$package(function(f){var b=f.dom,k=f.event,l=function(s){s.preventDefault()},g=false,i=false,c,h,e=false,q=false,r,o,j,a,d,m,n;f.ui=f.ui||{};f.ui.Drag=new f.Class({init:function(s,u,x){var v=this,E,D,K,J;this.apperceiveEl=s;x=x||{};this.isLimited=x.isLimited||false;this.dragType=x.dragType;this.isLocked=x.isLocked||false;this.isLockCursorInScreen=x.isLockCursorInScreen||false;var z=false;if(this.isLimited){this._leftMargin=x.leftMargin||0;this._topMargin=x.topMargin||0;this._rightMargin=x.rightMargin||
0;this._bottomMargin=x.bottomMargin||0}if(x.xOnly)this._xOnly=x.xOnly||false;if(x.yOnly)this._yOnly=x.yOnly||false;this.effectEl=u===false?false:u||s;this.dragStart=function(p){if(p.changedTouches){if(p.changedTouches.length>1)return;p=p.changedTouches[0];document.body.style.WebkitTouchCallout="none"}else{p.preventDefault();p.stopPropagation()}v.dragStartIn(p.pageX,p.pageY)};this.dragStartIn=function(p,t){if(!v.isLocked){k.notifyObservers(v,"beforeStart");k.notifyObservers(document,"beforeStart");
c=b.getClientWidth();h=b.getClientHeight();g=x.clientEl?b.getClientWidth(x.clientEl):c;i=x.clientEl?b.getClientHeight(x.clientEl):h;e=v.effectEl?parseInt(b.getClientWidth(v.effectEl)):0;q=v.effectEl?parseInt(b.getClientHeight(v.effectEl)):0;if(v.isLimited){r=g-e-v._rightMargin;o=v._leftMargin;j=v._topMargin;a=i-q-v._bottomMargin}n||(n=new f.ui.MaskLayer({opacity:0}));n.setZIndex(9E6);n.show();v._oldX=E=v.effectEl?parseInt(b.getStyle(v.effectEl,"left"))||0:0;v._oldY=D=v.effectEl?parseInt(b.getStyle(v.effectEl,
"top"))||0:0;K=p;J=t;if(f.browser.mobileSafari){k.on(document,"touchmove",v.dragMove);k.on(document,"touchend",v.dragStop);var w=new WebKitCSSMatrix(window.getComputedStyle(v.apperceiveEl).webkitTransform);d=p-w.m41;m=t-w.m42}else{k.on(document,"mousemove",v.dragMove);k.on(document,"mouseup",v.dragStop)}f.browser.ie&&k.on(document.body,"selectstart",l);f.browser.mobileSafari?k.notifyObservers(v,"start",{x:p,y:t}):k.notifyObservers(v,"start",{x:E,y:D})}};this.dragMove=function(p){if(!v.isLocked){if(p.browserEvent){p.browserEvent.preventDefault();
p.browserEvent.stopPropagation()}else{p.preventDefault();p.stopPropagation()}if(p.changedTouches)p=p.changedTouches[0];var t,w,B=p.pageX,G=p.pageY;if(v.isLockCursorInScreen){B<0?B=0:B>c&&(B=c);G<0?G=0:G>h&&(G=h)}if(!f.browser.mobileSafari){t=E+(B-K);w=D+(G-J)}if(v.isLimited){if(t>r&&!x.isOverRight)t=r;if(t<o&&!x.isOverLeft)t=o}if(v._oldX!==t&&!v._yOnly){v._oldX=t;if(v.effectEl&&!f.browser.mobileSafari)v.effectEl.style.left=t+"px";z=true}if(v.isLimited){if(w>a&&!x.isOverBottom)w=a;if(w<j&&!x.isOverTop)w=
j}if(v._oldY!==w&&!v._xOnly){v._oldY=w;if(v.effectEl&&!f.browser.mobileSafari)v.effectEl.style.top=w+"px";z=true}t=t;w=w;if(v.effectEl&&f.browser.mobileSafari){v._oldX=E+(B-K);v._oldY=D+(G-J);w=G;t=v._yOnly?E:B-d;w=v._xOnly?D:w-m;v.effectEl.style.webkitTransform="translate3d("+t+"px, "+w+"px, 0px)";t=B;w=G}z&&k.notifyObservers(v,"move",{x:t,y:w,orientEvent:p})}};this.dragStop=function(p){n.hide();if(!v.isLocked){document.body.style.WebkitTouchCallout="auto";if(z||f.browser.mobileSafari){var t=v._oldX,
w=v._oldY;if(v.isLimited){if(t>r&&!x.isOverRight)t=r;if(t<o&&!x.isOverLeft)t=o}if(v.isLimited){if(w>a&&!x.isOverBottom)w=a;if(w<j&&!x.isOverTop)w=j}if(f.browser.mobileSafari){p.preventDefault();if(x.noEndCallback&&v.effectEl){v.effectEl.style.webkitTransform="none";b.setStyle(v.effectEl,"left",t+"px");b.setStyle(v.effectEl,"top",w+"px")}k.notifyObservers(v,"end",{x:t,y:w,orientEvent:p.changedTouches[0]})}else k.notifyObservers(v,"end",{x:t,y:w,orientEvent:p})}else k.notifyObservers(v,"end",{orientEvent:p});
if(v.isLimited&&(v.isOverRight||v.isOverLeft||v.isOverTop||v.isOverBottom)){t=E+(p.pageX-K);w=D+(p.pageY-J);p=v._leftMargin;var B=i-v._bottomMargin,G=v._topMargin;if(t>g-e-v._rightMargin||t<p||w>B||w<G)k.notifyObservers(v,"overFlowBorder",{x:t,y:w})}q=e=i=g=false;if(f.browser.mobileSafari){k.off(document,"touchmove",v.dragMove);k.off(document,"touchend",v.dragStop)}else{k.off(document,"mousemove",v.dragMove);k.off(document,"mouseup",v.dragStop)}f.browser.ie&&k.off(document.body,"selectstart",l);z=
false}};k.on(this.apperceiveEl,"drag",this.dragStart)},setEffect:function(s){this.effectEl=s},lock:function(){this.isLocked=true;k.off(this.apperceiveEl,"drag",this.dragStart)},unlock:function(){this.isLocked=false;k.on(this.apperceiveEl,"drag",this.dragStart)},show:function(){b.show(this.apperceiveEl)},hide:function(){b.hide(this.apperceiveEl)},setLimite:function(s){s=s||{};if(this.isLimited=s.isLimited||true){this._leftMargin=s.leftMargin||0;this._topMargin=s.topMargin||0;this._rightMargin=s.rightMargin||
0;this._bottomMargin=s.bottomMargin||0}}})});
Jx().$package(function(f){f.ui=f.ui||{};var b=f.dom,k=f.event,l=0,g={t:"t",r:"r",b:"b",l:"l",rt:"rt",rb:"rb",lb:"lb",lt:"lt"};f.ui.Resize=new f.Class({init:function(i,c,h){var e=this;h=h||{};this.apperceiveEl=i;this.effectEl=c===false?false:c||i;this.size=h.size||5;this.minWidth=h.minWidth||0;this.minHeight=h.minHeight||0;this._dragProxy=h.dragProxy;if(this.isLimited=h.isLimited||false){this._leftMargin=h.leftMargin||0;this._topMargin=h.topMargin||0;this._rightMargin=h.rightMargin||0;this._bottomMargin=
h.bottomMargin||0}this._left=this.getLeft();this._top=this.getTop();this._width=this.getWidth();this._height=this.getHeight();this.id=this.getId();i={t:"cursor:n-resize; z-index:1; left:0; top:-5px; width:100%; height:5px;",r:"cursor:e-resize; z-index:1; right:-5px; top:0; width:5px; height:100%;",b:"cursor:s-resize; z-index:1; left:0; bottom:-5px; width:100%; height:5px;",l:"cursor:w-resize; z-index:1; left:-5px; top:0; width:5px; height:100%;",rt:"cursor:ne-resize; z-index:2; right:-5px; top:-5px; width:5px; height:5px;",
rb:"cursor:se-resize; z-index:2; right:-5px; bottom:-5px; width:5px; height:5px;",lt:"cursor:nw-resize; z-index:2; left:-5px; top:-5px; width:5px; height:5px;",lb:"cursor:sw-resize; z-index:2; left:-5px; bottom:-5px; width:5px; height:5px;"};this._onMousedown=function(){k.notifyObservers(e,"mousedown",{width:e._width,height:e._height})};this._onDragEnd=function(){k.notifyObservers(e,"end",{x:e.getLeft(),y:e.getTop(),width:e.getWidth(),height:e.getHeight()})};for(var q in g){c=b.node("div",{id:"window_"+
this.id+"_resize_"+g[q]});this.apperceiveEl.appendChild(c);b.setCssText(c,"position:absolute; overflow:hidden; background:url("+f.path+"style/image/transparent.gif);"+i[q]);this["_dragController_"+g[q]]=new f.ui.Drag(c,false)}this._onDragLeftStart=function(){k.notifyObservers(e,"mousedown",{width:e._width,height:e._height});e._startLeft=e._left=e.getLeft();e._startWidth=e._width=e.getWidth();e._startHeight=e._height=e.getHeight()};this._onDragLeft=function(r){var o=e._startWidth-r.x;r=e._startLeft+
r.x;if(o<e.minWidth){o=e.minWidth;r=e._startLeft+(e._startWidth-o)}if(e.isLimited&&r-e._leftMargin<0){r=e._leftMargin;o=e._startLeft+e._startWidth-e._leftMargin}e.setLeft(r);e.setWidth(o);k.notifyObservers(e,"resize",{width:e._width,height:e._height})};this._onDragTopStart=function(){k.notifyObservers(e,"mousedown",{width:e._width,height:e._height});e._startTop=e._top=e.getTop();e._startHeight=e._height=e.getHeight()};this._onDragTop=function(r){var o=e._startHeight-r.y;r=e._startTop+r.y;if(o<e.minHeight){o=
e.minHeight;r=e._startTop+(e._startHeight-o)}if(e.isLimited&&r-e._topMargin<0){r=e._topMargin;o=e._startTop+e._startHeight-e._topMargin}e.setTop(r);e.setHeight(o);k.notifyObservers(e,"resize",{width:e._width,height:e._height})};this._onDragRightStart=function(){k.notifyObservers(e,"mousedown",{width:e._width,height:e._height});e._startWidth=e._width=e.getWidth();e._startLeft=e._left=e.getLeft();e._startHeight=e._height=e.getHeight();qqweb.layout.getClientWidth()};this._onDragRight=function(r){r=e._startWidth+
r.x;if(r<e.minWidth)r=e.minWidth;var o=(b.getClientWidth()||0)-e._startLeft-e._rightMargin;if(e.isLimited&&o<r)r=o;e.setWidth(r);k.notifyObservers(e,"resize",{width:e._width,height:e._height})};this._onDragBottomStart=function(){k.notifyObservers(e,"mousedown",{width:e._width,height:e._height});e._startHeight=e._height=e.getHeight();e._startTop=e._top=e.getTop();b.getClientHeight()};this._onDragBottom=function(r){r=e._startHeight+r.y;if(r<e.minHeight)r=e.minHeight;var o=(b.getClientHeight()||0)-e._startTop-
e._bottomMargin;if(e.isLimited&&o<r)r=o;e.setHeight(r);k.notifyObservers(e,"resize",{width:e._width,height:e._height})};this._onDragLeftTopStart=function(r){e._onDragLeftStart(r);e._onDragTopStart(r)};this._onDragLeftTop=function(r){e._onDragLeft(r);e._onDragTop(r)};this._onDragLeftBottomStart=function(r){e._onDragLeftStart(r);e._onDragBottomStart(r)};this._onDragLeftBottom=function(r){e._onDragLeft(r);e._onDragBottom(r)};this._onDragRightBottomStart=function(r){e._onDragRightStart(r);e._onDragBottomStart(r)};
this._onDragRightBottom=function(r){e._onDragRight(r);e._onDragBottom(r)};this._onDragRightTopStart=function(r){e._onDragRightStart(r);e._onDragTopStart(r)};this._onDragRightTop=function(r){e._onDragRight(r);e._onDragTop(r)};k.addObserver(this["_dragController_"+g.t],"start",this._onDragTopStart);k.addObserver(this["_dragController_"+g.t],"move",this._onDragTop);k.addObserver(this["_dragController_"+g.t],"end",this._onDragEnd);k.addObserver(this["_dragController_"+g.r],"start",this._onDragRightStart);
k.addObserver(this["_dragController_"+g.r],"move",this._onDragRight);k.addObserver(this["_dragController_"+g.r],"end",this._onDragEnd);k.addObserver(this["_dragController_"+g.b],"start",this._onDragBottomStart);k.addObserver(this["_dragController_"+g.b],"move",this._onDragBottom);k.addObserver(this["_dragController_"+g.b],"end",this._onDragEnd);k.addObserver(this["_dragController_"+g.l],"start",this._onDragLeftStart);k.addObserver(this["_dragController_"+g.l],"move",this._onDragLeft);k.addObserver(this["_dragController_"+
g.l],"end",this._onDragEnd);k.addObserver(this["_dragController_"+g.rb],"start",this._onDragRightBottomStart);k.addObserver(this["_dragController_"+g.rb],"move",this._onDragRightBottom);k.addObserver(this["_dragController_"+g.rb],"end",this._onDragEnd);k.addObserver(this["_dragController_"+g.rt],"start",this._onDragRightTopStart);k.addObserver(this["_dragController_"+g.rt],"move",this._onDragRightTop);k.addObserver(this["_dragController_"+g.rt],"end",this._onDragEnd);k.addObserver(this["_dragController_"+
g.lt],"start",this._onDragLeftTopStart);k.addObserver(this["_dragController_"+g.lt],"move",this._onDragLeftTop);k.addObserver(this["_dragController_"+g.lt],"end",this._onDragEnd);k.addObserver(this["_dragController_"+g.lb],"start",this._onDragLeftBottomStart);k.addObserver(this["_dragController_"+g.lb],"move",this._onDragLeftBottom);k.addObserver(this["_dragController_"+g.lb],"end",this._onDragEnd)},setWidth:function(i){b.setStyle(this.effectEl,"width",i+"px");this._width=i},setHeight:function(i){b.setStyle(this.effectEl,
"height",i+"px");this._height=i},setLeft:function(i){b.setStyle(this.effectEl,"left",i+"px");this._left=i},setTop:function(i){b.setStyle(this.effectEl,"top",i+"px");this._top=i},getWidth:function(){return parseInt(b.getStyle(this.effectEl,"width"))},getHeight:function(){return parseInt(b.getStyle(this.effectEl,"height"))},getLeft:function(){return parseInt(b.getStyle(this.effectEl,"left"))},getTop:function(){return parseInt(b.getStyle(this.effectEl,"top"))},getId:function(){return l++},lock:function(){for(var i in g)this["_dragController_"+
g[i]].lock()},unlock:function(){for(var i in g)this["_dragController_"+g[i]].unlock()},show:function(){for(var i in g)this["_dragController_"+g[i]].show()},hide:function(){for(var i in g)this["_dragController_"+g[i]].hide()},setLimite:function(i){i=i||{};if(this.isLimited=i.isLimited||true){this._leftMargin=i.leftMargin||0;this._topMargin=i.topMargin||0;this._rightMargin=i.rightMargin||0;this._bottomMargin=i.bottomMargin||0}},setMinLimite:function(i){i=i||{};this.minWidth=i.minWidth||0;this.minHeight=
i.minHeight||0}})});
Jx().$package(function(f){f.ui=f.ui||{};var b=f.dom,k=f.event,l,g=function(){if(!l){var c=b.node("div",{"class":"dragMask"}),h=b.node("div",{"class":"dragProxy"});c.appendChild(h);b.getDoc().body.appendChild(c);l={maskEl:c,proxyEl:h}}return l},i=new f.Class({_zIndex:1,_inBorder:5,_outBorder:5,_windowFlag:0,init:function(c){f.profile("windowCreat"+c.windowId,"baseWindow");c=this.parseOption(c);this.subWinMarginLeft=this.subWinWidth=0;this.desktopIndex=c.desktopIndex;this.setPrivateProperty();this.appendTo=
c.appendTo;if(f.isUndefined(this._windowId))throw"[BaseWindow.init]: _windowId is undefined!";this.createDom();b.setStyle(this._window_outer,"zIndex",this.option.zIndex);this.createEvent();this.option.hideWinBorder&&this.hideWinBorder();this.option.hasToolBar&&this.showToolBar()},parseOption:function(){throw"parseOption does not implement a required interface(Error in BaseWindow.parseOption())";},setPrivateProperty:function(){throw"setPrivateProperty does not implement a required interface(Error in BaseWindow.setPrivateProperty())";
},getTemplate:function(){throw"getTemplate does not implement a required interface(Error in BaseWindow.getTemplate())";},initObserver:function(){var c=this;this.observer={onMousedown:function(){if(!f.browser.ie){b.setStyle(c._dragProxy.proxyEl,"left",c.getX()+c._outBorder+"px");b.setStyle(c._dragProxy.proxyEl,"top",c.getY()+c._outBorder+"px");b.setStyle(c._dragProxy.proxyEl,"width",c._width-c._outBorder*2+"px");b.setStyle(c._dragProxy.proxyEl,"height",c._height-c._outBorder*2+"px");b.setStyle(c._dragProxy.maskEl,
"zIndex",60002);b.show(c._dragProxy.maskEl)}},onMove:function(h){c._x=h.x;c._y=h.y;if(c.subMode==1&&c.isSubWinFloat&&c.subWin){var e=b.getRelativeXY(c._subBodyOuter,c.container.parentNode);c.subWin.setXY(e[0],e[1]+(f.browser.ie?2:0))}if(c.subMode==2){e=c.getX();var q=c.getY();c.subWin.setXY(e+c.getWidth(),q)}k.notifyObservers(c,"dragMove",h)},onBeforeDragStart:function(){k.notifyObservers(c,"beforeDragStart")},onDragStart:function(h){k.notifyObservers(c,"dragStart",h)},onDragEnd:function(h){c.mask&&
c.mask.hide();k.notifyObservers(c,"dragEnd",h)},onResize:function(h){h.width&&c.setWinWidth(h.width);h.height&&c.setWinHeight(h.height);k.notifyObservers(c,"resize",c.getBodySize())},onDragProxyEnd:function(h){if(h){b.hide(c._dragProxy.maskEl);c.setXY(h.x-c._outBorder,h.y-c._outBorder)}},onDragProxyResizeEnd:function(h){b.hide(c._dragProxy.maskEl);c.setXY(h.x-c._outBorder,h.y-c._outBorder);c.setWidth(h.width+c._outBorder*2);c.setHeight(h.height+c._outBorder*2);k.notifyObservers(c,"resize",c.getBodySize())}}},
initDomReference:function(){throw"initDomReference does not implement a required interface(Error in BaseWindow.initDomReference())";},initButtons:function(){throw"initButtons does not implement a required interface(Error in BaseWindow.initButtons())";},createEvent:function(){throw"createEvent does not implement a required interface(Error in BaseWindow.createEvent())";},getAppId:function(){return this._appId},getButton:function(c){return this["_"+c+"Button"]||null},getWindowFlags:function(){return this._windowFlag},
setWindowFlags:function(c){this._windowFlag=c},createDom:function(){f.out("CreateDom","baseWindow");var c=this._windowId;this.getId=function(){return c};var h=this.getTemplate();this.container=b.node("div",{id:"appWindow_"+c,"class":"window window_current"});this.container.innerHTML=h;this.appendTo.appendChild(this.container);this.initDomReference();f.out("initDomReference","baseWindow");this.initObserver();f.out("initObserver","baseWindow");this.initButtons();f.out("initButtons","baseWindow");this._width=
Number(this._width);this._height=Number(this._height);this.setWidth(this._width);this.setHeight(this._height);this._toolbarHeight=0;!f.isUndefined(this.option.x)&&!f.isUndefined(this.option.y)&&this.setXY(this.option.x,this.option.y);this.setTitle(this.option.title);this.option.html&&this.setHtml(this.option.html)},getTitleBarHeight:function(){return this._titleBarHeight||(this._titleBarHeight=b.getHeight(this._titleBar))},setTitle:function(c){c=f.string.encodeHtml(c);if(this.option.titleIcon)c='<span class="window_title_icon" style="background:url('+
this.option.titleIcon+') no-repeat center center;">&nbsp;&nbsp;&nbsp;&nbsp;</span>'+c;this._title.innerHTML=c},setTitleHtml:function(c){this._title.innerHTML=c},setToolBarHtml:function(c){this._toolBar.innerHTML=c},showToolBarBtn:function(){b.show(this._toggleToolbar)},hideToolBarBtn:function(){b.hide(this._toggleToolbar)},setToolbar:function(c){c?this.showToolBar():this.hideToolBar()},toggleToolBar:function(){this._toolbarIsShow?this.hideToolBar():this.showToolBar()},showToolBar:function(){},hideToolBar:function(){this._toolbarIsShow=
false;b.hide(this._toolBar);b.setStyle(this.body,"top","0px");this._toolbarHeight=0;this.setHeight(this.getBodyHeight());b.replaceClass(this._toggleToolbar,"app_toolbar_toggle_up","app_toolbar_toggle_down");this._toggleToolbar.title="\u5c55\u5f00\u5de5\u5177\u6761";alloy.util.report2app("apptoolbar|close")},isToolBarShow:function(){return this._toolbarIsShow},getToolBarHeight:function(){return this._toolbarHeight},getToolBar:function(){return this._toolButtonBar},setButton:function(c){for(var h in c){var e=
!!c[h],q=[];switch(h){case "hasRefreshButton":break;default:switch(this.windowType){case "window":switch(h){case "hasMaxButton":q.push(this._maxButton);q.push(this._restoreButton);break;case "hasMinButton":q.push(this._minButton)}break;case "widget":switch(h){case "hasPinUpButton":q.push(this._pinUpButton);q.push(this._pinDownButton)}}}if(q.length){f.array.forEach(q,function(r){r&&r.setAvailability(e)});q=null}}},showCloseButton:function(){this._closeButton&&this._closeButton.show()},showFullButton:function(){this._fullButton&&
this._fullButton.hide()},showMaxButton:function(){this._restoreButton&&this._restoreButton.hide();this._maxButton&&this._maxButton.show()},showRestoreButton:function(){this._maxButton&&this._maxButton.hide();this._restoreButton&&this._restoreButton.show()},showMinButton:function(){this._minButton&&this._minButton.show()},showRefreshButton:function(){this._refreshButton&&this._refreshButton.show()},showPinUpButton:function(){this._pinDownButton&&this._pinDownButton.hide();this._pinUpButton&&this._pinUpButton.show()},
showPinDownButton:function(){this._pinUpButton&&this._pinUpButton.hide();this._pinDownButton&&this._pinDownButton.show()},disableOkButton:function(c){this._okButton.disable(c)},showControlButton:function(c){b.show(this._controlArea);b.setStyle(this.body,"bottom","29px");b.addClass(this._window_outer,"window_has_controlArea");c.show()},hideControlArea:function(){b.hide(this._controlArea);b.setStyle(this.body,"bottom","0");b.removeClass(this._window_outer,"window_has_controlArea")},getButtons:function(){if(this._buttons)return this._buttons},
show:function(){b.show(this.container);b.getStyle(this.container,"visibility")&&b.setStyle(this.container,"visibility","visible");f.info(">>>> Window: show","baseWindow");k.notifyObservers(this,"show",this.getBodySize());this._isShow=true},hide:function(c){c?b.setStyle(this.container,"visibility","hidden"):b.hide(this.container);k.notifyObservers(this,"hide");this._isShow=false},isShow:function(){return this._isShow},toggleShow:function(){this.isShow()?this.hide():this.show()},setCurrent:function(c){this.setCurrentWithoutFocus(c);
this.focus()},setNotCurrent:function(){this.setWindowFlags(this.getWindowFlags()&~i.CONST.WINDOW_FLAG_CURRENT|i.CONST.WINDOW_FLAG_NOT_CURRENT);this.setStyleNotCurrent();k.notifyObservers(this,"setNotCurrent")},setCurrentWithoutFocus:function(c){if(c&&c.fromInit&&this.windowType==="widget"){this.show();this.setNotCurrent()}else{if(!(this.getWindowFlags()&i.CONST.WINDOW_FLAG_CURRENT)){this.setStyleCurrent();this.show();this.setWindowFlags(this.getWindowFlags()|i.CONST.WINDOW_FLAG_CURRENT)}k.notifyObservers(this,
"setCurrent")}},setStyleCurrent:function(){b.addClass(this.container,"window_current")},setStyleNotCurrent:function(){this.container&&b.removeClass(this.container,"window_current")},focus:function(){k.notifyObservers(this,"focus")},setBoxStatus:function(c){this._status=c},getBoxStatus:function(){return this._status},adjustSize:function(c,h,e,q){!f.isUndefined(e)&&!f.isUndefined(q)&&this.setXY(e,q);this.setWinWidth(c);this.setWinHeight(h);k.notifyObservers(this,"resize",this.getBodySize())},max:function(){if(!(this.getWindowFlags()&
i.CONST.WINDOW_FLAG_FULLSCREEN)){this._restoreX=this._x;this._restoreY=this._y}var c=this.getBoxStatus();this.setDisableDrag();this.setWindowFlags(this.getWindowFlags()&~i.CONST.WINDOW_FLAG_NORMAL|i.CONST.WINDOW_FLAG_MAX);this.setBoxStatus("max");this.showRestoreButton();k.notifyObservers(this,"max",c);k.notifyObservers(this,"resize",this.getBodySize())},fullscreen:function(){if(this.getWindowFlags()&i.CONST.WINDOW_FLAG_NORMAL){this._restoreX=this._x;this._restoreY=this._y}this.setDisableDrag();this.setWindowFlags(this.getWindowFlags()|
i.CONST.WINDOW_FLAG_FULLSCREEN);this.setBoxStatus("fullscreen");this._maxButton.hide();this._restoreButton.hide();this._fullButton.hide();this._restorefullButton.show();k.notifyObservers(this,"fullscreen",this.getBodySize());k.notifyObservers(this,"resize",this.getBodySize())},restorefull:function(){this.getWindowFlags()&i.CONST.WINDOW_FLAG_NORMAL?this.restore():this.max();this.setWindowFlags(this.getWindowFlags()&~i.CONST.WINDOW_FLAG_FULLSCREEN);k.notifyObservers(this,"restorefull",this.getBoxStatus());
k.notifyObservers(this,"resize",this.getBodySize())},min:function(){var c=this.getBoxStatus();this.setWindowFlags(this.getWindowFlags()&~i.CONST.WINDOW_FLAG_CURRENT|i.CONST.WINDOW_FLAG_NOT_CURRENT|i.CONST.WINDOW_FLAG_MIN);if(this.option.isVisibilityMode)this.hide(true);else this.option.flashMode||this.hide();this.setBoxStatus(c||"min");this._isShow=false;k.notifyObservers(this,"min");k.notifyObservers(this,"resize",this.getBodySize())},restore:function(){this.setWindowFlags(this.getWindowFlags()&
~i.CONST.WINDOW_FLAG_MAX|i.CONST.WINDOW_FLAG_NORMAL);this.setXY(this._restoreX,this._restoreY);if(this._restoreWidth<0)this._restoreWidth=0;if(this._restoreHeight<0)this._restoreHeight=0;this.setWidth(this._restoreWidth);this.setHeight(this._restoreHeight);this._dragController&&this._dragController.lock();this.setEnableDrag();if(this.option.hasMaxButton){this.showMaxButton();this._restorefullButton.hide();this.option.noFullButton&&this._fullButton.hide()}this.setBoxStatus("restore");k.notifyObservers(this,
"restore");k.notifyObservers(this,"resize",this.getBodySize())},setZIndexLevel:function(c){this.zIndexLevel=c},getZIndexLevel:function(){return this.zIndexLevel},setLockZIndex:function(c){this._isLockZIndex=c},isLockZIndex:function(){return this._isLockZIndex},setWidth:function(c){this.setBodyWidth(c)},setWinWidth:function(c){c=c||this._width;var h=this.isBorderHide?0:10;this._bodyWidth=c-h*2-this.option.bodyBorder*2-this.subWinWidth-this.subWinMarginLeft;this._width=c;b.setStyle(this.container,"width",
c+"px");b.setStyle(this._bodyOuter,"width",this._bodyWidth+this.subWinWidth+this.subWinMarginLeft+"px");b.setStyle(this.body,"width",this._bodyWidth+"px");b.setStyle(this._window_outer,"padding",h+"px");if(this.getBoxStatus()!=="max"&&this.getBoxStatus()!=="fullscreen")this._restoreWidth=this._bodyWidth},setBodyWidth:function(c){c=c||this._bodyWidth;var h;h=this.option.bodyBorder*2;if(this.isBorderHide){h=c+h;b.setStyle(this._window_outer,"padding","0px")}else{h=c+h+20;b.setStyle(this._window_outer,
"padding","10px")}this._bodyWidth=c;this._width=h=h+this.subWinWidth+this.subWinMarginLeft;b.setStyle(this.container,"width",h+"px");b.setStyle(this._bodyOuter,"width",c+this.subWinWidth+this.subWinMarginLeft+"px");b.setStyle(this.body,"width",c+"px");if(this.getBoxStatus()!=="max"&&this.getBoxStatus()!=="fullscreen")this._restoreWidth=this._bodyWidth},getBodyWidth:function(){return this._bodyWidth},getWidth:function(){return this._width},getWinWidth:function(){return this._width},getHeight:function(){return this._height},
getWinHeight:function(){return this._height},setHeight:function(c){this.setBodyHeight(c)},setWinHeight:function(c){c=c||this._height;var h=this.getTitleBarHeight(),e=this.option.bodyBorder*2,q=0,r=0;if(this._controlArea&&b.isShow(this._controlArea))q=29;if(this._toolbarHeight)r=this._toolbarHeight;if(this.isBorderHide){q=c;b.setStyle(this._window_outer,"padding","0px");b.setStyle(this._bodyOuter,"top","0");h=c-e}else{q=c-h-r-q-20-e;b.setStyle(this._window_outer,"padding","10px");b.setStyle(this._bodyOuter,
"top",h+"px");h=c-20-e}if(f.browser.ie==6)h-=h%2;b.setStyle(this._window_outer,"height",h+"px");this._bodyHeight=q+1;this._height=c;b.setStyle(this.body,"height",this._bodyHeight-e+"px");b.setStyle(this._bodyOuter,"height",this._bodyHeight+r-e+"px");b.setStyle(this.container,"height",c+"px");if(this.getBoxStatus()!=="max"&&this.getBoxStatus()!=="fullscreen")this._restoreHeight=this._bodyHeight;k.notifyObservers(this,"setNewHeight",c)},setBodyHeight:function(c){c=c||this._bodyHeight;var h=this.getTitleBarHeight(),
e=this.option.bodyBorder*2,q=0,r=0;if(this._controlArea&&b.isShow(this._controlArea))q=29;if(this._toolbarHeight)r=this._toolbarHeight;if(this.isBorderHide){q=c;b.setStyle(this._window_outer,"padding","0px");b.setStyle(this._bodyOuter,"top","0");h=q-e}else{q=c+h+r+q+20+e;b.setStyle(this._window_outer,"padding","10px");b.setStyle(this._bodyOuter,"top",h+"px");h=q-20-e}if(f.browser.ie==6)h-=h%2;b.setStyle(this._window_outer,"height",h+"px");this._bodyHeight=c+1;this._height=q;b.setStyle(this.body,"height",
this._bodyHeight-e+"px");b.setStyle(this._bodyOuter,"height",this._bodyHeight+r-e+"px");b.setStyle(this.container,"height",q+"px");if(this.getBoxStatus()!=="max"&&this.getBoxStatus()!=="fullscreen")this._restoreHeight=this._bodyHeight;k.notifyObservers(this,"setNewHeight",this._height)},getBodyHeight:function(){return this._bodyHeight},setWinSize:function(c){this.setWinWidth(c.width);this.setWinHeight(c.height);k.notifyObservers(this,"resize",this.getBodySize())},setBodySize:function(c){this.setBodyWidth(c.width);
this.setBodyHeight(c.height);k.notifyObservers(this,"resize",this.getBodySize())},getZIndex:function(){return this._zIndex},setZIndex:function(c){b.setStyle(this.container,"zIndex",c);b.setStyle(this._window_inner,"zIndex",c);this._zIndex=c},setXY:function(c,h){if(c||c===0)this.setX(c);if(h||h===0)this.setY(h)},setX:function(c){this._x=c;b.setStyle(this.container,"left",c+"px");k.notifyObservers(this,"positionChanged")},setY:function(c){this._y=c;b.setStyle(this.container,"top",c+"px");k.notifyObservers(this,
"positionChanged")},getX:function(){return parseInt(b.getStyle(this.container,"left"))},getRestoreX:function(){return this._restoreX},getRestoreY:function(){return this._restoreY},getLeft:function(){return this._x},getY:function(){return parseInt(b.getStyle(this.container,"top"))},getXY:function(){return{x:this.getX(),y:this.getY()}},getRestoreXY:function(){return{x:this.getRestoreX(),y:this.getRestoreY()}},setLeft:function(c){b.setStyle(this.container,"left",c+"px");b.setStyle(this.container,"right",
"")},setTop:function(c){b.setStyle(this.container,"top",c+"px");b.setStyle(this.container,"bottom","")},setRight:function(c){b.setStyle(this.container,"right",c+"px");b.setStyle(this.container,"left","")},setBottom:function(c){b.setStyle(this.container,"bottom",c+"px");b.setStyle(this.container,"top","")},setWindowCentered:function(){k.notifyObservers(this,"setCenter")},setWindowCenteredRelative:function(c){this.setX(c.getX()+(c.getWidth()-this._width)/2)},enableDrag:function(){this.option.dragable=
true;this.getBoxStatus()!=="max"&&this.getBoxStatus()!=="fullscreen"&&this.setEnableDrag()},disableDrag:function(){this.option.dragable=false;this.setDisableDrag()},enableDragProxy:function(){this.option.dragProxy=true},disableDragProxy:function(){this.option.dragProxy=false},setEnableDrag:function(){if(this.option.dragable){if(this._dragController){this.option.dragProxy&&k.on(this.container,"mousedown",this.observer.onMousedown);this._dragController.unlock()}else{if(this.option.dragProxy){this._dragProxy=
g();k.on(this.container,"mousedown",this.observer.onMousedown);this._dragController=new f.ui.Drag(this.container,this._dragProxy.proxyEl,{isLimited:true,clientEl:this.option.dragLimitEl||this.option.appendTo,leftMargin:this._leftMargin+this._outBorder,topMargin:this._topMargin+this._outBorder,rightMargin:this._rightMargin+this._outBorder,bottomMargin:this._bottomMargin+this._outBorder,isOverLeft:true,isOverRight:true,isLockCursorInScreen:true});k.addObserver(this._dragController,"end",this.observer.onDragProxyEnd)}else{this._dragController=
new f.ui.Drag(this.container,this.container,{isLimited:true,clientEl:this.option.dragLimitEl||this.option.appendTo,leftMargin:this._leftMargin,topMargin:this._topMargin,rightMargin:this._rightMargin,bottomMargin:this._bottomMargin,isOverLeft:true,isOverRight:true,isLockCursorInScreen:true});k.addObserver(this._dragController,"move",this.observer.onMove)}k.addObserver(this._dragController,"beforeStart",this.observer.onBeforeDragStart);k.addObserver(this._dragController,"start",this.observer.onDragStart);
k.addObserver(this._dragController,"end",this.observer.onDragEnd)}this.setEnableResize()}},setDisableDrag:function(){if(this._dragController){this._dragController.lock();this.option.dragProxy&&k.off(this.container,"mousedown",this.observer.onMousedown)}this.setDisableResize()},setDragLimite:function(c){this._dragController.setLimite(c)},onDrag:function(c){f.browser.ie&&f.browser.ie<=6&&(c.target.tagName=="A"||c.target.parentNode&&c.target.parentNode.tagName=="A")||this.startDrag([c.pageX,c.pageY])},
startDrag:function(c){var h=this,e=h.container.children[0];b.hide(e);h.mask&&h.mask.remove();h.mask=new f.ui.MaskLayer({appendTo:h.container,opacity:0});h.mask.show();b.show(e);if(typeof c!="undefined"){e=b.getClientXY(this.body);this._dragController.dragStartIn(c[0]+e[0],c[1]+e[1])}else{var q=function(r){h._dragController.dragStart(r);k.off(document,"mousemove",q)};k.on(document,"mousemove",q)}},enableResize:function(){this.option.resize=true;this.getBoxStatus()!=="max"&&this.setEnableResize()},
disableResize:function(){this.option.dragable=false;this.setDisableResize()},setEnableResize:function(){if(this.option.resize)if(this._resizeController){this.option.dragProxy&&k.addObserver(this._resizeController,"mousedown",this.observer.onMousedown);this._resizeController.show()}else{if(this.option.dragProxy){this._dragProxy=g();this._resizeController=new f.ui.Resize(this._window_inner,this._dragProxy.proxyEl,{isLimited:true,leftMargin:this._leftMargin,topMargin:this._topMargin,rightMargin:this._rightMargin,
bottomMargin:this._bottomMargin,minWidth:this._minWidth,minHeight:this._minHeight,dragProxy:this._dragProxy});k.addObserver(this._resizeController,"mousedown",this.observer.onMousedown);k.addObserver(this._resizeController,"end",this.observer.onDragProxyResizeEnd)}else{this._resizeController=new f.ui.Resize(this._window_inner,this.container,{isLimited:true,leftMargin:this._leftMargin,topMargin:this._topMargin,rightMargin:this._rightMargin,bottomMargin:this._bottomMargin,minWidth:this._minWidth,minHeight:this._minHeight});
k.addObserver(this._resizeController,"resize",this.observer.onResize)}k.addObserver(this._resizeController,"mousedown",this.observer.onDragStart);k.addObserver(this._resizeController,"end",this.observer.onDragEnd)}},setDisableResize:function(){if(this._resizeController){this._resizeController.hide();this.option.dragProxy&&k.removeObserver(this._resizeController,"mousedown",this.observer.onMousedown)}},setLimite:function(c){c=c||{};if(this.isLimited){this._leftMargin=c.leftMargin;this._topMargin=c.topMargin;
this._rightMargin=c.rightMargin;this._bottomMargin=c.bottomMargin}},setMinLimite:function(c){if(this._resizeController){this._resizeController.setWidth(this._width);this._resizeController.setMinLimite(c)}},setHtml:function(c){this.html=c;this.body.innerHTML=c},setBorderOpacity:function(c){f.browser.ie&&f.browser.ie<9||b.setStyle(this._bg_container,"opacity",c)},setOpacity:function(c){f.browser.ie&&f.browser.ie<9||b.setStyle(this.container,"opacity",c)},append:function(c){this.body.appendChild(c)},
getSize:function(){return{width:b.getClientWidth(this.container),height:b.getClientHeight(this.container)}},getBodySize:function(){return{width:parseInt(b.getStyle(this.body,"width"),10),height:parseInt(b.getStyle(this.body,"height"),10)}},getSelfDomObj:function(){return this.container},hideWinBorder:function(){if(!this.isBorderHide){this.isBorderHide=true;b.hide(this._window_bg);b.hide(this._titleBar);this.setWidth(this.getBodyWidth());this.setHeight(this.getBodyHeight())}},showWinBorder:function(){if(this.isBorderHide){this.isBorderHide=
false;b.show(this._window_bg);b.show(this._titleBar);this.setWidth(this.getBodyWidth());this.setHeight(this.getBodyHeight())}},toggleWinBorder:function(){this.isBorderHide?this.showWinBorder():this.hideWinBorder()},setSubMode:function(c,h){switch(c){case 1:this.setSubWinInner(h);break;case 2:this.setSubWinFollow(h);break;default:this.setSubWinNone(h)}this.subMode=c},setSubWinInner:function(c){c=c||{};this.subMode=1;this.subWinWidth=this.subWinWidth||200;this.subWinMarginLeft=10;var h=this.getId();
if(this.getBoxStatus()!="fullscreen"&&this.getBoxStatus()!="max"){this.setBodyWidth(c.width||this._bodyWidth);this.setBodyHeight(c.height||this._bodyHeight)}else{this.setWinWidth();this.setWinHeight()}if(this._subBodyOuter)b.show(this._subBodyOuter);else{this._subBodyOuter=b.node("div",{"class":"window_bodyArea",id:"window_sub_body_"+h});this._bodyOuter.appendChild(this._subBodyOuter)}b.setStyle(this._subBodyOuter,"width",this.subWinWidth+"px");b.setStyle(this._subBodyOuter,"height",this._bodyHeight+
"px");b.setStyle(this._subBodyOuter,"right","5px");b.setStyle(this.subWin.container,"left","0");b.setStyle(this.subWin.container,"top","0");this.subWin.hideWinBorder();if(this.isSubWinFloat){h=b.getRelativeXY(this._subBodyOuter,this.container.parentNode);this.subWin.setXY(h[0],h[1]+(f.browser.ie?2:0))}else this._subBodyOuter.appendChild(this.subWin.container);this.setCurrent();c.isSubWinFloat&&this.subWin.setZIndex(this.getZIndex()+1);this.setMinLimite({minWidth:this._width,minHeight:this._height})},
hideSubWinInner:function(){this.subWinMarginLeft=this.subWinWidth=0;this.subWin.showWinBorder();this.setBodyWidth(this._bodyWidth);this._subBodyOuter&&b.hide(this._subBodyOuter);var c=this.getX(),h=this.getY();this.subWin.setXY(c+this.getWidth(),h);this.isSubWinFloat||this.subWin.option.appendTo.appendChild(this.subWin.container);c=this._restoreX;h=this._restoreY;if(this.getBoxStatus()=="fullscreen"){this.fullscreen();this._restoreX=c;this._restoreY=h;this._restoreWidth=this.option.width;this._restoreHeight=
this.option.height}else if(this.getBoxStatus()=="max"){this.max();this._restoreX=c;this._restoreY=h;this._restoreWidth=this.option.width;this._restoreHeight=this.option.height}else{this.setWidth(this.option.width);this.setHeight(this.option.height)}this.setMinLimite({minWidth:this._minWidth,minHeight:this._minHeight})},setSubWinFollow:function(){this.subMode!=2&&this.removeSubordinate();this.subMode=2;var c=this.getX(),h=this.getY();this.subWin.setXY(c+this.getWidth(),h);var e=this,q=function(){e.setSubWinNone();
k.removeObserver(this.subWin._dragController,"move",q)};k.addObserver(this.subWin._dragController,"move",q)},setSubWinNone:function(){if(this.subMode!=0){this.subMode=0;this.hideSubWinInner()}},getSubMode:function(){return this.subMode},addSubordinate:function(c,h){if(!this.subWin){this.subWin=c;if(h.subWinWidth)this.subWinWidth=h.subWinWidth;var e=!h||!h.mode?1:h.mode;this.isSubWinFloat=h.isSubWinFloat?true:false;this.setSubMode(e,h)}},removeSubordinate:function(){if(this.subWin){this.setSubMode(0);
this.subWin=null;this.subWinWidth=0;this.isSubWinFloat=false}},close:function(){if(k.notifyObservers(this,"beforeClose",this)===false)return false;if(k.notifyObservers(this,"close",this)===false)return false;this.destroy();k.notifyObservers(this,"afterClose",this)},destroy:function(){k.notifyObservers(this,"destroy",this);var c=this.container.parentNode;this.container.innerHTML="";c.removeChild(this.container);for(var h in this)this.hasOwnProperty(h)&&delete this[h];this._isDestroy=true},isDestroy:function(){return this._isDestroy}});
i.CONST={WINDOW_FLAG_MIN:1,WINDOW_FLAG_NORMAL:2,WINDOW_FLAG_MAX:4,WINDOW_FLAG_CURRENT:8,WINDOW_FLAG_NOT_CURRENT:16,WINDOW_FLAG_FULLSCREEN:32};f.ui.BaseWindow=i});
Jx().$package(function(f){var b=f.dom,k=f.event,l=new f.Class({init:function(g){g=g||{};this.id=g.id;this.name=g.name;this.container=g.container;this.body=g.body||g.container;g.html=g.html||"";g.html&&this.setHtml(g.html);b.isShow(this.container)?this.show():this.hide()},setHtml:function(g){this.html=g;this.body.innerHTML=g},append:function(g){this.body.appendChild(g)},getSize:function(){return{width:b.getClientWidth(this.container),height:b.getClientHeight(this.container)}},getBodySize:function(){return{width:parseInt(b.getStyle(this.body,
"width"),10),height:parseInt(b.getStyle(this.body,"height"),10)}},show:function(){b.show(this.container);k.notifyObservers(this,"show",this.getBodySize());this._isShow=true},hide:function(){b.hide(this.container);k.notifyObservers(this,"hide");this._isShow=false},isShow:function(){return this._isShow},toggleShow:function(){this.isShow()?this.hide():this.show()},getZIndex:function(){return this._zIndex},setZIndex:function(g){b.setStyle(this.container,"zIndex",g);this._zIndex=g},setXY:function(g,i){this.setX(g);
this.setY(i)},setX:function(g){b.setStyle(this.container,"left",g+"px")},setY:function(g){b.setStyle(this.container,"top",g+"px")},setWidth:function(g){b.setStyle(this.container,"width",g+"px")},getWidth:function(){return parseInt(b.getStyle(this.container,"width"))},setHeight:function(g){b.setStyle(this.container,"height",g+"px")},getHeight:function(){return parseInt(b.getStyle(this.container,"height"))}});f.ui=f.ui||{};f.ui.Panel=l});
Jx().$package(function(f){var b=f.dom,k=f.event;f.ui=f.ui||{};var l=new f.Class({init:function(g){var i=this;g=g||{};this._id=g.id||(new Date).getTime();g.name=g.id;g.width=g.width||300;g.height=g.height||300;g.appendTo=g.appendTo||document.body;g.zIndex=g.zIndex||1;var c=b.node("div",{"class":"ui_boxy"});c.innerHTML='                <div style="position:relative; z-index:1;"><div class="ui_boxyClose" id="ui_boxyClose_'+this._id+'"></div></div>                <div class="ui_boxyWrapper" id="ui_boxyWrapper_'+
this._id+'"></div>                ';g.appendTo.appendChild(c);g.container=c;g.body=b.id("ui_boxyWrapper_"+this._id);this._option=g;this._panel=new f.ui.Panel(g);this._panel.setWidth(g.width);this._panel.setHeight(g.height);if(g.modal){this._maskLayer=new f.ui.MaskLayer({appendTo:g.appendTo,zIndex:g.zIndex,opacity:0.5});this._maskLayer.show()}this._panel.setZIndex(g.zIndex+1);this.setCenter(g);new f.ui.Drag(c,c,{isLimited:true});c=b.id("ui_boxyClose_"+this._id);this._wrapper=b.id("ui_boxyWrapper_"+
this._id);k.on(c,"click",function(){i.close();g.onClose&&g.onClose.apply(i);k.notifyObservers(i,"close")})},getPanel:function(){return this._panel},show:function(){this._panel.show()},hide:function(){this._panel.hide()},setZIndex:function(g){this._panel.setZIndex(g)},setCenter:function(g){var i=b.getClientWidth(),c=b.getClientHeight();this._panel.setXY(i>g.width?(i-g.width)/2:0,c>g.height?(c-g.height)/2:0)},isShow:function(){return this._panel.isShow()},close:function(){this._maskLayer&&this._maskLayer.remove();
this._option.appendTo.removeChild(this._option.container)}});f.ui.Boxy=l});
Jet().$package(function(f){var b=f.dom,k=f.event;f.ui=f.ui||{};var l=f.ui.Bubble=f.Class({init:function(g){g=g||{};g=this.option=f.extend({bubbleParent:document.body,className:"",hasCloseButton:true,closeOnHide:false,zIndex:1E6},g);var i=this._getId(),c='<div id="bubble_tip_pointer_'+i+'" class="bubble_tip_pointer bubble_tip_pointer_left"></div>                <div class="bubble_tip_head"></div>                <div class="bubble_tip_body">                    <div class="bubble_tip_title"><a id="bubble_tip_close_'+i+
'" href="###" class="bubble_tip_close" title="\u5173\u95ed">x</a>                        <span id="bubble_tip_title_'+i+'"></span></div>                    <div id="bubble_tip_content_'+i+'" class="bubble_tip_content"></div>                </div>                <div id="bubble_tip_foot_'+i+'" class="bubble_tip_foot">                    <a id="bubble_tip_btn_next_'+i+'" href="###" class="bubble_tip_btn"></a>                    <a id="bubble_tip_btn_ok_'+i+'" href="###" class="bubble_tip_btn"></a>                </div>                <iframe width="100%" height="100%" class="bubble_tip_bg_iframe" src="about:blank"></iframe>',
h=b.node("div",{"class":"bubble_tip_container "+g.className});h.innerHTML=c;b.setCssText(h,"left: -10000px; top: 0px; z-index: "+g.zIndex+";");g.bubbleParent.appendChild(h);this._container=h;this._title=b.id("bubble_tip_title_"+i);this._content=b.id("bubble_tip_content_"+i);this._pointer=b.id("bubble_tip_pointer_"+i);this._okBtn=b.id("bubble_tip_btn_ok_"+i);this._nextBtn=b.id("bubble_tip_btn_next_"+i);this._closeBtn=b.id("bubble_tip_close_"+i);g.hasCloseButton||b.hide(this._closeBtn);var e=this;g=
{onCloseBtnClick:function(q){q.preventDefault();q.stopPropagation();k.notifyObservers(e,"onBubbleClose",e);e.hide()},onOkButtonClick:function(q){q.preventDefault();q.stopPropagation();k.notifyObservers(e,"onBubbleOkBtnClick",e);e.hide()},onNextButtonClick:function(q){q.preventDefault();q.stopPropagation();k.notifyObservers(e,"onBubbleNextBtnClick",e)}};k.on(this._closeBtn,"click",g.onCloseBtnClick);k.on(this._okBtn,"click",g.onOkButtonClick);k.on(this._nextBtn,"click",g.onNextButtonClick)},getElement:function(){return this._container},
show:function(g){g=g||{};g=f.extend({pointerPosition:"top right",pointerOffset:20,pointerSize:[18,12],position:[0,0],target:null,targetOffset:[0,0]},g);if(!this._checkPointerPosition(g.pointerPosition))throw Error("Bubble >>>> the pointerPosition's value is not correct");this._setPointerPosition(g.pointerPosition,g.pointerOffset);this._setBubblePosition(g);b.show(this._container)},setZIndex:function(g){b.setStyle(this._container,"zIndex",g)},setContainerStyle:function(g,i){b.setStyle(this._container,
g,i)},setTitle:function(g){this._title.innerHTML=g},setContent:function(g){this._content.innerHTML=g},showButton:function(g,i,c){g=this["_"+g+"Btn"];c=f.isUndefined(c)?false:true;if(g){g.innerHTML=i;b.show(g);c?b.addClass(g,"bubble_tip_btn_next"):b.addClass(g,"bubble_tip_btn_ok")}return g},hideButton:function(g){(g=this["_"+g+"Btn"])&&b.hide(g)},hide:function(){b.hide(this._container);this.option.closeOnHide&&this.close()},close:function(){if(this._isClosed)f.warn("Trying to close a closed bubbleTip!",
"BubbleTip");else{this._isClosed=true;k.off(this._closeBtn,"click");k.off(this._okBtn,"click");k.off(this._nextBtn,"click");this._container.parentNode&&this._container.parentNode.removeChild(this._container);for(var g in this)this.hasOwnProperty(g)&&delete this[g]}},isClose:function(){return this._isClosed},_getId:function(){if(!l.__id)l.__id=0;return l.__id++},_setPointerPosition:function(g,i){var c=g.split(" "),h=this._pointer;b.setClass(h,"bubble_tip_pointer bubble_tip_pointer_"+c[0]);b.setCssText(h,
"");b.setStyle(h,c[1],i+"px")},_setBubblePosition:function(g){var i=g.position;if(g.target){var c=g.pointerPosition.split(" "),h=this._calculateBubblePosition(g.target,g.pointerSize,g.pointerOffset),e=0;if(/top|bottom/.test(c[0]))e=1;i[0]=h[c[e]+e];e=(e+1)%2;i[1]=h[c[e]+e]}c=i[1]+g.targetOffset[1];b.setStyle(this._container,"left",i[0]+g.targetOffset[0]+"px");b.setStyle(this._container,"top",c+"px")},_calculateBubblePosition:function(g,i,c){var h=this._container,e=b.getClientXY(g),q=b.getOffsetWidth(h);
h=b.getOffsetHeight(h);var r=b.getWidth(g);g=b.getHeight(g);var o=e[0];e=e[1];c=c+i[0]/2;i=i[1];return{top0:e+g+i,bottom0:e-h-i,left0:o+r+i,right0:o-q-i,top1:e+g/2-c,bottom1:e+g/2-h+c,left1:o+r/2-c,right1:o+r/2-q+c}},_checkPointerPosition:function(g){g=g.split(" ");var i=/left|right/,c=/top|bottom/;if(c.test(g[0])&&i.test(g[1]))return true;else if(i.test(g[0])&&c.test(g[1]))return true;return false}})});
Jx().$package(function(f){var b=f.dom,k=f.string,l=f.event,g=0;f.ui=f.ui||{};f.ui.Button=new f.Class({_class:"ui_button",_available:true,_shownInLogic:false,_getButtionId:function(){return g++},init:function(i){i=i||{};var c=this._getButtionId(),h={appendTo:b.getDocumentElement(),className:"",text:"",title:""};f.extend(h,i);this._node=b.node("a",{id:"ui_button_"+c,"class":this._class+" "+k.encodeScript(h.className),title:k.encodeScript(h.title),hidefocus:"",href:"###"});this._node.innerHTML=k.encodeHtml(h.text);
h.appendTo.appendChild(this._node);h.event&&this.attachEvent(h.event);if(h.isStopPropagation){l.on(this._node,"mousedown",function(e){e.stopPropagation()});l.on(this._node,"click",function(e){e.stopPropagation()})}},attachEvent:function(i){for(var c in i)l.on(this._node,c,i[c])},removeEvent:function(i){for(var c in i)l.off(this._node,c,i[c])},setAvailability:function(i){this._available=!!i;this._shownInLogic&&b[this._available?"show":"hide"](this._node)},hide:function(){this._shownInLogic=false;if(this._available){b.hide(this._node);
l.notifyObservers(this,"hide")}},show:function(){this._shownInLogic=true;if(this._available){b.show(this._node);l.notifyObservers(this,"show")}},setText:function(i){this._node.innerHTML=k.encodeHtml(i)},setTitle:function(i){this._node.title=k.encodeScript(i)},getNode:function(){return this._node},disable:function(i){(i=i||false)?b.addClass(this._node,"window_button_disabled"):b.removeClass(this._node,"window_button_disabled")}})});
Jx().$package(function(f){var b=f.event,k=null;f.ui=f.ui||{};var l=new f.Class({extend:f.ui.Panel},{init:function(g){this.parentPopupBox=g.parentPopupBox;l.callSuper(this,"init",g);var i=this;this.catchMouseUp=true;if(g.noCatchMouseUp)this.catchMouseUp=false;this.closeOnEsc=true;if(g.noCloseOnEsc)this.closeOnEsc=false;this.onDocumentKeydown=function(c){if(c.keyCode===27){c.preventDefault();i.hide()}};this.onMouseUp=function(){i.isShow()&&i.hide()};this.onDocumentClick=function(){i.hide()};this.onWindowResize=
function(){i.hide()}},show:function(){k&&this.parentPopupBox!=k&&k.hide();this.catchMouseUp&&b.on(document.body,"mouseup",this.onMouseUp);this.closeOnEsc&&b.on(document,"keydown",this.onDocumentKeydown);b.on(document.body,"click",this.onDocumentClick);b.on(window,"resize",this.onWindowResize);this.parentPopupBox||(k=this);l.callSuper(this,"show")},hide:function(){b.off(document.body,"click",this.onDocumentClick);b.off(document,"keydown",this.onDocumentKeydown);b.off(window,"resize",this.onWindowResize);
b.off(document.body,"mouseup",this.onMouseUp);if(k)if(!this.parentPopupBox){k!==this&&k.hide();k=null}l.callSuper(this,"hide")},destroy:function(){this.container.parentNode.removeChild(this.container)}});f.ui.PopupBox=l});
Jet().$package(function(f){var b=f.dom,k=f.event,l=0,g=0,i={},c={},h=function(a){a.preventDefault();a.stopPropagation()};f.ui=f.ui||{};var e=f.ui.ContextMenu=new f.Class({init:function(a){var d=this,m=this.id="context_menu_"+(a.id||l++),n=a.name||m,s=this._parent=a.container||(a.parentMenu?a.parentMenu._parent:null)||document.body,u=a.className||"";this.parentMenu=a.parentMenu;d=this;var x=this._el=b.id(m)||b.node("div",{id:m,"class":"context_menu",style:"display: none;"});u='<div class="context_menu_container "'+
u+'"><ul id="'+m+'_body" class="context_menu_item_list"></ul></div>';if(f.browser.ie)u+='<iframe class="context_menu_iframe" src="'+alloy.CONST.MAIN_URL+'domain.html"></iframe>';x.innerHTML=u;s.appendChild(x);a.width&&b.setStyle(x,"width",a.width+"px");this._body=b.id(m+"_body");k.off(x,"contextmenu");k.on(x,"contextmenu",h);k.addObserver(document,"beforeStart",function(){d.isShow()&&d.hide()});this._popupBox=new f.ui.PopupBox({id:m,name:n,noCatchMouseUp:true,parentPopupBox:this.parentMenu?this.parentMenu._popupBox:
null,container:x});k.addObserver(this._popupBox,"hide",function(){d.hideSubmenu();k.notifyObservers(d,"onHide")});this.setZIndex(9E6);this._itemArr=[];this._key2Item={};if(a.items){this._items_config=a.items;this.addItems(a.items)}if(a.triggers){n=a.triggerEvent||"contextmenu";s=function(v){v.preventDefault();d.show(v.clientX,v.clientY)};for(x=0;u=a.triggers[x];x++)k.on(u,n,s)}a.beforeShow&&k.addObserver(this,"BeforeShow",a.beforeShow);i[m]=this},getId:function(){return this.id},setClass:function(a){b.setClass(this._el,
"context_menu "+a)},addItem:function(a){var d=a.type||"item";a.parentMenu=this;switch(d){case "item":a=new q(a);break;case "flash":a=new r(a);break;case "separator":a=new o(a);break;case "submenu":a.parentMenu=this;a=new j(a);break;default:a=null}if(a){this._body.appendChild(a.getElement());this._itemArr.push(a)}},addItems:function(a){for(var d=0,m=a.length;d<m;d++)this.addItem(a[d])},refresh:function(){if(this._items_config){this.clearItems();this.addItems(this._items_config)}},clearItems:function(){for(var a=
this._itemArr.shift();a;){this._body.removeChild(a.getElement());a.destory();a=this._itemArr.shift()}},removeItemAt:function(a){for(var d=0;d<this._itemArr.length;d++){var m=this._itemArr[d];if(a==d&&m){this._body.removeChild(m.getElement());m.destory();this._itemArr.splice(d,1)}}},getItemAt:function(a){if(a<this._itemArr.length){if(a<0)a=this._itemArr.length+a;return this._itemArr[a]}else return null},getElement:function(){return this._el},getBody:function(){return this._body},setZIndex:function(a){this._popupBox.setZIndex(a)},
getZIndex:function(){return this._popupBox.getZIndex()},setArgument:function(a){this._argument=a},getArgument:function(){return this._argument},show:function(a,d,m,n){k.notifyObservers(this,"BeforeShow",this);a=a||0;d=d||0;m=typeof m==="undefined"?5:m;var s=this._popupBox,u=a+m,x=d+m,v=0,E=0,D=f.browser.ie;if(n){v=b.getOffsetWidth(n);E=b.getOffsetHeight(n);u+=v+5;x-=1;if(D==9||D==8)u+=2}s.setX("-10000");s.show();n=b.getClientWidth(this._el);var K=b.getClientHeight(this._el),J=b.getClientWidth(),z=
b.getClientHeight();if(u+n>J&&a-n-m>0)if(v){u=a-n-m-5;if(D==9||D==8)u+=2}else u=a-n-m;if(x+K>z&&d-K-m>0)x=E?d-K-m+E+1:d-K-m;s.setXY(u,x);k.notifyObservers(this,"onShow",this)},hide:function(){this._popupBox.hide();k.notifyObservers(this,"onHide",this)},hideSubmenu:function(){for(var a in this._itemArr)this._itemArr[a].getSubmenu&&this._itemArr[a].getSubmenu().hide()},isShow:function(){return this._popupBox.isShow()},destory:function(){this._el.innerHTML="";k.off(this._el,"contextmenu");this.clearItems();
for(var a in this)this.hasOwnProperty(a)&&delete this[a]}});e.getMenu=function(a){return i[a]};var q=f.ui.ContextMenuItem=new f.Class({init:function(a){var d={title:a.title||a.text||"",text:a.text||"",link:a.link||"javascript:void(0);",icon:a.icon||null,enable:typeof a.enable==="undefined"?true:a.enable,onClick:a.onClick||null,argument:a.argument};this.option=d;this.parentMenu=a.parentMenu;a=this._el=b.node("li",{"class":"context_menu_item_container"});this.render();d.enable?this.enable():this.disable();
var m=this;k.on(a,"click",d.onClick?function(n){n.preventDefault();m._isEnable&&d.onClick.call(this,n,m,m.parentMenu)}:function(n){n.preventDefault()})},setText:function(a,d){this.option.text=a;this.option.title=d||a;this.render()},setIcon:function(a){this.option.icon=a;this.render()},render:function(){var a=this.option,d='<a class="context_menu_item" href="'+a.link+'" title="'+a.title+'">';if(a.icon){var m=a.icon;d+='<span class="context_menu_item_icon '+(m.className||"")+'" style="'+((m.style||
"")+(m.url?"background-image: url("+m.url+");":""))+'"></span>'}d+='<span class="context_menu_item_text">'+a.text+"</span>";d+="</a>";this._el.innerHTML=d},getElement:function(){return this._el},show:function(){b.show(this._el)},hide:function(){b.hide(this._el)},disable:function(){this._isEnable=false;b.addClass(this._el,"context_menu_item_disable")},enable:function(){this._isEnable=true;b.removeClass(this._el,"context_menu_item_disable")},destory:function(){this._el.innerHTML="";k.off(this._el,"click");
for(var a in this)this.hasOwnProperty(a)&&delete this[a]}}),r=f.ui.FlashContextMenuItem=new f.Class({init:function(a){var d={title:a.title||a.text||"",text:a.text||"",link:a.link||"javascript:void(0);",icon:a.icon||null,enable:typeof a.enable==="undefined"?true:a.enable,onClick:a.onClick||null,folderId:a.folderId||-1,argument:a.argument};this.option=d;this.parentMenu=a.parentMenu;a=this._el=b.node("li",{"class":"context_menu_item_container"});var m=this._flashLi=b.node("li",{"class":"context_menu_item_container"}),
n=this._itemId="context_menu_flashItem_"+ ++g;n=this._flashUl=b.node("ul",{id:n,"class":"context_menu_item_list context_menu_flashitem_item"});c[g]=n;n.appendChild(m);this.render();document.body.appendChild(n);d.enable?this.enable():this.disable();var s=this;k.on(a,"click",d.onClick?function(u){u.preventDefault();s._isEnable&&d.onClick.call(this,u,s,s.parentMenu)}:function(u){u.preventDefault()});s=this;a={onShow:function(){var u=b.getClientXY(s._el),x=0,v=0;if(f.browser.ie){v=x=2;if(f.browser.ie==
6||f.browser.ie==7)v=1}b.setXY(s._flashUl,u[0]+x+"px",u[1]+v+"px");b.setStyle(s._flashUl,"width",b.getClientWidth(s._el)+"px");b.setStyle(s._flashUl,"height",b.getClientHeight(s._el)+"px");b.setStyle(s._flashUl,"zIndex",s.parentMenu.getZIndex()+1);alloy.portal.getLoginLevel()>1&&alloy.storage.getDefaultDisk()?s._flashUploader.showFileSelector():s._flashUploader.hideFileSelector()},onHide:function(){b.setXY(s._flashUl,0,0);b.setStyle(s._flashUl,"width","1px");b.setStyle(s._flashUl,"height","1px")}};
k.addObserver(this.parentMenu,"onShow",a.onShow);k.addObserver(this.parentMenu,"onHide",a.onHide)},setText:function(){},setIcon:function(){},render:function(){var a=this.option;this._el.innerHTML='<a class="context_menu_item" href="'+a.link+'"></a>';var d='<a class="context_menu_item" href="'+a.link+'" title="'+a.title+'">';if(a.icon){var m=a.icon;d+='<span class="context_menu_item_icon '+(m.className||"")+'" style="'+((m.style||"")+(m.url?"background-image: url("+m.url+");":""))+'"></span>'}d+='<div class="explorer_upload_holder2" style="padding:0 5px"></div>';
d+="</a>";this._flashLi.innerHTML=d;a={callback:"alloy.flashUploadManager.flashEventListener",mode:0,autoshow:false,holder:b.mini(".explorer_upload_holder2",this._flashLi)[0],text:'<span class="context_menu_item_text">'+a.text+"</span>",width:"100%",height:"100%",extInfo:'{"folderId":'+this.option.folderId+"}"};this._flashUploader=new alloy.flashUploadManager.FlashUploader(a);b.setXY(this._flashUl,0,0);b.setStyle(this._flashUl,"width","1px");b.setStyle(this._flashUl,"height","1px")},getElement:function(){return this._el},
show:function(){b.show(this._el)},hide:function(){b.hide(this._el)},disable:function(){this._isEnable=false;b.addClass(this._el,"context_menu_item_disable")},enable:function(){this._isEnable=true;b.removeClass(this._el,"context_menu_item_disable")},destory:function(){this._el.innerHTML="";this._flashUl.innerHTML="";document.body.removeChild(this._flashUl);k.off(this._el,"click");for(var a in this)this.hasOwnProperty(a)&&delete this[a]}});r.getItem=function(a){return c[a]};var o=f.ui.ContextMenuSeparator=
new f.Class({init:function(){(this._el=b.node("li",{"class":"context_menu_separator_container"})).innerHTML='<span class="context_menu_separator"></span>'},getElement:function(){return this._el},show:function(){b.show(this._el)},hide:function(){b.hide(this._el)},destory:function(){this._el.innerHTML="";for(var a in this)this.hasOwnProperty(a)&&delete this[a]}}),j=f.ui.ContextSubmenuItem=new f.Class({extend:q},{init:function(a){if(!a.items)throw Error("J.ui.ContextSubmenuItem: option.items is null!");
a.title=a.title||a.text||"";var d={title:null,text:"",autoHide:true,link:"javascript:void(0);",icon:null,enable:true,subWidth:null,parentMenu:a.parentMenu};delete a.parentMenu;a=this.option=f.extend(d,a);this.parentMenu=a.parentMenu;var m=this._el=b.node("li",{"class":"context_menu_item_container"});this.render();a.enable?this.enable():this.disable();this._submenu=new e({parentMenu:a.parentMenu,width:a.subWidth,beforeShow:a.beforeShow,items:a.items});var n=this,s=n.sunmenuTimer=0,u=function(){n._submenu.isShow()&&
n._submenu.hide()},x={onItemMouseenter:function(v){v.stopPropagation();if(n._isEnable){v=b.getClientXY(this);n._submenu.setZIndex(n.parentMenu.getZIndex());n._submenu.show(v[0],v[1],0,this)}},onItemMouseleave:function(){if(s){window.clearTimeout(s);s=0}s=window.setTimeout(u,200)},onSubmenuMouseenter:function(){if(s){window.clearTimeout(s);s=0}b.addClass(m,"context_menu_item_hover")},onSubmenuMouseleave:function(v){x.onItemMouseleave(v)},onSubmenuShow:function(){b.addClass(m,"context_menu_item_hover")},
onSubmenuHide:function(){b.removeClass(m,"context_menu_item_hover")}};d=n._submenu.getElement();k.on(m,"mouseenter",x.onItemMouseenter);if(a.autoHide){k.on(m,"mouseleave",x.onItemMouseleave);k.on(d,"mouseenter",x.onSubmenuMouseenter);k.on(d,"mouseleave",x.onSubmenuMouseleave)}k.addObserver(n._submenu,"onHide",x.onSubmenuHide);k.on(m,"click",a.onClick?function(v){v.preventDefault();if(n._isEnable){a.onClick.call(this,v,n);x.onItemMouseenter.call(this,v)}}:function(v){v.preventDefault();x.onItemMouseenter.call(this,
v)})},getSubmenu:function(){return this._submenu},render:function(){var a=this.option,d='<a class="context_menu_item" href="'+a.link+'" title="'+a.title+'">';if(a.icon){var m=a.icon;d+='<span class="context_menu_item_icon '+(m.className||"")+'" style="'+((m.style||"")+(m.url?"background-image: url("+m.url+");":""))+'"></span>'}d+='<span class="context_menu_item_text">'+a.text+'</span><span class="context_menu_item_subicon"></span></a>';this._el.innerHTML=d}})});
Jet().$package(function(f){var b=f.dom,k=f.event;f.ui=f.ui||{};f.ui.DivSelect=new f.Class({init:function(l,g,i,c,h,e){this._selectName=g;this._dataObj=i;this._selOption=c;this._isUpper=e||false;i=i.data;l=document.getElementById(l);if(!l||typeof l==="undefined")return false;e=document.createElement("div");if(isNaN(h)||h=="")h=150;else if(h<26)h=26;e.style.width=h;var q="";if(this._isUpper){e.style.position="relative";var r=15*i.length;q="top:-"+((r>150?150:r)+4)+"px;"}r="";if(i.length>0){r+="<input type='hidden' name='"+
g+"' id='"+g+"' value='"+this.relv(c,i)+"'>";r+="<div id='_a_"+g+"' style='width:"+h+"px;height:18px; border:1px #728EA4 solid;'>";r+="<div id='_v_"+g+"' style='position:relative;float:left;left:2px;width:"+(h-22)+"px;height:18px;font-size:12px;overflow:hidden;line-height:18px;'>"+this.reStr(i,c)+"</div>";r+="<div id='_arr_"+g+"' class='divSelect_arr' style='position:relative;float:right;right:0px;width:18px;height:18px;text-align:center;font-family:Webdings;font-size:16px;overflow:hidden;background-color:#FFF;cursor:pointer!important;cursor:hand;'></div>";
r+="</div>";r+="<div id='_b_"+g+"' style='position:absolute; background-color:#FFFFFF; width:"+h+"px; height:"+this.height(i.length)+"px;border:1px #728EA4 solid;overflow-x:hidden;overflow-y:auto;display:none; z-index:99999;"+q+"'>";for(h=0;h<i.length;h++){q=i[h][0]==c?this.style(2):this.style(1);r+="<div id='_s_"+g+h+"' style='"+q+"' >"+i[h][1]+"</div>"}r+="</div>"}else{r+="<input type='hidden' name='"+g+"' id='"+g+"' value='"+c+"'>";r+="<div id='_a_"+g+"' style='width:"+h+"px;height:18px; border:1px #728EA4 solid;'>";
r+="<div id='_v_"+g+"' style='position:relative;float:left;left:2px;width:"+(h-22)+"px;height:18px;font-size:12px;overflow:hidden;line-height:18px;'></div>";r+="<div id='_arr_"+g+"' class='divSelect_arr' style='position:relative;float:right;right:0px;width:18px;height:18px;text-align:center;font-family:Webdings;font-size:16px;overflow:hidden;background-color:#FFF;cursor:pointer!important;cursor:hand;'></div>";r+="</div>";r+="<div id='_b_"+g+"' style='position:absolute; background-color:#FFFFFF; width:"+
h+"px; height:"+this.height(0)+"px;border:1px #728EA4 solid;overflow-x:hidden;overflow-y:auto;display:none; z-index:99999;'></div>"}e.innerHTML=r;l.appendChild(e);var o=this;c=function(){o.showOptions()};k.on(b.id("_v_"+g),"click",c);k.on(b.id("_arr_"+g),"click",c);if(i.length>0){c=function(){o.css(this,3)};l=function(){o.css(this,1)};e=function(){o.selected(this)};for(h=0;h<i.length;h++){k.on(b.id("_s_"+g+h),"mouseover",c);k.on(b.id("_s_"+g+h),"mouseout",l);k.on(b.id("_s_"+g+h),"click",e)}}},value:function(l){l=
l||this._selectName;return document.getElementById(l).value},text:function(l){l=l||this._selectName;return document.getElementById("_v_"+l).innerHTML},selected:function(l){for(var g=this._dataObj.data,i=l.innerHTML,c=0;c<g.length;c++){if(g[c][1]===i)b.id(this._selectName).value=g[c][0];b.id("_s_"+this._selectName+c).style.cssText=this.style(1)}b.id("_v_"+this._selectName).innerHTML=i;l.style.cssText=this.style(2);this.hidden();k.notifyObservers(this,"selectedChanged")},relv:function(l,g){for(var i=
0;i<g.length;i++)if(g[i][0]==l)return l;if(l==null||l=="")return g[0][0]},reStr:function(l,g){for(var i=0;i<l.length;i++)if(l[i][0]==g)return l[i][1];if(g==null||g=="")return l[0][1]},height:function(l){l=l>10||l<1?150:l*15;l+=2;return l},showOptions:function(l){l=l||this._selectName;l=document.getElementById("_b_"+l);l.style.display=l.style.display=="none"?"":"none"},hidden:function(){document.getElementById("_b_"+this._selectName).style.display="none"},style:function(l){var g="";switch(l){case 1:g=
"height:15px; font-size:12px; line-height:15px; overflow:hidden; background-color:#FFFFFF; color:#000000; font-weight:normal;";break;case 2:g="height:15px; font-size:12px; line-height:15px; overflow:hidden; background-color:#315DAD; color:#FFFFFF; font-weight:bold;";break;case 3:g="height:15px; font-size:12px; line-height:15px; overflow:hidden; background-color:#D8D8D8; color:#000000; font-weight:normal;"}return g},css:function(l,g){if(b.id("_v_"+this._selectName).innerHTML!=l.innerHTML)l.style.cssText=
this.style(g)}})});
Jx().$package(function(f){var b=f.dom,k=f.event;f.ui=f.ui||{};f.ui.IframeScroller=function(l){this.container=l.parentNode;if(f.platform.iPad&&f.platform.iPad.split(".")[0]>=4)this.container=l.parentNode.parentNode;this.iframe=l;this.holding=false;this.offsetY=this.offsetX=this.posy=this.posx=0;var g=this;this.observers={onTouchStart:function(i){i=i.changedTouches[0];g.posx=i.pageX;g.posy=i.pageY;g.minX=b.getWidth(g.container)-b.getWidth(g.iframe);g.minY=b.getHeight(g.container)-b.getHeight(g.iframe);
k.on(g.iframe,"touchmove",g.observers.onTouchMove);k.on(g.iframe,"touchend",g.observers.onTouchEnd)},onTouchMove:function(i){if(!(i.changedTouches.length>1)){i.preventDefault();i.stopPropagation();var c=i.changedTouches[0];i=c.pageX;c=c.pageY;var h=g.offsetX-(g.posx-i),e=g.offsetY-(g.posy-c);if(h>0)h=0;else if(h<g.minX)h=g.minX;if(e>0)e=0;else if(e<g.minY)e=g.minY;l.style.left=h+"px";l.style.top=e+"px";g.offsetX=h;g.offsetY=e;g.posx=i;g.posy=c}},onTouchEnd:function(){k.off(g.iframe,"touchmove",g.observers.onTouchMove);
k.off(g.iframe,"touchend",g.observers.onTouchEnd)}};this.destroy=function(){k.off(this.iframe,"touchstart",this.observers.onTouchStart);k.off(this.iframe,"touchmove",this.observers.onTouchMove);k.off(this.iframe,"touchend",this.observers.onTouchEnd);this.container=this.iframe=null};k.on(this.iframe,"touchstart",this.observers.onTouchStart)}});
Jx().$package(function(f){var b=f.dom,k=new f.Class({init:function(l){this.el=l;this.parentEl=l.parentNode;this.loadingContainer=b.node("div",{"class":"loading_container"});this.loadingContainer.innerHTML='<div class="loading_img" id ="loading_img"></div>';this.parentEl.appendChild(this.loadingContainer);this.loadingImg=b.id("loading_img");l=b.getClientWidth(this.el);var g=b.getClientHeight(this.el);b.setStyle(this.loadingContainer,"width",l+"px");b.setStyle(this.loadingContainer,"height",g+"px");
this.setCenter(this.loadingImg,this.loadingContainer)},setCenter:function(l,g){var i=b.getClientWidth(g),c=b.getClientHeight(g),h=b.getClientWidth(l),e=b.getClientHeight(l);i=i>h?(i-h)/2:0;c=c>e?(c-e)/2:0;b.setStyle(l,"position","relative");b.setXY(l,i,c)},setXY:function(){},show:function(){b.hide(this.el);b.show(this.loadingContainer)},hide:function(){b.hide(this.loadingContainer);b.show(this.el)}});f.ui=f.ui||{};f.ui.Loading=k});
Jx().$package(function(f){var b=f.dom;f.ui=f.ui||{};f.ui.Marquee=new f.Class({init:function(k){var l=this;this.speed=k.speed||40;this.stopTime=k.stopTime||3E3;this.lineHeight=k.lineHeight||20;this.target=k.target;this.intervaler=this.lineTimer=this.timer=null;this.scrollHeight=this.lineHeight;this.isStop=false;this._onTimeRun=function(){l.scrollOneLine()}},scrollOneLine:function(){if(this.scrollHeight>0){this.scrollHeight--;var k=this.target.style.top.match(/-?\d+/);k=!k?0:parseInt(k[0]);this.target.style.top=
--k+"px";this.lineTimer=setTimeout(this._onTimeRun,this.speed)}else this.isStop||this.update()},stop:function(){this.timer&&clearTimeout(this.timer)},stopAll:function(){this.stop();this.lineTimer&&clearTimeout(this.lineTimer)},reset:function(){this.target.style.top="0px"},update:function(){if(!this.isStop){this.timer&&clearTimeout(this.timer);this.scrollHeight=this.lineHeight;var k=this.target.style.top.match(/\d+/),l=b.getScrollHeight(this.target);if(k&&l){k=parseInt(k[0]);if(k>=l){this.target.style.top=
this.lineHeight+"px";this.scrollOneLine();return}}this.timer=setTimeout(this._onTimeRun,this.stopTime)}},walkOnLastLine:function(){this._onTimeRun()}})});
Jx().$package(function(f){f.ui=f.ui||{};f.ui.Notifier=new f.Class({hasSupport:function(){return window.webkitNotifications?true:false},requestPermission:function(b){window.webkitNotifications.requestPermission(function(){b&&b(window.webkitNotifications.checkPermission()==0)})},notify:function(b,k,l){if(window.webkitNotifications.checkPermission()==0){b=window.webkitNotifications.createNotification(b,k,l);b.show();return b}return false}})});
Jx().$package(function(f){var b=f.dom,k=f.event;f.ui=f.ui||{};f.ui.Pagination=new f.Class({init:function(l){this.pagebarEl=l.el;this.count=l.count;this.perPage=l.perPage||10;this.callback=l.callback||function(){};this.type=l.type||1;this.maxPage=Math.ceil(this.count/this.perPage);this.currentPage=l.currentPage||1;l=this.pagebarEl.children[0];this.pagelistEl=l.children[1];this.preEl=l.children[0];this.nextEl=l.children[2];this.maxPage>1?b.show(this.pagebarEl):b.hide(this.pagebarEl);this.turnTo(this.currentPage,
true);k.on(this.preEl,"click",f.bind(this.onPreElClick,this));k.on(this.nextEl,"click",f.bind(this.onNextElClick,this))},reset:function(l){this.count=f.isNumber(l.count)?l.count:this.count;this.perPage=l.perPage||this.perPage||10;this.callback=l.callback||this.callback||function(){};this.type=l.type||this.type||1;this.currentPage=l.currentPage||this.currentPage||1;this.maxPage=Math.ceil(this.count/this.perPage);this.maxPage>1?b.show(this.pagebarEl):b.hide(this.pagebarEl);this.setPage(this.currentPage)},
setPage:function(l){var g="",i=this.maxPage;this.currentPage=l;if(!(l>i||l<1)){if(this.type==1){if(i>8){g+='<a class="w'+(l+"").length+(l==1?" cur":"")+'" href="#" >1</a>';if(l<4){for(var c=2;c<5;c++)g+='<a class="w'+(c+"").length+(c==l?" cur":"")+'" href="#" >'+c+"</a>";g+="<span>...</span>"}else if(l+3>i){g+="<span>...</span>";for(c=i-3;c<i;c++)g+='<a class="w'+(c+"").length+(c==l?" cur":"")+'" href="#" >'+c+"</a>"}else{g+="<span>...</span>";for(c=l-1;c<l+2;c++)g+='<a class="w'+(c+"").length+(c==
l?" cur":"")+'" href="#" >'+c+"</a>";g+="<span>...</span>"}g+='<a class="w'+(i+"").length+(l==i?" cur":"")+'" href="#" >'+i+"</a>"}else for(c=1;c<=i;c++)g+='<a class="w'+(c+"").length+(c==l?" cur":"")+'" href="#" >'+c+"</a>";this.pagelistEl.innerHTML=g;b.setStyle(this.pagebarEl,"width","auto");b.setStyle(this.pagebarEl,"width",b.getClientWidth(this.pagebarEl.children[0])+10+"px");g=b.tagName("a",this.pagelistEl);c=0;for(var h=g.length;c<h;c++)k.on(g[c],"click",f.bind(this.onPagesElClick,this))}else if(this.type==
2){g=l+"/"+i;this.pagelistEl.innerHTML=g}b.removeClass(this.preEl,"preBtn_dis");b.removeClass(this.nextEl,"nextBtn_dis");if(l==1)b.addClass(this.preEl,"preBtn_dis");else l==i&&b.addClass(this.nextEl,"nextBtn_dis")}},turnTo:function(l,g){if(!(isNaN(l)||l<1||l>this.maxPage||!g&&l==this.currentPage)){this.setPage(l);this.callback({start:this.getStart(),end:this.getEnd()})}},onPagesElClick:function(l){l.stopPropagation();l.preventDefault();this.turnTo(+l.currentTarget.innerHTML)},onPreElClick:function(l){l.stopPropagation();
l.preventDefault();if(this.currentPage>1){this.currentPage--;this.setPage(this.currentPage);this.callback({start:this.getStart(),end:this.getEnd()})}},onNextElClick:function(l){l.stopPropagation();l.preventDefault();if(this.currentPage<this.maxPage){this.currentPage++;this.setPage(this.currentPage);this.callback({start:this.getStart(),end:this.getEnd()})}},getStart:function(){return(this.currentPage-1)*this.perPage},getEnd:function(){var l=this.currentPage*this.perPage-1;if(l>this.count-1)l=this.count-
1;return l}})});
Jx().$package(function(f){var b=f.event,k=f.dom,l=f.browser,g=new f.Class({init:function(c){if(!c.appendTo)throw Error("BaseEditor: appendTo is undefined.");this.option={keepCursor:c.keepCursor||false,brNewline:c.brNewline||false,clearNode:c.clearNode||false,nodeFilter:c.nodeFilter||null};var h=c.className||"rich_editor",e=this._container=k.node("div",{"class":h}),q=this._divArea=k.node("div",{"class":c.richClassName||h+"_div"});h=this._textArea=k.node("textarea",{"class":c.textClassName||h+"_text"});
e.appendChild(q);e.appendChild(h);c.appendTo.appendChild(e);this.setState(true);this.clear();var r=this;this._private={startTimeoutSaveRange:function(o){this.clearTimeoutSaveRange();this._keyupTimer=window.setTimeout(this.timeoutSaveRange,o||0)},timeoutSaveRange:function(){r.saveRange(true)},clearTimeoutSaveRange:function(){if(this._keyupTimer){window.clearTimeout(this._keyupTimer);this._keyupTimer=0}},startTimeoutClearNodes:function(o){this.clearTimeoutClearNodes();this._clearNodesTimer=window.setTimeout(this.timeoutClearNodes,
o||0)},timeoutClearNodes:function(){r.clearNodes()},clearTimeoutClearNodes:function(){if(this._clearNodesTimer){window.clearTimeout(this._clearNodesTimer);this._clearNodesTimer=0}}};b.on(q,"blur",f.bind(g.observer.onBlur,r));b.on(q,"mouseup",f.bind(g.observer.onMouseup,r));b.on(q,"drop",f.bind(g.observer.onDrop,r));b.on(q,"paste",f.bind(g.observer.onPaste,r));b.on(q,"keyup",f.bind(g.observer.onKeyup,r));l.ie&&b.on(q,"keydown",f.bind(g.observer.onBackspaceKeydown,r));l.adobeAir&&b.on(q,"keyup",f.bind(g.observer.onAdobeAirKeyup,
r));if(f.platform.linux&&l.firefox)b.on(q,"keypress",f.bind(g.observer.onLinuxKeypress,r));else f.platform.win&&l.opera?b.on(q,"keypress",f.bind(g.observer.onKeydown,r)):b.on(q,"keydown",f.bind(g.observer.onKeydown,r));b.addObserver(this,"Paste",f.bind(g.observer.onEditorPaste,r));l.firefox&&b.on(q,"keypress",f.bind(g.observer.onKeypress,r))},onKeyUp:function(){},isEnable:function(){return this._isEnable},setState:function(c){this._isEnable=c;var h=this._textArea,e=this._divArea;if(c){k.show(e);k.hide(h);
h.readonly=true;e.setAttribute("contentEditable",true)}else{k.hide(e);k.show(h);h.readonly=false;e.setAttribute("contentEditable",false)}},isEditable:function(){return this._isEditable},setEditable:function(c){this._isEditable=c;if(this._isEnable)this._divArea.setAttribute("contenteditable",c);else this._textArea.readonly=!c},destory:function(){b.off(divArea,"focus");b.off(divArea,"blur");b.off(divArea,"mousedown");b.off(divArea,"mouseup");b.off(divArea,"keyup");b.off(divArea,"paste");b.off(divArea,
"drop");b.off(divArea,"keypress");b.off(divArea,"keydown");this.setState(false);this._container.parentNode.removeChild(this._container);for(var c in this)this.hasOwnProperty(c)&&delete this[c]},getHtml:function(){return this._divArea.innerHTML},setHtml:function(c){this._divArea.innerHTML=c},clear:function(){if(this._isEnable){this.option.keepCursor&&this.saveRange(true);l.ie?this.setHtml(""):this.setHtml("<br/>")}else this.setText("")},setText:function(c){this._textArea.value=c},getText:function(){return this._textArea.value},
isEmpty:function(){if(this._isEnable){var c=this.getHtml();return c===""?true:!l.ie&&c.toLowerCase()==="<br>"?true:false}else return this.getText()===""?true:false},focus:function(){if(this._isEnable){this._divArea.focus();this.option.keepCursor&&this.restoreRange()}else this._textArea.focus()},blur:function(){this._isEnable?this._divArea.blur():this._textArea.blur()},save:function(){this.setText(this.getHtml())},restore:function(){this.setHtml(this.getText())},getRange:function(){return g.getRange(this._divArea)},
saveRange:function(c){if(c=c?this.getRange():g.getRange())this._lastRange=c},restoreRange:function(){if(this._lastRange){var c=g.getSelection();if(c.addRange){c.removeAllRanges();c.addRange(this._lastRange)}else if(c=g.getRange()){c.setEndPoint("EndToStart",this._lastRange);c.collapse(false);c.setEndPoint("EndToEnd",this._lastRange);c.select()}}},insertHtml:function(c){if(c!==""){var h=this.getRange();if(h)if(h.pasteHTML){h.pasteHTML(c);h.collapse(false);h.select()}else{if(h.createContextualFragment){c+=
'<img style="display:inline;width:1px;height:1px;">';var e=h.createContextualFragment(c);c=e.lastChild;h.deleteContents();h.insertNode(e);h.setEndAfter(c);h.setStartAfter(c);e=g.getSelection();e.removeAllRanges();e.addRange(h);h=this._divArea;e=k.getRelativeXY(c,h);h.scrollTop=e[1]<h.scrollHeight?h.scrollHeight:e[1];l.opera||document.execCommand("Delete",false,null);g.contains(h,c)&&h.removeChild(c)}}else{if(this.isEmpty())this._divArea.innerHTML=c;else this._divArea.innerHTML+=c;h=g.getRange();c=
this._divArea.lastChild;if(h.selectNode){h.setEndAfter(c);h.setStartAfter(c);e=g.getSelection();e.removeAllRanges();e.addRange(h)}else if(h.moveToElementText){h.moveToElementText(c);h.collapse(false);h.select()}}this.option.keepCursor&&this.saveRange()}},insertText:function(c){if(c!==""){var h=this._textArea;if(l.ie){var e=g.getRange();if(e)e.text=c;else h.value+=c}else if(f.isUndefined(h.selectionStart))h.value+=c;else{e=h.value;var q=h.selectionStart,r=h.selectionEnd,o=q+c.length;h.value=e.substring(0,
q)+c+e.substring(r);h.setSelectionRange(o,o)}}},newline:function(){this._isEnable?this.insertHtml("<br/>"):this.insertText("\n")},clearNodes:function(){for(var c=this._divArea,h,e,q=c.childNodes,r=q.length-1,o;r>=0;r--){o=q[r];if(o.nodeType!==3)if(o.nodeType===1){if(o.nodeName!=="BR")if(!(this.option.nodeFilter&&this.option.nodeFilter(o))){h=o.textContent||o.innerText||"";if(h!==""){h=document.createTextNode(h);e||(e=h);c.replaceChild(h,o)}else c.removeChild(o)}}else c.removeChild(o)}if(e){c=g.getSelection();
if(c.extend){c.extend(e,e.length);c.collapseToEnd()}}}});g.observer={onBlur:function(){this._private.clearTimeoutSaveRange()},onMouseup:function(){this.option.keepCursor&&this.saveRange()},onLinuxKeypress:function(c){var h=Number(c.keyCode),e=c.altKey,q=c.ctrlKey,r=c.shiftKey;if(Number(c.charCode)===118&&q&&!e&&!r)b.notifyObservers(this,"Paste",c);else if(h===13&&this.option.brNewline){c.preventDefault();this.newline()}},onAdobeAirKeyup:function(c){var h=c.altKey,e=c.ctrlKey,q=c.shiftKey;Number(c.keyCode)===
86&&e&&!h&&!q&&b.notifyObservers(this,"Paste",c)},onBackspaceKeydown:function(c){var h=c.altKey,e=c.ctrlKey,q=c.shiftKey;if(Number(c.keyCode)===8&&!e&&!h&&!q){h=g.getSelection();if(h.type.toLowerCase()==="control"){c.preventDefault();h.clear()}}},onKeydown:function(c){var h=Number(c.keyCode),e=c.altKey,q=c.ctrlKey,r=c.shiftKey;if(h===86&&q&&!e&&!r)b.notifyObservers(this,"Paste",c);else if(h===13&&this.option.brNewline){c.preventDefault();this.newline()}},onKeyup:function(c){var h=Number(c.keyCode);
h===16||h===17||h===18||this.option.keepCursor&&this._private.startTimeoutSaveRange(100);this.onKeyUp(c)},onKeypress:function(c){this.onKeyUp(c)},onPaste:function(){this.option.clearNode&&this._private.startTimeoutClearNodes(200)},onDrop:function(){this.option.clearNode&&this._private.startTimeoutClearNodes()},onEditorPaste:function(c){b.notifyObservers(this,"EditorPaste",c)&&this.option.clearNode&&this._private.startTimeoutClearNodes()}};g.getSelection=function(){return document.selection?document.selection:
window.getSelection()};g.getRange=function(c){var h=g.getSelection();if(!h)return null;h=h.getRangeAt?h.rangeCount?h.getRangeAt(0):null:h.createRange();if(!h)return null;return c?g.containsRange(c,h)?h:null:h};g.contains=function(c,h,e){if(!e&&c===h)return false;if(c.compareDocumentPosition){c=c.compareDocumentPosition(h);if(c==20||c==0)return true}else if(c.contains(h))return true;return false};g.containsRange=function(c,h){var e=h.commonAncestorContainer||h.parentElement&&h.parentElement()||null;
if(e)return g.contains(c,e,true);return false};var i=new f.Class({extend:g},{init:function(c){g.callSuper(this,"init",c)}});f.ui=f.ui||{};f.ui.BaseEditor=g;f.ui.RichEditor=i});
Jx().$package(function(f){var b=f.dom,k=f.browser.ie&&(f.browser.ie<9||b.getDoc().documentMode<9),l=new f.Class({init:function(g){this.el=g;this.type=0;this.type2class=["","rotation-90deg","rotation-180deg","rotation-270deg"];k?b.createStyleNode("                    .rotation-90deg {                        filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);                    }                    .rotation-180deg {                        filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);                    }                    .rotation-270deg {                        filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);                    }                ","rotation-style"):
b.createStyleNode("                    .rotation-90deg {                        -moz-transform:rotate(90deg);                        -webkit-transform:rotate(90deg);                        -o-transform: rotate(90deg);                        -ms-transform: rotate(90deg);                        transform:rotate(90deg);                    }                    .rotation-180deg {                        -moz-transform:rotate(180deg);                        -webkit-transform:rotate(180deg);                        -o-transform: rotate(180deg);                        -ms-transform: rotate(180deg);                        transform:rotate(180deg);                    }                    .rotation-270deg {                        -moz-transform:rotate(270deg);                        -webkit-transform:rotate(270deg);                        -o-transform: rotate(270deg);                        -ms-transform: rotate(270deg);                        transform:rotate(270deg);                    }                ",
"rotation-style");styleText=null},uninit:function(){this.el=null;this.type=0},left:function(){var g=this.type;g-=1;if(-1===g)g=3;return this.rotate(g)},right:function(){var g=this.type;g+=1;if(4===g)g=0;return this.rotate(g)},rotate:function(g){g=parseInt(g,10);if(isNaN(g)||!(g in this.type2class)||g===this.type)return false;b.removeClass(this.el,this.type2class[this.type]);b.addClass(this.el,this.type2class[g]);var i=g%2!==this.type%2;this.type=g;i&&this.center();return this.type},center:function(){if(k)if("absolute"===
b.getStyle(this.el,"position")){var g=parseInt(b.getStyle(this.el,"left"),10),i=parseInt(b.getStyle(this.el,"top"),10),c=parseInt(b.getStyle(this.el,"width"),10),h=parseInt(b.getStyle(this.el,"height"),10);if(0===this.type%2){var e=c;c=h;h=e}c=(h-c)/2;g-=c;i+=c;b.setStyle(this.el,"left",g+"px");b.setStyle(this.el,"top",i+"px")}},reset:function(){b.removeClass(this.el,this.type2class[this.type]);this.type=0},isLandscape:function(){return this.type%2}});f.ui=f.ui||{};f.ui.Rotation=l});
Jx().$package(function(f){var b=f.dom,k=f.event,l;f.ui=f.ui||{};f.ui.ScrollArea=new f.Class({init:function(g,i){var c=this;l=i?i:document;this.container=g;this.scrollBar=l.createElement("div");this.scrollBar.className="scrollBar";if(f.browser.ie)this.scrollBar.innerHTML='<div class="scrollBar_bg scrollBar_bg_t"></div><div class="scrollBar_bg scrollBar_bg_b"></div>';this.container.appendChild(this.scrollBar);this.wheelThread=20;this.isScrolling=false;var h,e={onMouseDown:function(q){q.preventDefault();
q.stopPropagation();c.isScrolling=true;h=q.clientY;b.addClass(c.scrollBar,"active");k.on(l,"mousemove",e.onMouseMove);k.on(l,"mouseup",e.onMouseUp)},onMouseMove:function(q){c.scroll((q.clientY-h)/(c.offsetHeight-c.scrollBarHeight)*(c.scrollHeight-c.offsetHeight));h=q.clientY;q.preventDefault();q.stopPropagation()},onClick:function(q){q.preventDefault();q.stopPropagation()},onMouseUp:function(q){q.preventDefault();q.stopPropagation();k.off(l,"mousemove",e.onMouseMove);k.off(l,"mouseup",e.onMouseUp);
c.isScrolling=false;b.removeClass(c.scrollBar,"active")},onMouseOver:function(){b.addClass(c.scrollBar,"hover")},onMouseOut:function(){b.removeClass(c.scrollBar,"hover")},onMouseWheel:function(q){if(b.isShow(c.scrollBar)){var r=q.wheelDelta;q.returnValue=false;q=r<0?c.wheelThread:0-c.wheelThread;r=c.scrollHeight/c.scrollBarHeight/5;if(r<1)r=1;q*=r;c.scroll(q)}},onDomMouseScroll:function(q){if(b.isShow(c.scrollBar)){var r=q.detail>0?-1:1;q.stopPropagation();q.preventDefault();q=r<0?c.wheelThread:0-
c.wheelThread;r=c.scrollHeight/c.scrollBarHeight/5;if(r<1)r=1;q*=r;c.scroll(q)}}};this.observer=e;k.on(this.scrollBar,"mousedown",e.onMouseDown);k.on(this.scrollBar,"click",e.onClick);k.on(this.scrollBar,"mouseover",e.onMouseOver);k.on(this.scrollBar,"mouseout",e.onMouseOut);if(f.browser.ie||f.browser.engine.webkit||f.browser.opera){k.on(this.container,"mousewheel",e.onMouseWheel);k.on(this.scrollBar,"mousewheel",e.onMouseWheel)}else{k.on(this.container,"DOMMouseScroll",e.onDomMouseScroll);k.on(this.scrollBar,
"DOMMouseScroll",e.onDomMouseScroll)}this.update()},update:function(){if(!this.updateTimer){var g=this;this.updateTimer=setTimeout(function(){g.updateTimer=0;g.scrollBar.style.height="0";b.hide(g.scrollBar);g.scrollHeight=g.container.scrollHeight;g.offsetHeight=g.container.offsetHeight;g.scrollBarHeight=g.offsetHeight/g.scrollHeight*g.offsetHeight;if(!(g.scrollHeight<=g.offsetHeight)){b.show(g.scrollBar);if(g.scrollBarHeight<30)g.scrollBarHeight=30;g.scrollBar.style.height=g.scrollBarHeight+"px";
g.scrollBar.style.top=g.container.scrollTop+g.container.scrollTop/(g.scrollHeight-g.offsetHeight)*(g.offsetHeight-g.scrollBarHeight)+"px"}},500)}},scroll:function(g){var i=this.scrollHeight-(this.container.scrollTop+this.offsetHeight);if(g>i)g=i;g=this.container.scrollTop+g;this.scrollBar.style.top=g+g/(this.scrollHeight-this.offsetHeight)*(this.offsetHeight-this.scrollBarHeight)+"px";this.container.scrollTop=g},getScrollTop:function(){return parseInt(this.container.scrollTop)},destroy:function(){k.off(this.scrollBar,
"mousedown",this.observer.onMouseDown);k.off(this.scrollBar,"mouseover",this.observer.onMouseOver);k.off(this.scrollBar,"mouseout",this.observer.onMouseOut);if(f.browser.ie||f.browser.engine.webkit||f.browser.opera){k.off(this.container,"mousewheel",this.observer.onMouseWheel);k.off(this.scrollBar,"mousewheel",this.observer.onMouseWheel)}else{k.off(this.container,"DOMMouseScroll",this.observer.onDomMouseScroll);k.off(this.scrollBar,"DOMMouseScroll",this.observer.onDomMouseScroll)}this.container.removeChild(this.scrollBar);
this.scrollBar=this.container=null}})});
Jx().$package(function(f){var b=f.dom,k=f.event;f.ui=f.ui||{};f.ui.ScrollBar=new f.Class({option:{barClass:"scrollBar",barHoverClass:null,barActiveClass:null,showBarContainer:false},init:function(l,g){var i=this;f.extend(this.option,g);this.bar=b.node("div",{"class":g.scrollBarClassName||"scrollBar"});this.obj=l;this.content=this.obj.getElementsByTagName("div")[0]||this.obj;b.setStyle(this.content,"height","100%");b.setStyle(this.content,"overflow","hidden");if(f.browser.ie)this.bar.innerHTML='<div class="scrollBar_bg scrollBar_bg_t"></div><div class="scrollBar_bg scrollBar_bg_b"></div>';
this.onscroll=g.onscroll||function(){};this.scrollToBottom=g.scrollToBottom||function(){};this.ipadTouchArea=g.ipadTouchArea||false;b.setStyle(this.bar,"marginTop",0);this.obj.appendChild(this.bar);if(g.showBarContainer){this.barBc=b.node("div",{"class":"scrollBar_bgc"});if(f.browser.ie)this.barBc.innerHTML='<div class="scrollBar_bgc_c scrollBar_bgc_t"></div><div class="scrollBar_bgc_c scrollBar_bgc_b"></div>';this.obj.appendChild(this.barBc)}this.setBarHeight();this.wheelThread=20;this.isScrolling=
false;var c={onMouseDown:function(h){var e=h.target;if(h.changedTouches)h=h.changedTouches[0];i.bar.y=h.clientY;i.bar.t=parseInt(i.bar.style.marginTop);if(f.platform.iPad)if(e==i.bar){k.on(document,"touchmove",c.onMouseMove);k.on(document,"touchend",c.onBarMouseUp)}else{k.on(document,"touchmove",c.onTouchAreaMove);k.on(document,"touchend",c.onMouseUp)}else{k.on(document,"mousemove",c.onMouseMove);k.on(document,"mouseup",c.onMouseUp);h.stopPropagation()}i.isScrolling=true;i.option.barActiveClass&&
b.addClass(i.bar,i.option.barActiveClass)},onMouseMove:function(h){if(h.changedTouches){h.preventDefault();h=h.changedTouches[0]}i.scroll(h.clientY-i.bar.y);if(!f.platform.iPad){h.preventDefault();h.stopPropagation()}},onTouchAreaMove:function(h){h.preventDefault();h.stopPropagation();if(h.changedTouches)h=h.changedTouches[0];i.scroll(-h.clientY+i.bar.y)},onBarMouseUp:function(){if(f.platform.iPad){k.off(document,"touchmove",c.onMouseMove);k.off(document,"touchend",c.onBarMouseUp)}else{k.off(document,
"mousemove",c.onMouseMove);k.off(document,"mouseup",c.onMouseUp)}i.isScrolling=false;i.option.barActiveClass&&b.removeClass(i.bar,i.option.barActiveClass)},onMouseUp:function(){if(f.platform.iPad){k.off(document,"touchmove",c.onTouchAreaMove);k.off(document,"touchend",c.onMouseUp)}else{k.off(document,"mousemove",c.onMouseMove);k.off(document,"mouseup",c.onMouseUp)}i.isScrolling=false;i.option.barActiveClass&&b.removeClass(i.bar,i.option.barActiveClass)},onMouseOver:function(){b.addClass(i.bar,i.option.barHoverClass)},
onMouseOut:function(){b.removeClass(i.bar,i.option.barHoverClass)},onMouseWheel:function(h){if(b.isShow(i.bar)){i.D=h.wheelDelta;h.returnValue=false;var e=i.D<0?i.wheelThread:0-i.wheelThread;i.bar.y=h.clientY;i.bar.t=parseInt(i.bar.style.marginTop);i.scroll(e)}else i.scrollToBottom(h)},onClick:function(h){h.stopPropagation()},onDomMouseScroll:function(h){if(b.isShow(i.bar)){i.D=h.detail>0?-1:1;if(!f.platform.iPad){h.stopPropagation();h.preventDefault()}i.bar.y=h.clientY;i.bar.t=parseInt(i.bar.style.marginTop);
i.scroll(i.D<0?i.wheelThread:0-i.wheelThread)}else i.scrollToBottom(h)}};this.option.stopClick&&k.on(this.bar,"click",c.onClick);if(this.option.barHoverClass){k.on(this.bar,"mouseover",c.onMouseOver);k.on(this.bar,"mouseout",c.onMouseOut)}if(f.platform.iPad){k.on(this.bar,"touchstart",c.onMouseDown);this.ipadTouchArea&&k.on(this.content,"touchstart",c.onMouseDown)}else{k.on(this.bar,"mousedown",c.onMouseDown);if(f.browser.ie||f.browser.engine.webkit||f.browser.opera){k.on(this.content,"mousewheel",
c.onMouseWheel);k.on(this.bar,"mousewheel",c.onMouseWheel)}else{k.on(this.content,"DOMMouseScroll",c.onDomMouseScroll);k.on(this.bar,"DOMMouseScroll",c.onDomMouseScroll)}}},scrollBack:function(){this.content.scrollTop="0px";this.bar.t=0;this.scroll(0)},refresh:function(){this.update()},update:function(){this.setBarHeight()},setBarHeight:function(){this.onscroll(0,0);this.bar.style.height="0";b.hide(this.bar);if(this.content.offsetHeight-this.content.scrollHeight>=0){this.barBc&&b.hide(this.barBc);
this.bar.t=0}else{this.bar.style.height=parseInt(this.content.offsetHeight/this.content.scrollHeight*this.content.offsetHeight)+"px";b.show(this.bar);this.barBc&&b.show(this.barBc);this.bar.t=parseInt(this.bar.style.marginTop)}this.scroll(0)},scroll:function(l){this.marginTop=(this.bar.t||0)+l;if(this.marginTop<0)this.marginTop=0;if(this.marginTop>this.content.clientHeight-this.bar.offsetHeight){this.marginTop=this.content.clientHeight-this.bar.offsetHeight;this.scrollToBottom()}this.bar.style.marginTop=
this.marginTop+"px";l==0&&this.onscroll(l,l);var g=(this.content.scrollHeight-this.content.offsetHeight)*parseInt(this.marginTop)/(this.content.offsetHeight-this.bar.offsetHeight);this.content.scrollTop=g;this.onscroll(g,l)},getScrollTop:function(){return parseInt(this.content.scrollTop)},contentScroll:function(l){l=parseInt(this.obj.offsetHeight/this.content.scrollHeight*l);this.scroll(l)},contentPosition:function(){return this.content.scrollTop}})});
Jx().$package(function(f){var b=f.dom,k=f.event,l=false,g=false;f.ui=f.ui||{};f.ui.Sortables=new f.Class({init:function(i,c,h){this.dropTargets=i.concat();this.sortStr=c;this.option=h||{};this.limiteOption=this.option.limiteOption||{};this.dragController={};this._isLock=false},addDropTarget:function(i){this.dropTargets.push(i)},addEffect:function(i){this.effectEl=i},removeDropTarget:function(i){f.array.remove(this.dropTargets,i)},refreshDropTarget:function(i){var c,h,e,q=this.dropTargets;this.dropPos=
[];if(i)for(r in q){dropTargetEl=q[r].el;if(i.el===dropTargetEl){c={};h=b.getXY(dropTargetEl);e=b.getClientWidth(dropTargetEl);i=b.getClientHeight(dropTargetEl);c.x=h[0];c.y=h[1];c.w=e;c.h=i;this.dropPos[r]=c;break}}else for(var r in q){i=q[r].el;c={};h=b.getXY(i);e=b.getClientWidth(i);i=b.getClientHeight(i);c.x=h[0];c.y=h[1];c.w=e;c.h=i;this.dropPos[r]=c}},addDragClass:function(i){var c=i.parentNode,h=i,e=false,q=this,r=null;b.getXY(c);var o=b.getXY(h),j=i.getAttribute(this.sortStr)||"",a=this.dropTargets,
d,m;this.dropPos=[];this.dragController[j]=new f.ui.Drag(i,e,this.limiteOption);k.addObserver(this.dragController[j],"beforeStart",f.bind(function(){l=b.getClientWidth(h);g=b.getClientHeight(h);var n={};n.top=parseInt(b.getStyle(h,"marginTop")||0);n.buttom=parseInt(b.getStyle(h,"marginbottom")||0);n.left=parseInt(b.getStyle(h,"marginLeft")||0);n.right=parseInt(b.getStyle(h,"marginRight")||0);l+=n.left+n.right;g+=n.top+n.buttom;a=this.dropTargets;e=q.effectEl||q.clone(h);q.dragController[j].setEffect(e);
o=b.getXY(h);n=o[0];var s=o[1];m=[n,s];b.setStyle(e,"left",n+"px");b.setStyle(e,"top",s+"px");this.refreshDropTarget();c=h.parentNode;d=h.nextSibling;document.body.appendChild(e);k.notifyObservers(q,"beforeStart")},this));k.addObserver(this.dragController[j],"start",f.bind(function(){r=null;if(q.option.isDash)h=q.cloneDashedEl(h);else f.browser.ie||b.addClass(h,"ui_halfOpacity");k.notifyObservers(q,"start")},this));k.addObserver(this.dragController[j],"move",f.bind(function(n){var s=n.orientEvent,
u=s.pageX;s=s.pageY;if(!(Math.abs(u-m[0])+Math.abs(s-m[1])<1)){var x=u-m[0]>0?"right":"left";m=[u,s];var v={el:null,level:-1,index:0},E;for(E in this.dropPos)if(u>this.dropPos[E].x&&u<this.dropPos[E].x+this.dropPos[E].w&&s>this.dropPos[E].y&&s<this.dropPos[E].y+this.dropPos[E].h){var D=a[E],K=D.el,J=b.getClientWidth(K);J=Math.floor(J/l);var z=b.getXY(K);K=u-z[0];z=Math.floor((s-z[1])/g);if(x=="right")var p=Math.ceil(K/l);else if(x=="left")p=Math.floor(K/l);J=p+z*J;if(v.level<D.level){v.level=D.level;
v.el=D.el;v.index=J}}if(r=v.el)if(r.getAttribute("customAcceptDrop"))k.notifyObservers(r,"dragmove",n);else r.childNodes[J]?r.insertBefore(h,r.childNodes[J]):r.appendChild(h);k.notifyObservers(q,"move",n)}},this));k.addObserver(this.dragController[j],"overFlowBorder",f.bind(function(n){n.el=e;k.notifyObservers(q,"overFlowBorder",n)},this));k.addObserver(this.dragController[j],"end",f.bind(function(n){var s=n.orientEvent,u=s.pageX;s=s.pageY;r&&r.getAttribute&&r.getAttribute("customAcceptDrop")&&k.notifyObservers(r,
"drop",{dragEl:i,queue:x,pos:{x:u,y:s},apperceiveEl:h,nextEl:d,parentEl:c,currentDropTarget:r});document.body.removeChild(e);if(q.option.isDash){q.removeDashedEl();h=q.tempEl}else f.browser.ie||b.removeClass(h,"ui_halfOpacity");var x=[],v;for(v in a){x[v]=[];for(var E=a[v].el.childNodes,D=0;D<E.length;D++){if(!E[D].getAttribute)break;var K=E[D].getAttribute(q.sortStr);K&&x[v].push(K)}}try{k.notifyObservers(q,"end",{queue:x,pos:n,apperceiveEl:h,nextEl:d,parentEl:c})}catch(J){f.out("drop error")}(n=
document.elementFromPoint(u,s))&&k.notifyObservers(f.ui,"drop",{dragEl:i,pos:{x:u,y:s},apperceiveEl:h,dropEl:n})},this))},setLimite:function(i){for(var c in this.dragController)this.dragController[c].setLimite(i)},cloneDashedEl:function(i){var c=b.node("div"),h=this.option.className;if(h)b.setClass(c,h);else{b.setStyle(c,"border","dashed 2px #fff");b.setClass(c,i.className);b.setStyle(c,"position","relative");b.setStyle(c,"float","left");h=i.offsetWidth-10*parseInt(c.style.borderWidth)+"px";var e=
i.offsetHeight-10*parseInt(c.style.borderWidth)+"px";b.setStyle(c,"width",h);b.setStyle(c,"height",e)}this.dashedEl=c;i.nextSibling?i.parentNode.insertBefore(c,i.nextSibling):i.parentNode.appendChild(c);this.tempEl=i;i.parentNode.removeChild(i);return c},removeDashedEl:function(){this.dashedEl.nextSibling?this.dashedEl.parentNode.insertBefore(this.tempEl,this.dashedEl.nextSibling):this.dashedEl.parentNode.appendChild(this.tempEl);this.dashedEl.parentNode.removeChild(this.dashedEl)},clone:function(i){i=
i.cloneNode(true);i.setAttribute("id","");b.setStyle(i,"position","absolute");b.setStyle(i,"zIndex","9999999");b.setStyle(i,"background","none");return i},lock:function(){this._isLock=true;for(var i in this.dragController)this.dragController[i].lock()},unlock:function(){this._isLock=false;for(var i in this.dragController)this.dragController[i].unlock()},isLock:function(){return this._isLock},forEachNode:function(i,c,h){var e=i.length;if(typeof c!="function")throw new TypeError;for(var q=0;q<e;q++)q in
i&&c.call(h,i[q],q,i)}})});
Jx().$package(function(f){var b=f.dom,k=f.event;f.ui=f.ui||{};f.ui.Tab=function(l,g,i){this.tabs=[];this.currentTab=null;this.config={defaultIndex:0,triggerEvent:"click",slideEnabled:false,slideInterval:5E3,slideDelay:300,autoInit:true,onShow:function(){}};this.setConfig(i);if(l&&g){this.addRange(l,g);this.config.autoInit&&this.init()}};f.ui.Tab.prototype={init:function(){var l=this.config,g=this;f.array.forEach(this.tabs,function(i){k.on(i.trigger,l.triggerEvent,function(){g.select.call(g,i)});if(i.sheet)i.sheet.style.display=
"none"});this.select(this.tabs[l.defaultIndex]);l.slideEnabled&&this.slide()},setConfig:function(l){if(l)for(var g in l)this.config[g]=l[g]},add:function(l){if(l)if(l.trigger){this.tabs.push(l);l.trigger.style.display="block"}},addRange:function(l,g){if(l&&g)if(l.length&&g.length&&l.length==g.length)for(var i=0,c=l.length;i<c;i++)this.add({trigger:l[i],sheet:g[i]})},select:function(l){if(!(!l||this.currentTab&&l.trigger==this.currentTab.trigger)){if(this.currentTab){b.removeClass(this.currentTab.trigger,
"current");if(this.currentTab.sheet)this.currentTab.sheet.style.display="none"}this.currentTab=l;this.show()}},remove:function(l){if(l){if(l.trigger){b.removeClass(l.trigger,"current");l.trigger.style.display="none"}if(l.sheet)l.sheet.style.display="none";var g=this.indexOf(l);this.tabs.splice(g,g);if(l.trigger==this.currentTab.trigger)g==0?this.select(this.tabs[g+1]):this.select(this.tabs[g-1])}},show:function(){if(this.currentTab.trigger)this.currentTab.trigger.style.display="block";b.addClass(this.currentTab.trigger,
"current");if(this.currentTab.sheet)this.currentTab.sheet.style.display="block";this.config.onShow.call(this);k.notifyObservers(this,"show",this.currentTab)},slide:function(){function l(){var r=h.indexOf(h.currentTab);if(r!=-1)e=window.setInterval(function(){var o=h.tabs[++r%h.tabs.length];o&&h.select(o)},c.slideInterval)}function g(){window.clearTimeout(q);window.clearInterval(e)}function i(){q=window.setTimeout(l,c.slideDelay)}var c=this.config,h=this,e,q;f.array.forEach(this.tabs,function(r){k.on(r.trigger,
"mouseover",g);k.on(r.sheet,"mouseover",g);k.on(r.trigger,"mouseout",i);k.on(r.sheet,"mouseout",i)});l()},next:function(){var l=this.indexOf(this.currentTab);if(l!=-1){if(++l==this.tabs.length)l=0;(l=this.tabs[l])&&this.select(l)}},prev:function(){var l=this.indexOf(this.currentTab);if(l!=-1){if(--l==-1)l=this.tabs.length-1;(l=this.tabs[l])&&this.select(l)}},indexOf:function(l){for(var g=0,i=this.tabs.length;g<i;g++)if(l.trigger==this.tabs[g].trigger)return g;return-1}}});
Jet().$package(function(f){var b=f.dom,k=f.event;f.ui=f.ui||{};f.ui.TextBox=new f.Class({init:function(l){var g="share_box_"+(l.id||(new Date).getTime()),i=l.name||g,c=l.container||document.body,h=l.className||"",e=l.text||"";this._titleHeight=22;this._footerHeight=26;this._margin=this._padding=8;l.width=l.width||200;l.height=l.height||100;l.limit=l.limit||0;l.isPopup=l.isPopup||false;l.readOnly=l.readOnly||false;l.maskIframe=l.maskIframe||false;l.hasCloseButton=l.hasCloseButton===false?false:true;
this._isShow=false;h=this._el=b.node("div",{id:g,"class":"share_box "+h});var q='                <div class="share_box_title" id="'+g+'_title">                    <div class="share_box_titleTxt" id="'+g+'_titleTxt"></div>                </div>                <div class="share_box_body" id="'+g+'_body">                    <!--textarea class="share_box_text" id="'+g+'_text"></textarea--\>                </div>                <div class="share_box_footer" id="'+g+'_footer">                    <div class="share_box_showthumb" id="'+
g+'_showthumb"></div>                    <div class="share_box_hint" id="'+g+'_hint"></div>                    <div class="share_box_count" id="'+g+'_count"></div>                </div>                <div>                    <img id="'+g+'_thumb" class="share_box_thumb" src="'+l.thumb+'" width=211 height=127 />                </div>';if(l.maskIframe)q+='<iframe class="ui_maskBgIframe" src="'+alloy.CONST.MAIN_URL+'domain.html;" border="0"></iframe>';h.innerHTML=q;c.appendChild(h);this._panel=l.isPopup?
new f.ui.PopupBox({id:g,name:i,container:h}):new f.ui.Panel({id:g,name:i,container:h});this._shareBoxTitleTxt=b.id(g+"_titleTxt");this._shareBoxTitle=b.id(g+"_title");this._shareBoxHint=b.id(g+"_hint");this._shareBoxFooter=b.id(g+"_footer");this._shareBoxBody=b.id(g+"_body");this._shareBoxCount=b.id(g+"_count");this._shareBoxShowthumb=b.id(g+"_showthumb");this._shareBoxThumb=b.id(g+"_thumb");i='<strong class="share_big_quote share_left_quote">\u201c</strong><textarea class="share_box_text" id="'+
g+'_text"></textarea><strong class="share_big_quote share_right_quote">\u201d</strong>';if(l.readOnly)i='<strong class="share_big_quote share_left_quote">\u201c</strong><textarea class="share_box_text" id="'+g+'_text" readOnly="readonly"></textarea><strong class="share_big_quote share_right_quote">\u201d</strong>';l.thumb||b.hide(this._shareBoxShowthumb);this._shareBoxBody.innerHTML=i;this._shareBoxText=b.id(g+"_text");var r=this;g={onSendButtonClick:function(o){o.preventDefault();o.stopPropagation();
k.notifyObservers(r,"clickSendButton")},onCloseButtonClick:function(o){o.preventDefault();o.stopPropagation();r.hide();k.notifyObservers(r,"clickCloseButton")},onTextAreaKeyUp:function(o){o.stopPropagation();o.preventDefault();alloy.util.subStringByChar(o,l.limit)},toggleThumb:function(o){o.preventDefault();o.stopPropagation();b.isShow(r._shareBoxThumb)?b.hide(r._shareBoxThumb):b.show(r._shareBoxThumb)}};this._sendButton=new f.ui.Button({appendTo:this._shareBoxFooter,className:"window_button window_ok",
isStopPropagation:true,text:"\u53d1\u8868",event:{click:g.onSendButtonClick}});this._sendButton.show();if(l.hasCloseButton){this._closeButton=new f.ui.Button({appendTo:this._shareBoxTitle,className:"textbox_button",isStopPropagation:true,title:"\u5173\u95ed",event:{click:g.onCloseButtonClick}});this._closeButton.show()}this._shareBoxText.innerHTML=e;if(l.title){this._shareBoxTitleTxt.innerHTML=l.title;b.show(this._shareBoxTitle)}if(l.hint){e=null;for(i=0;i<l.hint.length;i++){e=b.node("a",{href:"###",
"class":"share_box_hintLink"});e.innerHTML=l.hint[i].text;k.on(e,"click",l.hint[i].click);this._shareBoxHint.appendChild(e)}}l.limit&&k.on(this._shareBoxText,"keyup",g.onTextAreaKeyUp);k.on(this._shareBoxShowthumb,"click",g.toggleThumb);this.setHeight(l.height);this.setWidth(l.width)},setHeight:function(l){b.setStyle(this._shareBoxText,"height",l-this._titleHeight-this._footerHeight+"px")},setWidth:function(l){b.setStyle(this._el,"width",l+"px");b.setStyle(this._shareBoxText,"width",l-this._padding-
this._margin+"px")},addMask:function(l){if(f.browser.ie)if(f.isString(l)){var g='<iframe class="ui_maskBgIframe" src="'+alloy.CONST.MAIN_URL+'domain.html"></iframe>';return l+g}else{g=b.node("iframe",{"class":"ui_maskBgIframe",src:"about:blank"});l.appendChild(g)}},getElement:function(){return this._el},isShow:function(){return this._isShow},show:function(l,g){l&&g&&this._panel.setXY(l,g);this._panel.show();this._isShow=true},hide:function(){this._panel.hide();this._isShow=false;k.notifyObservers(this,
"hide")},getValue:function(){return this._shareBoxText.value},setValue:function(l){this._shareBoxText.value=l},setHint:function(l){this._shareBoxHint.innerHTML="";this._shareBoxHint.appendChild(l);b.show(this._shareBoxHint)},setThumb:function(l){this._shareBoxThumb.src=l}})});
Jx().$package(function(f){var b=f.dom,k=f.array,l=f.event,g=f.fx.transitions,i=new f.Class({init:function(c,h){var e=this;h=h||{};e.id=i.count;i.count++;k.forEach(c,function(q){var r=h.text||q.getAttribute("title"),o,j=b.node("div",{style:"float:left;width:auto;background:blue;visibility:hidden;"});document.body.appendChild(j);j.innerHTML=r;o=b.getClientWidth(j,"width");o+=o%2;document.body.removeChild(j);j=null;q.removeAttribute("title");if(!f.isUndefined(r)){e.mouseMove=function(a){var d=e.tooltipEL,
m=a.pageX+24;a=a.pageY-18;b.getWidth(d);b.getHeight(d);b.setXY(d,m,a)};l.on(q,"mouseover",function(){e.tooltipEL||e.createTooltip();e.tooltipTextEL.innerHTML=r;e.showIn({width:o})});l.on(q,"mouseout",function(){e.tooltipEL&&e.showOut({width:o})})}})},createTooltip:function(){var c,h,e,q;h="background:url(http://qplus1.idqqimg.com/jx/style/image/tooltip_c.png?t=20111011001);";e="background:url(http://qplus1.idqqimg.com/jx/style/image/tooltip.png?t=20111011001) no-repeat;";q=" background:url(http://qplus1.idqqimg.com/jx/style/image/tooltip.png?t=20111011001) no-repeat right";
if(f.browser.ie&&f.browser.ie==6){h='filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://qplus1.idqqimg.com/jx/style/image/tooltip_c.png?t=20111011001", sizingMethod="scale");';e='filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://qplus1.idqqimg.com/jx/style/image/tooltip_l.png?t=20111011001", sizingMethod="scale");';q='filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://qplus1.idqqimg.com/jx/style/image/tooltip_r.png?t=20111011001", sizingMethod="scale");'}this.tooltipEL=
c=b.node("div",{id:"jxTooltip_"+this.id,style:"position: absolute; margin:10px; width:107px; height:38px; z-index: 10000; display: none;"});this.tooltipTextEL=h=b.node("div",{id:"jxTooltipText_"+this.id,style:"line-height:30px; width:100%; height:38px; color:white; overflow:hidden;"+h});e=b.node("div",{style:"position:absolute; left:-12px; width:12px; height:38px; overflow:hidden;"+e});q=b.node("div",{style:"position:absolute; right:-12px; width:12px; height:38px; overflow:hidden;"+q});c.appendChild(e);
c.appendChild(q);c.appendChild(h);document.body.appendChild(c);this.showInAnimation=new f.fx.Animation({element:c,property:"width",from:0,to:1,unit:"px",duration:300,transition:g.sinusoidal.easeOut});this.showOutAnimation=new f.fx.Animation({element:c,property:"width",from:1,to:0,unit:"px",duration:300,transition:g.sinusoidal.easeOut});l.addObserver(this.showOutAnimation,"end",function(){b.hide(c)})},showIn:function(c){var h=this.tooltipEL;this.showOutAnimation.end();l.on(document,"mousemove",this.mouseMove);
b.show(h);this.showInAnimation.start(0,c.width)},showOut:function(c){var h=this;h.showInAnimation.end();h.showOutAnimation.start(c.width,0);l.addObserver(h.showOutAnimation,"end",function(){l.off(document,"mousemove",h.mouseMove)})},about:function(){alert("Jx().ui.Tooltip() by Jetyu of Tencent!")}});i.count=0;f.ui=f.ui||{};f.ui.Tooltip=i});
Jx().$package(function(f){var b=f.dom,k=f.event;f.ui=f.ui||{};f.ui.TouchScroller=new f.Class({container:null,_dx:0,_dy:0,_posy:0,_posx:0,_maxOffsetX:0,_maxOffsetY:0,init:function(l,g){this.container=f.isString(l)?b.id(l):l;this.touchContainer=g||this.container;var i=this;this.observer={onTouchStart:function(c){if(!(c.changedTouches.length>1)){c=c.changedTouches[0];i._dx=i.container.scrollLeft;i._dy=i.container.scrollTop;i._posx=c.pageX;i._posy=c.pageY;i.maxOffsetX=i.container.scrollWidth-i.container.clientWidth;
i.maxOffsetY=i.container.scrollHeight-i.container.clientHeight;k.on(i.touchContainer,"touchmove",i.observer.onTouchMove);k.on(i.touchContainer,"touchend",i.observer.onTouchEnd)}},onTouchMove:function(c){var h=c.changedTouches[0];c=h.pageX;h=h.pageY;i._dx+=i._posx-c;i._dy+=i._posy-h;i._posx=c;i._posy=h;if(i._dx<0)i._dx=0;if(i._dy<0)i._dy=0;if(i._dx>i.maxOffsetX)i._dx=i.maxOffsetX;if(i._dy>i.maxOffsetY)i._dy=i.maxOffsetY;i.container.scrollLeft=i._dx;i.container.scrollTop=i._dy},onTouchEnd:function(){k.off(i.touchContainer,
"touchmove",i.observer.onTouchMove);k.off(i.touchContainer,"touchend",i.observer.onTouchEnd)}};k.on(this.touchContainer,"touchstart",this.observer.onTouchStart)},destroy:function(){k.off(this.touchContainer,"touchstart",this.observer.onTouchStart);this.container=null},disable:function(){k.off(this.touchContainer,"touchstart",this.observer.onTouchStart)},enable:function(){k.on(this.touchContainer,"touchstart",this.observer.onTouchStart)}})});
Jet().$package(function(f){var b=f.dom,k=f.event,l=1,g=function(){function i(z,p,t){p=parseInt(p);if(typeof t=="string")t=new Date(t.split("-")[0],t.split("-")[1],t.split("-")[2]);switch(z){case "y":return new Date(t.getFullYear()+p,t.getMonth(),t.getDate());case "m":z=Date;var w=t.getFullYear(),B=t.getMonth()+p,G=t.getFullYear();p=t.getMonth()+p;t=t.getDate();var M=["31","28","31","30","31","30","31","31","30","31","30","31"],O="";if(G%4==0)M[1]="29";O=t>M[p]?M[p]:t;return new z(w,B,O);case "d":return new Date(t.getFullYear(),
t.getMonth(),t.getDate()+p);case "w":return new Date(t.getFullYear(),t.getMonth(),7*p+t.getDate())}}function c(){var z="",p=arguments[0],t;if(typeof p=="string"){p=p.split("-");t=p[0];var w=parseInt(p[1])-1+"";p=p[2];t=new Date(t,w,p)}else if(typeof p=="object")t=p;m.year=t.getFullYear();m.month=t.getMonth();m.date=t.getDate();p=m.year+"-"+m.month;var B=i("d","-1",p+"-01").getDate(),G;p=p+"-01";var M;if(typeof p=="string")M=new Date(p.split("-")[0],p.split("-")[1],p.split("-")[2]);if(typeof p=="object")M=
p;G=M.getDay();p=i("d","-1",m.year+"-"+(parseInt(m.month)+1).toString()+"-01");M=p.getDate();p=p.getDay();w=n.getFullYear()+"-";var O=n.getMonth()+1;w+=O<10?"0":"";w+=O.toString()+"-";w+=n.getDate()<10?"0":"";w+=n.getDate().toString();for(t=0;t<G;t++){z="<li class='lastMonthDate'>"+B+"</li>"+z;B--}O=parseInt(m.month)+1;O=O<10?"0"+O.toString():O;for(t=1;t<=M;t++){var S=t<10?"0"+t.toString():t;S=m.year+"-"+O+"-"+S;a:{B=void 0;for(B in s)if(s[B]==S){B=true;break a}B=false}G=B?' class="have"':"";var R=
w==S?' class="today"':"";z+=u?B?"<li "+G+"><a href='###' "+R+" title='"+S+"'>"+t+"</a></li>":"<li "+G+">"+t+"</li>":"<li "+G+"><a href='###' "+R+" title='"+S+"'>"+t+"</a></li>"}M=1;for(t=p;t<6;t++){z+="<li class='nextMonthDate'>"+M+"</li>";M++}M="<a href='###' class='nextMonth' title='\u4e0b\u4e00\u4e2a\u6708'>\u00bb</a>";M+="<a href='###' class='lastMonth' title='\u4e0a\u4e00\u4e2a\u6708'>\u00ab</a>";M+="<span class='selectThisYear'><a href='###' class='toSelectYear' title='\u70b9\u51fb\u8fd9\u91cc\u9009\u62e9\u5e74\u4efd' >"+
m.year+"</a></span>\u5e74<span class='selectThisMonth'><a href='###' class='toSelectMonth' title='\u70b9\u51fb\u8fd9\u91cc\u9009\u62e9\u6708\u4efd'>"+(parseInt(m.month)+1).toString()+"</a></span>\u6708";if(arguments.length>1){d.date.innerHTML=z;d.title.innerHTML=M;J();D();K()}else return"<div id='calender' class='calender'>                                    <div class='calenderTitle'>"+M+"</div>                                    <div class='calenderBody'>                                        <ul class='day'>                                            <li>\u65e5</li><li>\u4e00</li><li>\u4e8c</li><li>\u4e09</li><li>\u56db</li><li>\u4e94</li><li>\u516d</li>                                        </ul>                                        <ul class='date' id='thisMonthDate'>"+
z+"</ul>                                    </div>                                    <div class='calenderBottom'>                                        <span><a href='###' class='closeCalender' >\u5173\u95ed</a><span></span>                                        <span><a href='###' class='calToToday' title='"+S+"'>\u4eca\u5929</a></span>                                        <span><a href='###' class='calEmptyInput' title=''>\u7f6e\u7a7a</a></span>                                    </div>                                  </div>"}
function h(z){if(d.target.tagName=="INPUT")d.target.value=z.title;else d.target.innerHTML=z.title;x(z.title);a.close()}function e(z){var p="",t=z.innerHTML,w;for(w=1970;w<=2020;w++)p+=w==t?"<option value="+w+" selected>"+w+"</option>":"<option value="+w+">"+w+"</option>";p="<select class='selectYear'>"+p+"</select>";z.parentNode.innerHTML=p;d.selectYear=b.mini(".selectYear",d.title)[0];k.on(d.selectYear,"onblur",function(){q(this)});k.on(d.selectYear,"change",function(){q(this)})}function q(z){var p=
"";p=d.selectMonth?d.selectMonth.value:z.value+"-"+z.parentNode.parentNode.getElementsByTagName("span")[1].getElementsByTagName("a")[0].innerHTML;c(p+"-1",z.parentNode)}function r(z){var p="",t=z.innerHTML,w;for(w=1;w<=12;w++)p+=w==t?"<option value="+w+" selected>"+w+"</option>":"<option value="+w+">"+w+"</option>";p="<select class='selectMonth'>"+p+"</select>";z.parentNode.innerHTML=p;d.selectMonth=b.mini(".selectMonth",d.title)[0];k.on(d.selectMonth,"onblur",function(){o(this)});k.on(d.selectMonth,
"change",function(){o(this)})}function o(z){var p="";p=d.selectYear?d.selectYear.value:z.parentNode.parentNode.getElementsByTagName("span")[0].getElementsByTagName("a")[0].innerHTML;c(p+"-"+z.value+"-1",z.parentNode)}var j=navigator.userAgent;j.indexOf("Opera");j.indexOf("compatible")>-1&&j.indexOf("MSIE");var a=this,d={main:null,target:null,title:null,date:null,selectMonth:null,selectYear:null},m={year:null,month:null,date:null},n=null,s=[],u=false,x=null,v=true,E=function(){k.on(b.mini(".closeCalender",
d.main)[0],"click",a.close);k.on(b.mini(".calToToday",d.main)[0],"click",function(){h(this)});k.on(b.mini(".calEmptyInput",d.main)[0],"click",function(){if(d.target.tagName=="INPUT")d.target.value="";else d.target.innerHTML="";d.main&&b.hide(d.main)})},D=function(){var z=b.mini("a",d.date),p;for(p in z)k.on(z[p],"click",function(){h(this)})},K=function(){var z=b.mini(".toSelectYear",d.title)[0],p=b.mini(".toSelectMonth",d.title)[0];if(!v){z.title="";b.setStyle(z,"cursor","default");p.title="";b.setStyle(p,
"cursor","default");return false}k.on(z,"click",function(){e(this)});k.on(p,"click",function(){r(this)})},J=function(){var z=m.year+"-"+m.month+"-"+m.date;k.on(b.mini(".nextMonth",d.title)[0],"click",function(){c(i("m",1,z),this)});k.on(b.mini(".lastMonth",d.title)[0],"click",function(){c(i("m",-1,z),this)})};this.close=function(){d.main&&b.hide(d.main)};this.show=function(){if(d.main){b.show(d.main);for(var z=d.target,p=d.main.style,t=z,w=t.offsetLeft;t=t.offsetParent;)w+=t.offsetLeft;p.left=w+"px";
p=d.main.style;z=z;for(t=z.offsetTop;z=z.offsetParent;)t+=z.offsetTop;p.top=t+20+"px"}};this.destroy=function(){if(d.main){d.main.parentNode.removeChild(d.main);d.main=null}};this.setCalendar=function(z,p,t){p=p||{};p.showBottom=p.showBottom||false;s=p.hightList||[];u=p.isOnlyHight||false;v=f.isUndefined(p.needSelect)?true:p.needSelect;p.today=p.today||0;f.isUndefined(t)||(x=t);if(!d.main){d.main=document.createElement("span");d.main.id="calenderspan_"+l++;n=new Date;p.today!=0&&n.setTime(p.today);
d.main.innerHTML=c(n);d.main.className="calendarBox";d.main.style.display="none";document.body.insertBefore(d.main,document.body.lastChild);d.title=b.mini(".calenderTitle",d.main)[0];d.date=b.mini(".date",d.main)[0];J();E();D();K();p.showBottom||d.main&&b.hide(b.mini(".calenderBottom",d.main)[0]);k.on(d.main,"mouseout",function(w){var B=d.main;w=w.relatedTarget?w.relatedTarget:w.toElement;try{(B.contains?B!=w&&B.contains(w):!!(B.compareDocumentPosition(w)&16))||a.close()}catch(G){}})}d.target=z}};
f.ui=f.ui||{};if(!f.ui.calendar)f.ui.calendar=new g;f.ui.CalendarClass=g});
Jx().$package(function(f){function b(j,a){var d;this.element=typeof j=="object"?j:document.getElementById(j);this.wrapper=this.element.parentNode;this.element.style.webkitTransitionProperty="-webkit-transform";this.element.style.webkitTransitionTimingFunction="cubic-bezier(0,0,0.25,1)";this.element.style.webkitTransitionDuration="0";this.element.style.webkitTransform=q+"0,0"+r;this.options={bounce:l,momentum:l,checkDOMChanges:true,topOnDOMChanges:false,hScrollbar:l,vScrollbar:l,fadeScrollbar:g||!i,
shrinkScrollbar:g||!i,desktopCompatibility:false,overflow:"auto",snap:false,bounceLock:false,scrollbarColor:"rgba(0,0,0,0.5)",onScrollEnd:function(){}};if(typeof a=="object")for(d in a)this.options[d]=a[d];if(this.options.desktopCompatibility)this.options.overflow="hidden";this.onScrollEnd=this.options.onScrollEnd;delete this.options.onScrollEnd;this.wrapper.style.overflow=this.options.overflow;this.refresh();window.addEventListener("onorientationchange"in window?"orientationchange":"resize",this,
false);if(i||this.options.desktopCompatibility){this.element.addEventListener(c,this,false);this.element.addEventListener(h,this,false);this.element.addEventListener(e,this,false)}this.options.checkDOMChanges&&this.element.addEventListener("DOMSubtreeModified",this,false)}function k(j,a,d,m,n){var s=document;this.dir=j;this.fade=d;this.shrink=m;this.uid=++o;this.bar=s.createElement("div");this.bar.style.cssText="position:absolute;top:0;left:0;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:"+
n+";-webkit-transform:"+q+"0,0"+r+";"+(j=="horizontal"?"-webkit-border-radius:3px 2px;min-width:6px;min-height:5px":"-webkit-border-radius:2px 3px;min-width:5px;min-height:6px");this.wrapper=s.createElement("div");this.wrapper.style.cssText="-webkit-mask:-webkit-canvas(scrollbar"+this.uid+this.dir+");position:absolute;z-index:10;pointer-events:none;overflow:hidden;opacity:0;-webkit-transition-duration:"+(d?"300ms":"0")+";-webkit-transition-delay:0;-webkit-transition-property:opacity;"+(this.dir==
"horizontal"?"bottom:2px;left:2px;right:7px;height:5px":"top:2px;right:2px;bottom:7px;width:5px;");this.wrapper.appendChild(this.bar);a.appendChild(this.wrapper)}b.prototype={x:0,y:0,enabled:true,handleEvent:function(j){switch(j.type){case c:this.touchStart(j);break;case h:this.touchMove(j);break;case e:this.touchEnd(j);break;case "webkitTransitionEnd":this.transitionEnd();break;case "orientationchange":case "resize":this.refresh();break;case "DOMSubtreeModified":this.onDOMModified(j)}},onDOMModified:function(j){var a=
this;if(j.target.parentNode==a.element){setTimeout(function(){a.refresh()},0);if(a.options.topOnDOMChanges&&(a.x!=0||a.y!=0))a.scrollTo(0,0,"0")}},refresh:function(){var j=this.x,a=this.y;this.scrollWidth=this.wrapper.clientWidth;this.scrollHeight=this.wrapper.clientHeight;this.scrollerWidth=this.element.offsetWidth;this.scrollerHeight=this.element.offsetHeight;this.maxScrollX=this.scrollWidth-this.scrollerWidth;this.maxScrollY=this.scrollHeight-this.scrollerHeight;this.directionY=this.directionX=
0;if(this.scrollX)if(this.maxScrollX>=0)j=0;else if(this.x<this.maxScrollX)j=this.maxScrollX;if(this.scrollY)if(this.maxScrollY>=0)a=0;else if(this.y<this.maxScrollY)a=this.maxScrollY;if(this.options.snap){this.maxPageX=-Math.floor(this.maxScrollX/this.scrollWidth);this.maxPageY=-Math.floor(this.maxScrollY/this.scrollHeight);a=this.snap(j,a);j=a.x;a=a.y}if(j!=this.x||a!=this.y){this.setTransitionTime("0");this.setPosition(j,a,true)}this.scrollX=this.scrollerWidth>this.scrollWidth;this.scrollY=!this.options.bounceLock&&
!this.scrollX||this.scrollerHeight>this.scrollHeight;if(this.options.hScrollbar&&this.scrollX){this.scrollBarX=this.scrollBarX||new k("horizontal",this.wrapper,this.options.fadeScrollbar,this.options.shrinkScrollbar,this.options.scrollbarColor);this.scrollBarX.init(this.scrollWidth,this.scrollerWidth)}else if(this.scrollBarX)this.scrollBarX=this.scrollBarX.remove();if(this.options.vScrollbar&&this.scrollY&&this.scrollerHeight>this.scrollHeight){this.scrollBarY=this.scrollBarY||new k("vertical",this.wrapper,
this.options.fadeScrollbar,this.options.shrinkScrollbar,this.options.scrollbarColor);this.scrollBarY.init(this.scrollHeight,this.scrollerHeight)}else if(this.scrollBarY)this.scrollBarY=this.scrollBarY.remove()},setPosition:function(j,a,d){this.x=j;this.y=a;this.element.style.webkitTransform=q+this.x+"px,"+this.y+"px"+r;if(!d){this.scrollBarX&&this.scrollBarX.setPosition(this.x);this.scrollBarY&&this.scrollBarY.setPosition(this.y)}},setTransitionTime:function(j){j=j||"0";this.element.style.webkitTransitionDuration=
j;if(this.scrollBarX){this.scrollBarX.bar.style.webkitTransitionDuration=j;this.scrollBarX.wrapper.style.webkitTransitionDuration=l&&this.options.fadeScrollbar?"300ms":"0"}if(this.scrollBarY){this.scrollBarY.bar.style.webkitTransitionDuration=j;this.scrollBarY.wrapper.style.webkitTransitionDuration=l&&this.options.fadeScrollbar?"300ms":"0"}},touchStart:function(j){var a;if(this.enabled){j.preventDefault();j.stopPropagation();this.scrolling=true;this.moved=false;this.distY=this.distX=0;this.setTransitionTime("0");
if(this.options.momentum||this.options.snap){a=new WebKitCSSMatrix(window.getComputedStyle(this.element).webkitTransform);if(a.e!=this.x||a.f!=this.y){document.removeEventListener("webkitTransitionEnd",this,false);this.setPosition(a.e,a.f);this.moved=true}}this.touchStartX=i?j.changedTouches[0].pageX:j.pageX;this.scrollStartX=this.x;this.touchStartY=i?j.changedTouches[0].pageY:j.pageY;this.scrollStartY=this.y;this.scrollStartTime=j.timeStamp;this.directionY=this.directionX=0}},touchMove:function(j){if(this.scrolling){var a=
i?j.changedTouches[0].pageX:j.pageX,d=i?j.changedTouches[0].pageY:j.pageY,m=this.scrollX?a-this.touchStartX:0,n=this.scrollY?d-this.touchStartY:0,s=this.x+m,u=this.y+n;j.stopPropagation();this.touchStartX=a;this.touchStartY=d;if(s>=0||s<this.maxScrollX)s=this.options.bounce?Math.round(this.x+m/3):s>=0||this.maxScrollX>=0?0:this.maxScrollX;if(u>=0||u<this.maxScrollY)u=this.options.bounce?Math.round(this.y+n/3):u>=0||this.maxScrollY>=0?0:this.maxScrollY;if(this.distX+this.distY>5){if(this.distX-3>this.distY){u=
this.y;n=0}else if(this.distY-3>this.distX){s=this.x;m=0}this.setPosition(s,u);this.moved=true;this.directionX=m>0?-1:1;this.directionY=n>0?-1:1}else{this.distX+=Math.abs(m);this.distY+=Math.abs(n)}}},touchEnd:function(j){if(this.scrolling){var a=j.timeStamp-this.scrollStartTime,d=i?j.changedTouches[0]:j,m,n;m=0;n=this.x;var s=this.y;this.scrolling=false;if(this.moved)if(!this.options.snap&&a>250)this.resetPosition();else{if(this.options.momentum){j=this.scrollX===true?this.momentum(this.x-this.scrollStartX,
a,this.options.bounce?-this.x+this.scrollWidth/5:-this.x,this.options.bounce?this.x+this.scrollerWidth-this.scrollWidth+this.scrollWidth/5:this.x+this.scrollerWidth-this.scrollWidth):{dist:0,time:0};d=this.scrollY===true?this.momentum(this.y-this.scrollStartY,a,this.options.bounce?-this.y+this.scrollHeight/5:-this.y,this.options.bounce?(this.maxScrollY<0?this.y+this.scrollerHeight-this.scrollHeight:0)+this.scrollHeight/5:this.y+this.scrollerHeight-this.scrollHeight):{dist:0,time:0};m=Math.max(Math.max(j.time,
d.time),1);n=this.x+j.dist;s=this.y+d.dist}if(this.options.snap){j=this.snap(n,s);n=j.x;s=j.y;m=Math.max(j.time,m)}this.scrollTo(n,s,m+"ms")}else{this.resetPosition();if(i){for(m=d.target;m.nodeType!=1;)m=m.parentNode;n=document.createEvent("MouseEvents");n.initMouseEvent("click",true,true,j.view,1,d.screenX,d.screenY,d.clientX,d.clientY,j.ctrlKey,j.altKey,j.shiftKey,j.metaKey,0,null);n._fake=true;m.dispatchEvent(n)}}}},transitionEnd:function(){document.removeEventListener("webkitTransitionEnd",this,
false);this.resetPosition()},resetPosition:function(){var j=this.x,a=this.y;if(this.x>=0)j=0;else if(this.x<this.maxScrollX)j=this.maxScrollX;if(this.y>=0||this.maxScrollY>0)a=0;else if(this.y<this.maxScrollY)a=this.maxScrollY;if(j!=this.x||a!=this.y)this.scrollTo(j,a);else{if(this.moved){this.onScrollEnd();this.moved=false}this.scrollBarX&&this.scrollBarX.hide();this.scrollBarY&&this.scrollBarY.hide()}},snap:function(j,a){j=this.directionX>0?Math.floor(j/this.scrollWidth):this.directionX<0?Math.ceil(j/
this.scrollWidth):Math.round(j/this.scrollWidth);this.pageX=-j;j*=this.scrollWidth;if(j>0)j=this.pageX=0;else if(j<this.maxScrollX){this.pageX=this.maxPageX;j=this.maxScrollX}a=this.directionY>0?Math.floor(a/this.scrollHeight):this.directionY<0?Math.ceil(a/this.scrollHeight):Math.round(a/this.scrollHeight);this.pageY=-a;a*=this.scrollHeight;if(a>0)a=this.pageY=0;else if(a<this.maxScrollY){this.pageY=this.maxPageY;a=this.maxScrollY}return{x:j,y:a,time:Math.round(Math.max(Math.abs(this.x-j)/this.scrollWidth*
500,Math.abs(this.y-a)/this.scrollHeight*500))}},scrollTo:function(j,a,d){if(this.x==j&&this.y==a)this.resetPosition();else{this.moved=true;this.setTransitionTime(d||"350ms");this.setPosition(j,a);d==="0"||d=="0s"||d=="0ms"?this.resetPosition():document.addEventListener("webkitTransitionEnd",this,false)}},scrollToPage:function(j,a,d){if(!this.options.snap){this.pageX=-Math.round(this.x/this.scrollWidth);this.pageY=-Math.round(this.y/this.scrollHeight)}if(j=="next")j=++this.pageX;else if(j=="prev")j=
--this.pageX;if(a=="next")a=++this.pageY;else if(a=="prev")a=--this.pageY;j=-j*this.scrollWidth;a=-a*this.scrollHeight;a=this.snap(j,a);j=a.x;a=a.y;this.scrollTo(j,a,d||"500ms")},scrollToElement:function(j,a){if(j=typeof j=="object"?j:this.element.querySelector(j)){var d=this.scrollX?-j.offsetLeft:0,m=this.scrollY?-j.offsetTop:0;if(d>=0)d=0;else if(d<this.maxScrollX)d=this.maxScrollX;if(m>=0)m=0;else if(m<this.maxScrollY)m=this.maxScrollY;this.scrollTo(d,m,a)}},momentum:function(j,a,d,m){a=Math.abs(j)/
a*1E3;var n=a*a/2.5/1E3,s=0;if(j>0&&n>d){a=a*d/n/2.5;n=d}else if(j<0&&n>m){a=a*m/n/2.5;n=m}n*=j<0?-1:1;s=a/1.2;return{dist:Math.round(n),time:Math.round(s)}},destroy:function(j){window.removeEventListener("onorientationchange"in window?"orientationchange":"resize",this,false);this.element.removeEventListener(c,this,false);this.element.removeEventListener(h,this,false);this.element.removeEventListener(e,this,false);document.removeEventListener("webkitTransitionEnd",this,false);this.options.checkDOMChanges&&
this.element.removeEventListener("DOMSubtreeModified",this,false);if(this.scrollBarX)this.scrollBarX=this.scrollBarX.remove();if(this.scrollBarY)this.scrollBarY=this.scrollBarY.remove();j&&this.wrapper.parentNode.removeChild(this.wrapper);return null}};k.prototype={init:function(j,a){var d=document,m=Math.PI;if(this.dir=="horizontal"){if(this.maxSize!=this.wrapper.offsetWidth){this.maxSize=this.wrapper.offsetWidth;d=d.getCSSCanvasContext("2d","scrollbar"+this.uid+this.dir,this.maxSize,5);d.fillStyle=
"rgb(0,0,0)";d.beginPath();d.arc(2.5,2.5,2.5,m/2,-m/2,false);d.lineTo(this.maxSize-2.5,0);d.arc(this.maxSize-2.5,2.5,2.5,-m/2,m/2,false);d.closePath();d.fill()}}else if(this.maxSize!=this.wrapper.offsetHeight){this.maxSize=this.wrapper.offsetHeight;d=d.getCSSCanvasContext("2d","scrollbar"+this.uid+this.dir,5,this.maxSize);d.fillStyle="rgb(0,0,0)";d.beginPath();d.arc(2.5,2.5,2.5,m,0,false);d.lineTo(5,this.maxSize-2.5);d.arc(2.5,this.maxSize-2.5,2.5,0,m,false);d.closePath();d.fill()}this.size=Math.max(Math.round(this.maxSize*
this.maxSize/a),6);this.maxScroll=this.maxSize-this.size;this.toWrapperProp=this.maxScroll/(j-a);this.bar.style[this.dir=="horizontal"?"width":"height"]=this.size+"px"},setPosition:function(j){this.wrapper.style.opacity!="1"&&this.show();j=Math.round(this.toWrapperProp*j);if(j<0){j=this.shrink?j+j*3:0;if(this.size+j<7)j=-this.size+6}else if(j>this.maxScroll){j=this.shrink?j+(j-this.maxScroll)*3:this.maxScroll;if(this.size+this.maxScroll-j<7)j=this.size+this.maxScroll-6}j=this.dir=="horizontal"?q+
j+"px,0"+r:q+"0,"+j+"px"+r;this.bar.style.webkitTransform=j},show:function(){if(l)this.wrapper.style.webkitTransitionDelay="0";this.wrapper.style.opacity="1"},hide:function(){if(l)this.wrapper.style.webkitTransitionDelay="350ms";this.wrapper.style.opacity="0"},remove:function(){this.wrapper.parentNode.removeChild(this.wrapper);return null}};var l="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,g=/iphone|ipad/gi.test(navigator.appVersion),i="ontouchstart"in window,c=i?"touchstart":"mousedown",
h=i?"touchmove":"mousemove",e=i?"touchend":"mouseup",q="translate"+(l?"3d(":"("),r=l?",0)":")",o=0;f.ui=f.ui||{};f.ui.iScroll=b});
